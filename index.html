<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SportsCommunity</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; }
        
        /* 반응형 기본 설정 */
        * {
            box-sizing: border-box;
        }
        
        /* 모바일 우선 디자인 */
        .container {
            max-width: 100%;
            padding: 0 16px;
        }
        
        /* 태블릿 */
        @media (min-width: 768px) {
            .container {
                max-width: 768px;
                margin: 0 auto;
                padding: 0 24px;
            }
        }
        
        /* 데스크톱 */
        @media (min-width: 1024px) {
            .container {
                max-width: 1024px;
                padding: 0 32px;
            }
        }
        
        /* 대형 데스크톱 */
        @media (min-width: 1280px) {
            .container {
                max-width: 1280px;
            }
        }
        
        /* 모바일 네비게이션 */
        .mobile-nav {
            display: block;
        }
        
        .desktop-nav {
            display: none;
        }
        
        @media (min-width: 768px) {
            .mobile-nav {
                display: none;
            }
            
            .desktop-nav {
                display: block;
            }
        }
        
        /* 모바일 하단 탭바 */
        .mobile-bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #e5e7eb;
            z-index: 50;
            display: flex;
            justify-content: space-around;
            padding: 8px 0 calc(8px + env(safe-area-inset-bottom));
        }
        
        .mobile-bottom-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 12px;
            color: #6b7280;
            text-decoration: none;
            transition: color 0.2s;
            min-width: 0;
            flex: 1;
        }
        
        .mobile-bottom-nav-item.active {
            color: #667eea;
        }
        
        .mobile-bottom-nav-item:hover {
            color: #667eea;
        }
        
        .mobile-bottom-nav-item span {
            font-size: 10px;
            margin-top: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
        }
        
        @media (min-width: 768px) {
            .mobile-bottom-nav {
                display: none;
            }
        }
        
        /* 모바일에서 하단 탭바 공간 확보 */
        .mobile-content-padding {
            padding-bottom: calc(80px + env(safe-area-inset-bottom));
        }
        
        @media (min-width: 768px) {
            .mobile-content-padding {
                padding-bottom: 0;
            }
        }
        
        /* 모바일 플로팅 버튼 위치 조정 */
        .floating-btn {
            position: fixed;
            bottom: calc(90px + env(safe-area-inset-bottom));
            right: 20px;
            z-index: 50;
            transition: all 0.3s ease;
        }
        
        @media (min-width: 768px) {
            .floating-btn {
                bottom: 20px;
            }
        }
        
        /* 모바일 검색바 */
        .mobile-search-bar {
            position: sticky;
            top: 0;
            z-index: 40;
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 12px 16px;
        }
        
        @media (min-width: 768px) {
            .mobile-search-bar {
                display: none;
            }
        }
        
        /* 반응형 그리드 */
        .responsive-grid {
            display: grid;
            gap: 16px;
        }
        
        @media (min-width: 640px) {
            .responsive-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
        }
        
        @media (min-width: 1024px) {
            .responsive-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 24px;
            }
        }
        
        /* 모바일 모달 */
        .mobile-modal {
            position: fixed;
            inset: 0;
            z-index: 60;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 0;
        }
        
        .mobile-modal-content {
            background: white;
            width: 100%;
            max-height: 90vh;
            border-radius: 20px 20px 0 0;
            overflow-y: auto;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        
        .mobile-modal.show .mobile-modal-content {
            transform: translateY(0);
        }
        
        @media (min-width: 768px) {
            .mobile-modal {
                align-items: center;
                padding: 16px;
            }
            
            .mobile-modal-content {
                width: auto;
                max-width: 500px;
                max-height: 80vh;
                border-radius: 16px;
                transform: scale(0.9);
                opacity: 0;
            }
            
            .mobile-modal.show .mobile-modal-content {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        /* 터치 친화적 버튼 크기 */
        .touch-target {
            min-height: 44px;
            min-width: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* 모바일 텍스트 크기 */
        .mobile-text-sm {
            font-size: 14px;
        }
        
        .mobile-text-base {
            font-size: 16px;
        }
        
        .mobile-text-lg {
            font-size: 18px;
        }
        
        @media (min-width: 768px) {
            .mobile-text-sm {
                font-size: 12px;
            }
            
            .mobile-text-base {
                font-size: 14px;
            }
            
            .mobile-text-lg {
                font-size: 16px;
            }
        }
        
        /* 모바일 스크롤 최적화 */
        .mobile-scroll {
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
        }
        
        /* 모바일 드래그 방지 */
        .no-drag {
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
        }
        
        /* 모바일 선택 방지 */
        .no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* 모바일 탭 효과 */
        .mobile-tap-highlight {
            -webkit-tap-highlight-color: rgba(102, 126, 234, 0.1);
        }
        
        /* 스와이프 제스처 영역 */
        .swipe-area {
            touch-action: pan-x;
        }
        
        /* 모바일 키보드 대응 */
        .keyboard-adjust {
            transition: all 0.3s ease;
        }
        
        /* 모바일 안전 영역 */
        .safe-area-top {
            padding-top: env(safe-area-inset-top);
        }
        
        .safe-area-bottom {
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        .safe-area-left {
            padding-left: env(safe-area-inset-left);
        }
        
        .safe-area-right {
            padding-right: env(safe-area-inset-right);
        }
        
        /* 모바일 네비게이션 슬라이드 */
        .mobile-nav-slide {
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }
        
        .mobile-nav-slide.open {
            transform: translateX(0);
        }
        
        /* 반응형 이미지 */
        .responsive-image {
            width: 100%;
            height: auto;
            object-fit: cover;
        }
        
        /* 모바일 카드 스타일 */
        .mobile-card {
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 16px;
        }
        
        @media (min-width: 768px) {
            .mobile-card {
                border-radius: 16px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                margin-bottom: 24px;
            }
        }
        
        /* 모바일 폰트 크기 조정 */
        @media (max-width: 640px) {
            .text-xs { font-size: 11px; }
            .text-sm { font-size: 13px; }
            .text-base { font-size: 15px; }
            .text-lg { font-size: 17px; }
            .text-xl { font-size: 19px; }
            .text-2xl { font-size: 22px; }
            .text-3xl { font-size: 26px; }
        }
        
        /* 모바일 간격 조정 */
        @media (max-width: 640px) {
            .space-y-6 > * + * { margin-top: 1rem; }
            .space-y-4 > * + * { margin-top: 0.75rem; }
            .space-x-4 > * + * { margin-left: 0.75rem; }
            .p-6 { padding: 1rem; }
            .p-4 { padding: 0.75rem; }
            .px-6 { padding-left: 1rem; padding-right: 1rem; }
            .py-6 { padding-top: 1rem; padding-bottom: 1rem; }
        }
        
        /* 모바일 버튼 크기 */
        @media (max-width: 640px) {
            .btn-mobile {
                padding: 12px 16px;
                font-size: 14px;
                border-radius: 8px;
            }
        }
        
        /* 모바일 입력 필드 */
        @media (max-width: 640px) {
            .input-mobile {
                padding: 12px 16px;
                font-size: 16px; /* iOS 줌 방지 */
                border-radius: 8px;
            }
        }
        
        /* 모바일 네비게이션 오버레이 */
        .mobile-nav-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 40;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .mobile-nav-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        /* 모바일 드롭다운 */
        .mobile-dropdown {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            z-index: 50;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        
        .mobile-dropdown.show {
            transform: translateY(0);
        }
        
        @media (min-width: 768px) {
            .mobile-dropdown {
                position: absolute;
                top: 100%;
                left: 0;
                right: auto;
                bottom: auto;
                width: 320px;
                border-radius: 8px;
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
                transform: translateY(-10px);
                opacity: 0;
            }
            
            .mobile-dropdown.show {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .post-card {
            transition: all 0.3s ease;
        }
        
        .post-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .like-btn {
            transition: all 0.2s ease;
        }
        
        .like-btn.liked {
            color: #ef4444;
            transform: scale(1.1);
        }
        
        .bookmark-btn {
            transition: all 0.2s ease;
        }
        
        .bookmark-btn.bookmarked {
            color: #f59e0b;
            transform: scale(1.1);
        }
        
        .follow-btn {
            transition: all 0.2s ease;
        }
        
        .follow-btn.following {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .bookmark-filter {
            transition: all 0.2s ease;
        }
        
        .bookmark-filter.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .comment-like-btn {
            transition: all 0.2s ease;
        }
        
        .comment-like-btn.liked {
            color: #ef4444;
        }
        
        .filter-btn {
            transition: all 0.2s ease;
        }
        
        .filter-btn.active {
            background: #667eea;
            color: white;
        }
        
        .sport-filter {
            transition: all 0.2s ease;
        }
        
        .sport-filter.active {
            background: #667eea;
            color: white;
        }
        
        .floating-btn {
            position: fixed;
            bottom: calc(90px + env(safe-area-inset-bottom));
            right: 20px;
            z-index: 50;
            transition: all 0.3s ease;
        }
        
        @media (min-width: 768px) {
            .floating-btn {
                bottom: 20px;
            }
        }
        
        .floating-btn:hover {
            transform: scale(1.1);
        }
        
        .navbar {
            position: sticky;
            top: 0;
            z-index: 40;
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
        }
        
        .post-image {
            border-radius: 12px;
            overflow: hidden;
        }
        
        .tag {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .input-focus:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .sport-tag {
            transition: all 0.2s ease;
        }
        
        .sport-tag:hover {
            transform: scale(1.05);
        }
        
        .sport-tag.selected {
            background: #667eea;
            color: white;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .board-select {
            transition: all 0.2s ease;
        }
        
        .board-select.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .comment-item {
            transition: all 0.2s ease;
        }
        
        .comment-item:hover {
            background: rgba(0,0,0,0.02);
        }
        
        .reply-item {
            background: rgba(102, 126, 234, 0.05);
            border-left: 3px solid #667eea;
        }
        
        .search-scope-btn, .search-sport-btn, .search-date-btn, .search-sort-btn {
            transition: all 0.2s ease;
        }
        
        .search-scope-btn.active, .search-sport-btn.active, .search-date-btn.active, .search-sort-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .search-result-item {
            transition: all 0.2s ease;
        }
        
        .search-result-item:hover {
            background: rgba(0,0,0,0.02);
        }
        
        .search-highlight {
            background: rgba(255, 235, 59, 0.3);
            padding: 1px 2px;
            border-radius: 2px;
        }
        
        .popular-search-tag {
            transition: all 0.2s ease;
        }
        
        .history-item {
            transition: all 0.2s ease;
        }
        
        .history-item:hover {
            background: rgba(0,0,0,0.02);
        }
        
        .notification-item {
            transition: all 0.2s ease;
        }
        
        .notification-item:hover {
            background: rgba(0,0,0,0.02);
        }
        
        .notification-item.unread {
            background: rgba(102, 126, 234, 0.05);
            border-left: 3px solid #667eea;
        }
        
        .notification-badge-pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
        
        .notification-toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 60;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }
        
        .notification-toast.show {
            transform: translateX(0);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- 로그인/회원가입 모달 -->
    <div id="authModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="w-full max-w-md">
            <!-- 로고 및 타이틀 -->
            <div class="text-center mb-8">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-4 shadow-lg">
                    <span class="text-2xl font-bold text-indigo-600">S</span>
                </div>
                <h1 class="text-3xl font-bold text-white mb-2">SportsCommunity</h1>
                <p class="text-white/80">스포츠를 사랑하는 사람들의 공간</p>
            </div>

            <!-- 메인 카드 -->
            <div class="glass-effect rounded-2xl p-8 shadow-2xl relative">
                <!-- 닫기 버튼 -->
                <button id="closeModal" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
                <!-- 탭 버튼 -->
                <div class="flex mb-6 bg-gray-100 rounded-lg p-1">
                    <button id="loginTab" class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200 bg-white text-gray-900 shadow-sm">
                        로그인
                    </button>
                    <button id="signupTab" class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-900">
                        회원가입
                    </button>
                </div>

                <!-- 로그인 폼 -->
                <div id="loginForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">전화번호</label>
                        <input id="loginPhone" type="tel" class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200" placeholder="010-0000-0000">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">비밀번호</label>
                        <input id="loginPassword" type="password" class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200" placeholder="비밀번호를 입력하세요">
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                            <span class="ml-2 text-sm text-gray-600">로그인 상태 유지</span>
                        </label>
                        <button class="text-sm text-indigo-600 hover:text-indigo-500">비밀번호 찾기</button>
                    </div>

                    <button id="loginBtn" class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-lg font-medium hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 transform hover:scale-105">
                        로그인
                    </button>
                </div>

                <!-- 회원가입 폼 -->
                <div id="signupForm" class="space-y-4 hidden">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">전화번호</label>
                        <input id="signupPhone" type="tel" class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200" placeholder="010-0000-0000" required>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">비밀번호</label>
                        <input id="signupPassword" type="password" class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200" placeholder="비밀번호 (8자 이상)" required>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">비밀번호 확인</label>
                        <input id="signupPasswordConfirm" type="password" class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200" placeholder="비밀번호를 다시 입력하세요" required>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">관심 스포츠 (최대 3개)</label>
                        <div class="grid grid-cols-3 gap-2">
                            <button class="sport-tag px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:border-indigo-500" onclick="toggleSport(this)">축구</button>
                            <button class="sport-tag px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:border-indigo-500" onclick="toggleSport(this)">농구</button>
                            <button class="sport-tag px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:border-indigo-500" onclick="toggleSport(this)">야구</button>
                            <button class="sport-tag px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:border-indigo-500" onclick="toggleSport(this)">배구</button>
                            <button class="sport-tag px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:border-indigo-500" onclick="toggleSport(this)">테니스</button>
                            <button class="sport-tag px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:border-indigo-500" onclick="toggleSport(this)">탁구</button>
                            <button class="sport-tag px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:border-indigo-500" onclick="toggleSport(this)">수영</button>
                            <button class="sport-tag px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:border-indigo-500" onclick="toggleSport(this)">러닝</button>
                            <button class="sport-tag px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:border-indigo-500" onclick="toggleSport(this)">사이클</button>
                        </div>
                    </div>

                    <div class="space-y-3">
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500" required>
                            <span class="ml-2 text-sm text-gray-600">[필수] 이용약관에 동의합니다</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500" required>
                            <span class="ml-2 text-sm text-gray-600">[필수] 개인정보 처리방침에 동의합니다</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                            <span class="ml-2 text-sm text-gray-600">[선택] 마케팅 정보 수신에 동의합니다</span>
                        </label>
                    </div>

                    <button id="signupBtn" class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-lg font-medium hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 transform hover:scale-105">
                        회원가입
                    </button>
                </div>
            </div>

            <!-- 하단 링크 -->
            <div class="text-center mt-6">
                <p class="text-white/80 text-sm">
                    문제가 있으신가요? 
                    <a href="#" class="text-white underline hover:text-white/80">고객센터</a>
                </p>
            </div>
        </div>
    </div>

    <!-- 글쓰기 페이지 -->
    <div id="writePage" class="page">
        <!-- 상단 네비게이션 -->
        <nav class="navbar border-b border-gray-200">
            <div class="max-w-4xl mx-auto px-4 py-3">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <button id="backToFeed" class="text-gray-600 hover:text-gray-800">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <h1 class="text-xl font-bold text-gray-900">새 게시글 작성</h1>
                    </div>
                    <button id="publishBtn" class="px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200">
                        게시하기
                    </button>
                </div>
            </div>
        </nav>

        <div class="max-w-4xl mx-auto px-4 py-6">
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                <!-- 게시판 선택 -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-3">게시판 선택</label>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <button class="board-select px-4 py-2 text-sm border border-gray-300 rounded-lg hover:border-indigo-500 transition-colors" data-board="자유게시판">자유게시판</button>
                        <button class="board-select px-4 py-2 text-sm border border-gray-300 rounded-lg hover:border-indigo-500 transition-colors" data-board="질문게시판">질문게시판</button>
                        <button class="board-select px-4 py-2 text-sm border border-gray-300 rounded-lg hover:border-indigo-500 transition-colors" data-board="분석/전망">분석/전망</button>
                        <button class="board-select px-4 py-2 text-sm border border-gray-300 rounded-lg hover:border-indigo-500 transition-colors" data-board="축구">축구</button>
                        <button class="board-select px-4 py-2 text-sm border border-gray-300 rounded-lg hover:border-indigo-500 transition-colors" data-board="농구">농구</button>
                        <button class="board-select px-4 py-2 text-sm border border-gray-300 rounded-lg hover:border-indigo-500 transition-colors" data-board="야구">야구</button>
                        <button class="board-select px-4 py-2 text-sm border border-gray-300 rounded-lg hover:border-indigo-500 transition-colors" data-board="UFC">UFC</button>
                        <button class="board-select px-4 py-2 text-sm border border-gray-300 rounded-lg hover:border-indigo-500 transition-colors" data-board="e스포츠">e스포츠</button>
                    </div>
                </div>

                <!-- 제목 입력 -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">제목</label>
                    <input id="postTitle" type="text" class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200" placeholder="제목을 입력하세요">
                </div>

                <!-- 내용 입력 -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">내용</label>
                    <textarea id="postContent" rows="10" class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200 resize-none" placeholder="내용을 입력하세요"></textarea>
                </div>

                <!-- 이미지 업로드 -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">이미지 첨부</label>
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-indigo-500 transition-colors cursor-pointer" id="imageUpload">
                        <svg class="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        <p class="text-gray-600">클릭하여 이미지를 업로드하세요</p>
                        <p class="text-sm text-gray-400 mt-1">JPG, PNG, GIF (최대 10MB)</p>
                    </div>
                    <div id="imagePreview" class="mt-4 hidden">
                        <img id="previewImg" class="w-full max-w-md mx-auto rounded-lg" alt="미리보기">
                        <button id="removeImage" class="mt-2 text-sm text-red-600 hover:text-red-800">이미지 제거</button>
                    </div>
                </div>

                <!-- 태그 입력 -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">태그</label>
                    <input id="postTags" type="text" class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200" placeholder="태그를 입력하세요 (쉼표로 구분)">
                    <p class="text-sm text-gray-500 mt-1">예: 프리미어리그, 맨유, 경기리뷰</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 게시글 상세 페이지 -->
    <div id="postDetailPage" class="page">
        <!-- 상단 네비게이션 -->
        <nav class="navbar border-b border-gray-200">
            <div class="max-w-4xl mx-auto px-4 py-3">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <button id="backToFeedFromDetail" class="text-gray-600 hover:text-gray-800">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <h1 class="text-xl font-bold text-gray-900">게시글</h1>
                    </div>
                    <button class="text-gray-400 hover:text-gray-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </nav>

        <div class="max-w-4xl mx-auto px-4 py-6">
            <!-- 게시글 내용 -->
            <div id="postDetailContent" class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6">
                <!-- 게시글 내용이 여기에 동적으로 생성됩니다 -->
            </div>

            <!-- 댓글 섹션 -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">댓글 <span id="commentCount">0</span>개</h3>
                
                <!-- 댓글 작성 -->
                <div class="mb-6 pb-6 border-b border-gray-200">
                    <textarea id="commentInput" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200 resize-none" placeholder="댓글을 입력하세요"></textarea>
                    <div class="flex justify-end mt-3">
                        <button id="submitComment" class="px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200">
                            댓글 작성
                        </button>
                    </div>
                </div>

                <!-- 댓글 목록 -->
                <div id="commentsList" class="space-y-4">
                    <!-- 댓글들이 여기에 동적으로 생성됩니다 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 배너 편집 모달 -->
    <div id="bannerEditorModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-2xl p-6 w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-bold text-gray-900">배너 편집</h2>
                <button id="closeBannerEditor" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <div class="space-y-6">
                <!-- 배너 활성화/비활성화 -->
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div>
                        <h3 class="font-medium text-gray-900">배너 표시</h3>
                        <p class="text-sm text-gray-500">사용자에게 배너를 표시할지 설정합니다</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="bannerEnabled" class="sr-only peer" checked>
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                </div>

                <!-- 배너 스타일 선택 -->
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">배너 스타일</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="banner-style-option border-2 border-indigo-500 rounded-lg p-3 cursor-pointer" data-style="gradient-purple">
                            <div class="bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 h-16 rounded-lg flex items-center justify-center text-white text-sm font-medium">
                                그라데이션 퍼플
                            </div>
                        </div>
                        <div class="banner-style-option border-2 border-gray-300 rounded-lg p-3 cursor-pointer" data-style="gradient-blue">
                            <div class="bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 h-16 rounded-lg flex items-center justify-center text-white text-sm font-medium">
                                그라데이션 블루
                            </div>
                        </div>
                        <div class="banner-style-option border-2 border-gray-300 rounded-lg p-3 cursor-pointer" data-style="gradient-green">
                            <div class="bg-gradient-to-r from-green-600 via-teal-600 to-blue-600 h-16 rounded-lg flex items-center justify-center text-white text-sm font-medium">
                                그라데이션 그린
                            </div>
                        </div>
                        <div class="banner-style-option border-2 border-gray-300 rounded-lg p-3 cursor-pointer" data-style="gradient-orange">
                            <div class="bg-gradient-to-r from-orange-600 via-red-600 to-pink-600 h-16 rounded-lg flex items-center justify-center text-white text-sm font-medium">
                                그라데이션 오렌지
                            </div>
                        </div>
                        <div class="banner-style-option border-2 border-gray-300 rounded-lg p-3 cursor-pointer" data-style="solid-dark">
                            <div class="bg-gray-900 h-16 rounded-lg flex items-center justify-center text-white text-sm font-medium">
                                다크 테마
                            </div>
                        </div>
                        <div class="banner-style-option border-2 border-gray-300 rounded-lg p-3 cursor-pointer" data-style="image-upload">
                            <div class="bg-gray-100 border-2 border-dashed border-gray-300 h-16 rounded-lg flex items-center justify-center text-gray-500 text-sm font-medium">
                                + 이미지 업로드
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 배너 내용 편집 -->
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">배너 내용</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">제목</label>
                            <input id="bannerTitleInput" type="text" class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200" placeholder="배너 제목을 입력하세요" value="🏆 스포츠 커뮤니티 런칭 기념 이벤트!">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">설명</label>
                            <textarea id="bannerDescriptionInput" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200 resize-none" placeholder="배너 설명을 입력하세요">첫 게시글 작성하고 스타벅스 기프티콘 받아가세요! 선착순 100명 한정</textarea>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">기간</label>
                                <input id="bannerPeriodInput" type="text" class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200" placeholder="예: ~12/31까지" value="~12/31까지">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">혜택</label>
                                <input id="bannerRewardInput" type="text" class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200" placeholder="예: 스타벅스 아메리카노" value="스타벅스 아메리카노">
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">아이콘 (이모지)</label>
                            <div class="flex items-center space-x-2">
                                <input id="bannerIconInput" type="text" class="flex-1 px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200" placeholder="🎁" value="🎁" maxlength="2">
                                <div class="flex space-x-1">
                                    <button class="icon-btn px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50" onclick="setIcon('🎁')">🎁</button>
                                    <button class="icon-btn px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50" onclick="setIcon('🏆')">🏆</button>
                                    <button class="icon-btn px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50" onclick="setIcon('🎉')">🎉</button>
                                    <button class="icon-btn px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50" onclick="setIcon('⚽')">⚽</button>
                                    <button class="icon-btn px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50" onclick="setIcon('🏀')">🏀</button>
                                </div>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">링크 URL (선택사항)</label>
                            <input id="bannerLinkInput" type="url" class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200" placeholder="https://example.com">
                        </div>
                    </div>
                </div>

                <!-- 배너 미리보기 -->
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">미리보기</h3>
                    <div id="bannerPreview" class="relative overflow-hidden rounded-xl shadow-lg">
                        <!-- 미리보기 내용이 여기에 동적으로 생성됩니다 -->
                    </div>
                </div>

                <!-- 이미지 업로드 영역 (숨김) -->
                <div id="imageUploadSection" class="hidden">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">배경 이미지</h3>
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-indigo-500 transition-colors cursor-pointer" id="bannerImageUpload">
                        <svg class="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        <p class="text-gray-600">클릭하여 배경 이미지를 업로드하세요</p>
                        <p class="text-sm text-gray-400 mt-1">JPG, PNG (최대 5MB, 권장 크기: 800x200px)</p>
                    </div>
                    <div id="bannerImagePreview" class="mt-4 hidden">
                        <img id="bannerPreviewImg" class="w-full max-w-md mx-auto rounded-lg" alt="배너 이미지 미리보기">
                        <button id="removeBannerImage" class="mt-2 text-sm text-red-600 hover:text-red-800">이미지 제거</button>
                    </div>
                </div>
            </div>

            <div class="flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200">
                <button id="cancelBannerEdit" class="px-4 py-2 text-gray-600 hover:text-gray-800">취소</button>
                <button id="previewBannerChanges" class="px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 transition-all duration-200">미리보기 업데이트</button>
                <button id="saveBannerChanges" class="px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200">저장</button>
            </div>
        </div>
    </div>

    <!-- 배너 상세 모달 -->
    <div id="bannerDetailModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-2xl p-6 w-full max-w-lg shadow-2xl">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-bold text-gray-900">이벤트 상세</h2>
                <button id="closeBannerDetail" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <div id="bannerDetailContent" class="space-y-4">
                <!-- 배너 상세 내용이 여기에 표시됩니다 -->
            </div>

            <div class="flex justify-end space-x-3 mt-6">
                <button id="closeBannerDetailBtn" class="px-4 py-2 text-gray-600 hover:text-gray-800">닫기</button>
                <button id="participateEvent" class="px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200">참여하기</button>
            </div>
        </div>
    </div>

    <!-- 알림 설정 모달 -->
    <div id="notificationSettingsModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-bold text-gray-900">알림 설정</h2>
                <button id="closeNotificationSettings" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <div class="space-y-6">
                <!-- 기본 알림 설정 -->
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">기본 알림</h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-medium text-gray-900">댓글 알림</p>
                                <p class="text-sm text-gray-500">내 게시글에 댓글이 달릴 때</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="commentNotification" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                            </label>
                        </div>

                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-medium text-gray-900">좋아요 알림</p>
                                <p class="text-sm text-gray-500">내 게시글에 좋아요를 받을 때</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="likeNotification" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                            </label>
                        </div>

                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-medium text-gray-900">멘션 알림</p>
                                <p class="text-sm text-gray-500">다른 사용자가 나를 언급할 때</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="mentionNotification" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- 팔로우 알림 -->
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">팔로우 알림</h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-medium text-gray-900">새 게시글 알림</p>
                                <p class="text-sm text-gray-500">팔로우한 유저가 새 글을 올릴 때</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="followPostNotification" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                            </label>
                        </div>

                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-medium text-gray-900">새 팔로워 알림</p>
                                <p class="text-sm text-gray-500">누군가 나를 팔로우할 때</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="newFollowerNotification" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- 관심 종목 알림 -->
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">관심 종목 알림</h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-medium text-gray-900">핫이슈 알림</p>
                                <p class="text-sm text-gray-500">관심 종목의 인기 게시글 알림</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="hotIssueNotification" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                            </label>
                        </div>

                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-medium text-gray-900">경기 결과 알림</p>
                                <p class="text-sm text-gray-500">관심 종목의 중요 경기 결과</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="matchResultNotification" class="sr-only peer">
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- 알림 시간 설정 -->
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">알림 시간</h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-medium text-gray-900">방해 금지 모드</p>
                                <p class="text-sm text-gray-500">22:00 - 08:00 알림 끄기</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="doNotDisturbMode" class="sr-only peer">
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex justify-end space-x-3 mt-8">
                <button id="cancelNotificationSettings" class="px-4 py-2 text-gray-600 hover:text-gray-800">취소</button>
                <button id="saveNotificationSettings" class="px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200">저장</button>
            </div>
        </div>
    </div>

    <!-- 북마크 페이지 -->
    <div id="bookmarkPage" class="page">
        <!-- 상단 네비게이션 -->
        <nav class="navbar border-b border-gray-200">
            <div class="max-w-4xl mx-auto px-4 py-3">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <button id="backToFeedFromBookmark" class="text-gray-600 hover:text-gray-800">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <h1 class="text-xl font-bold text-gray-900">내 보관함</h1>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span id="bookmarkCount" class="text-sm text-gray-600">0개 저장됨</span>
                    </div>
                </div>
            </div>
        </nav>

        <div class="max-w-4xl mx-auto px-4 py-6">
            <!-- 북마크 필터 -->
            <div class="mb-6">
                <div class="flex items-center space-x-2 overflow-x-auto pb-2">
                    <span class="text-sm font-medium text-gray-700 whitespace-nowrap">필터:</span>
                    <button class="bookmark-filter active px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500 whitespace-nowrap" onclick="setBookmarkFilter('all')">전체</button>
                    <button class="bookmark-filter px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500 whitespace-nowrap" onclick="setBookmarkFilter('축구')">축구</button>
                    <button class="bookmark-filter px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500 whitespace-nowrap" onclick="setBookmarkFilter('농구')">농구</button>
                    <button class="bookmark-filter px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500 whitespace-nowrap" onclick="setBookmarkFilter('야구')">야구</button>
                    <button class="bookmark-filter px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500 whitespace-nowrap" onclick="setBookmarkFilter('배구')">배구</button>
                    <button class="bookmark-filter px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500 whitespace-nowrap" onclick="setBookmarkFilter('테니스')">테니스</button>
                </div>
            </div>

            <!-- 북마크된 게시글 목록 -->
            <div id="bookmarkContainer" class="space-y-6">
                <!-- 북마크된 게시글들이 여기에 표시됩니다 -->
            </div>

            <!-- 빈 상태 -->
            <div id="emptyBookmarks" class="text-center py-16 hidden">
                <svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
                </svg>
                <h3 class="text-lg font-medium text-gray-900 mb-2">저장된 게시글이 없습니다</h3>
                <p class="text-gray-500">마음에 드는 게시글을 북마크해보세요!</p>
            </div>
        </div>
    </div>

    <!-- 유저 프로필 페이지 -->
    <div id="profilePage" class="page">
        <!-- 상단 네비게이션 -->
        <nav class="navbar border-b border-gray-200">
            <div class="max-w-4xl mx-auto px-4 py-3">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <button id="backToFeedFromProfile" class="text-gray-600 hover:text-gray-800">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <h1 class="text-xl font-bold text-gray-900">프로필</h1>
                    </div>
                </div>
            </div>
        </nav>

        <div class="max-w-4xl mx-auto px-4 py-6">
            <div id="profileContent">
                <!-- 프로필 내용이 여기에 동적으로 생성됩니다 -->
            </div>
        </div>
    </div>

    <!-- 검색 페이지 -->
    <div id="searchPage" class="page">
        <!-- 상단 네비게이션 -->
        <nav class="navbar border-b border-gray-200">
            <div class="max-w-4xl mx-auto px-4 py-3">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <button id="backToFeedFromSearch" class="text-gray-600 hover:text-gray-800">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <h1 class="text-xl font-bold text-gray-900">검색</h1>
                    </div>
                </div>
            </div>
        </nav>

        <div class="max-w-4xl mx-auto px-4 py-6">
            <!-- 검색 입력 -->
            <div class="mb-6">
                <div class="relative">
                    <input id="searchInput" type="text" class="w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200" placeholder="게시글, 댓글, 유저, 태그 검색...">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </div>
                    <button id="clearSearch" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 hidden">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- 검색 필터 -->
            <div class="mb-6 space-y-4">
                <!-- 검색 범위 -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">검색 범위</label>
                    <div class="flex flex-wrap gap-2">
                        <button class="search-scope-btn active px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-scope="all">전체</button>
                        <button class="search-scope-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-scope="posts">게시글</button>
                        <button class="search-scope-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-scope="comments">댓글</button>
                        <button class="search-scope-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-scope="users">유저</button>
                        <button class="search-scope-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-scope="tags">태그</button>
                    </div>
                </div>

                <!-- 종목 필터 -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">종목</label>
                    <div class="flex flex-wrap gap-2">
                        <button class="search-sport-btn active px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-sport="all">전체</button>
                        <button class="search-sport-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-sport="축구">축구</button>
                        <button class="search-sport-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-sport="농구">농구</button>
                        <button class="search-sport-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-sport="야구">야구</button>
                        <button class="search-sport-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-sport="배구">배구</button>
                        <button class="search-sport-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-sport="테니스">테니스</button>
                        <button class="search-sport-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-sport="러닝">러닝</button>
                    </div>
                </div>

                <!-- 날짜 필터 -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">기간</label>
                    <div class="flex flex-wrap gap-2">
                        <button class="search-date-btn active px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-date="all">전체</button>
                        <button class="search-date-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-date="today">오늘</button>
                        <button class="search-date-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-date="week">1주일</button>
                        <button class="search-date-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-date="month">1개월</button>
                        <button class="search-date-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-date="year">1년</button>
                    </div>
                </div>

                <!-- 정렬 -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">정렬</label>
                    <div class="flex flex-wrap gap-2">
                        <button class="search-sort-btn active px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-sort="relevance">관련도순</button>
                        <button class="search-sort-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-sort="latest">최신순</button>
                        <button class="search-sort-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-sort="popular">인기순</button>
                        <button class="search-sort-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500" data-sort="oldest">오래된순</button>
                    </div>
                </div>
            </div>

            <!-- 인기 검색어 -->
            <div id="popularSearches" class="mb-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-3">인기 검색어</h3>
                <div class="flex flex-wrap gap-2">
                    <button class="popular-search-tag px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-indigo-100 hover:text-indigo-700 transition-colors" onclick="searchKeyword('프리미어리그')">#프리미어리그</button>
                    <button class="popular-search-tag px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-indigo-100 hover:text-indigo-700 transition-colors" onclick="searchKeyword('NBA')">#NBA</button>
                    <button class="popular-search-tag px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-indigo-100 hover:text-indigo-700 transition-colors" onclick="searchKeyword('KBO')">#KBO</button>
                    <button class="popular-search-tag px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-indigo-100 hover:text-indigo-700 transition-colors" onclick="searchKeyword('손흥민')">#손흥민</button>
                    <button class="popular-search-tag px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-indigo-100 hover:text-indigo-700 transition-colors" onclick="searchKeyword('월드컵')">#월드컵</button>
                    <button class="popular-search-tag px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-indigo-100 hover:text-indigo-700 transition-colors" onclick="searchKeyword('올림픽')">#올림픽</button>
                </div>
            </div>

            <!-- 검색 결과 -->
            <div id="searchResults" class="hidden">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">검색 결과</h3>
                    <span id="searchResultCount" class="text-sm text-gray-600"></span>
                </div>
                <div id="searchResultsContainer" class="space-y-4">
                    <!-- 검색 결과가 여기에 표시됩니다 -->
                </div>
            </div>

            <!-- 검색 기록 -->
            <div id="searchHistory" class="mb-6">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-lg font-semibold text-gray-900">최근 검색어</h3>
                    <button id="clearHistory" class="text-sm text-gray-500 hover:text-gray-700">전체 삭제</button>
                </div>
                <div id="searchHistoryContainer" class="space-y-2">
                    <!-- 검색 기록이 여기에 표시됩니다 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 메인 피드 페이지 -->
    <div id="feedPage" class="page active">
        <!-- 데스크톱 네비게이션 -->
        <nav class="desktop-nav navbar border-b border-gray-200 safe-area-top">
            <div class="max-w-4xl mx-auto px-4 py-3">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-full flex items-center justify-center">
                            <span class="text-white text-sm font-bold">S</span>
                        </div>
                        <h1 class="text-xl font-bold text-gray-900">SportsCommunity</h1>
                    </div>
                    <div class="flex items-center space-x-4">
                        <!-- 검색 버튼 -->
                        <button id="searchBtn" class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all duration-200 touch-target">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                        </button>
                        <!-- 북마크 버튼 -->
                        <button id="bookmarkBtn" class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all duration-200 touch-target">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
                            </svg>
                        </button>
                        <!-- 알림 버튼 -->
                        <div class="relative">
                            <button id="notificationBtn" class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all duration-200 relative touch-target">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                                </svg>
                                <span id="notificationBadge" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
                            </button>
                            <!-- 알림 드롭다운 -->
                            <div id="notificationDropdown" class="mobile-dropdown w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50 hidden">
                                <div class="p-4 border-b border-gray-200">
                                    <div class="flex items-center justify-between">
                                        <h3 class="text-lg font-semibold text-gray-900">알림</h3>
                                        <div class="flex items-center space-x-2">
                                            <button id="markAllRead" class="text-sm text-indigo-600 hover:text-indigo-800">모두 읽음</button>
                                            <button id="notificationSettings" class="text-gray-400 hover:text-gray-600 touch-target">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div id="notificationList" class="max-h-96 overflow-y-auto mobile-scroll">
                                    <!-- 알림 목록이 여기에 표시됩니다 -->
                                </div>
                                <div class="p-3 border-t border-gray-200 text-center">
                                    <button id="viewAllNotifications" class="text-sm text-indigo-600 hover:text-indigo-800">모든 알림 보기</button>
                                </div>
                            </div>
                        </div>
                        <span id="userGreeting" class="text-sm text-gray-600 hidden"></span>
                        <button id="loginNavBtn" class="px-4 py-2 text-sm bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 btn-mobile">로그인</button>
                        <button id="signupNavBtn" class="px-4 py-2 text-sm border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 transition-all duration-200 btn-mobile">회원가입</button>
                        <button id="logoutBtn" class="text-sm text-gray-600 hover:text-gray-800 hidden">로그아웃</button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- 모바일 네비게이션 -->
        <nav class="mobile-nav navbar border-b border-gray-200 safe-area-top">
            <div class="px-4 py-3">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <button id="mobileMenuBtn" class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all duration-200 touch-target">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                        <div class="w-8 h-8 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-full flex items-center justify-center">
                            <span class="text-white text-sm font-bold">S</span>
                        </div>
                        <h1 class="text-lg font-bold text-gray-900">SportsCommunity</h1>
                    </div>
                    <div class="flex items-center space-x-2">
                        <!-- 모바일 알림 버튼 -->
                        <div class="relative">
                            <button id="mobileNotificationBtn" class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all duration-200 relative touch-target">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                                </svg>
                                <span id="mobileNotificationBadge" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
                            </button>
                        </div>
                        <!-- 모바일 로그인 버튼 -->
                        <button id="mobileLoginBtn" class="px-3 py-1.5 text-xs bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200">로그인</button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- 모바일 사이드 메뉴 -->
        <div id="mobileSideMenu" class="mobile-nav-slide fixed top-0 left-0 w-80 h-full bg-white shadow-lg z-50 safe-area-top">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-full flex items-center justify-center">
                            <span class="text-white font-bold">S</span>
                        </div>
                        <div>
                            <h2 class="font-bold text-gray-900">SportsCommunity</h2>
                            <p id="mobileUserGreeting" class="text-sm text-gray-600">로그인이 필요합니다</p>
                        </div>
                    </div>
                    <button id="closeMobileMenu" class="p-2 text-gray-400 hover:text-gray-600 touch-target">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="p-4">
                <nav class="space-y-2">
                    <button id="mobileHomeBtn" class="w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors touch-target">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                        </svg>
                        <span>홈</span>
                    </button>
                    <button id="mobileSearchBtn" class="w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors touch-target">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <span>검색</span>
                    </button>
                    <button id="mobileBookmarkBtn" class="w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors touch-target">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
                        </svg>
                        <span>북마크</span>
                    </button>
                    <button id="mobileWriteBtn" class="w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors touch-target">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                        </svg>
                        <span>글쓰기</span>
                    </button>
                </nav>
                
                <div class="mt-8 pt-6 border-t border-gray-200">
                    <div id="mobileAuthSection" class="space-y-3">
                        <button id="mobileLoginFullBtn" class="w-full px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 btn-mobile">로그인</button>
                        <button id="mobileSignupBtn" class="w-full px-4 py-3 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 transition-all duration-200 btn-mobile">회원가입</button>
                    </div>
                    <div id="mobileUserSection" class="hidden">
                        <button id="mobileLogoutBtn" class="w-full px-4 py-3 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors btn-mobile">로그아웃</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 모바일 메뉴 오버레이 -->
        <div id="mobileMenuOverlay" class="mobile-nav-overlay"></div>

        <!-- 모바일 검색바 (모바일에서만 표시) -->
        <div class="mobile-search-bar mobile-nav">
            <div class="relative">
                <input id="mobileQuickSearch" type="text" class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg input-mobile" placeholder="빠른 검색...">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                </div>
            </div>
        </div>

        <div class="container mobile-content-padding">
            <!-- 이벤트/프로모션 배너 -->
            <div id="eventBanner" class="mb-6 relative overflow-hidden rounded-xl shadow-lg cursor-pointer mobile-card" onclick="showBannerDetail()">
                <div id="bannerContent" class="relative">
                    <!-- 기본 배너 내용 -->
                    <div class="bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 p-6 text-white">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="flex items-center space-x-2 mb-2">
                                    <span class="bg-white bg-opacity-20 px-2 py-1 rounded-full text-xs font-medium">🎉 특별 이벤트</span>
                                    <span class="bg-yellow-400 text-yellow-900 px-2 py-1 rounded-full text-xs font-bold">HOT</span>
                                </div>
                                <h2 id="bannerTitle" class="text-xl font-bold mb-2">🏆 스포츠 커뮤니티 런칭 기념 이벤트!</h2>
                                <p id="bannerDescription" class="text-sm opacity-90 mb-3">첫 게시글 작성하고 스타벅스 기프티콘 받아가세요! 선착순 100명 한정</p>
                                <div class="flex items-center space-x-4 text-sm">
                                    <span>📅 ~12/31까지</span>
                                    <span>🎁 스타벅스 아메리카노</span>
                                </div>
                            </div>
                            <div class="ml-4">
                                <div class="w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                    <span class="text-2xl">🎁</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 관리자 편집 버튼 (관리자만 보임) -->
                <button id="editBannerBtn" class="absolute top-2 right-2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all duration-200 hidden" onclick="event.stopPropagation(); showBannerEditor()">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                    </svg>
                </button>
                
                <!-- 닫기 버튼 -->
                <button id="closeBannerBtn" class="absolute top-2 right-12 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all duration-200" onclick="event.stopPropagation(); closeBanner()">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- 필터 섹션 -->
            <div class="mb-6">
                <!-- 정렬 필터 -->
                <div class="flex items-center space-x-2 mb-4 overflow-x-auto pb-2">
                    <span class="text-sm font-medium text-gray-700 whitespace-nowrap">정렬:</span>
                    <button class="filter-btn active px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500 whitespace-nowrap mobile-tap-highlight" onclick="setSort('latest')">최신순</button>
                    <button class="filter-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500 whitespace-nowrap mobile-tap-highlight" onclick="setSort('popular')">인기순</button>
                    <button class="filter-btn px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500 whitespace-nowrap mobile-tap-highlight" onclick="setSort('following')">팔로잉</button>
                </div>
                
                <!-- 종목 필터 -->
                <div class="flex items-center space-x-2 overflow-x-auto pb-2 swipe-area">
                    <span class="text-sm font-medium text-gray-700 whitespace-nowrap">종목:</span>
                    <button class="sport-filter active px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500 whitespace-nowrap mobile-tap-highlight" onclick="setSportFilter('all')">전체</button>
                    <button class="sport-filter px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500 whitespace-nowrap mobile-tap-highlight" onclick="setSportFilter('축구')">축구</button>
                    <button class="sport-filter px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500 whitespace-nowrap mobile-tap-highlight" onclick="setSportFilter('농구')">농구</button>
                    <button class="sport-filter px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500 whitespace-nowrap mobile-tap-highlight" onclick="setSportFilter('야구')">야구</button>
                    <button class="sport-filter px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500 whitespace-nowrap mobile-tap-highlight" onclick="setSportFilter('배구')">배구</button>
                    <button class="sport-filter px-3 py-1 text-sm rounded-full border border-gray-300 hover:border-indigo-500 whitespace-nowrap mobile-tap-highlight" onclick="setSportFilter('테니스')">테니스</button>
                </div>
            </div>

            <!-- 게시글 피드 -->
            <div id="feedContainer" class="space-y-6 mobile-scroll">
                <!-- 게시글들이 여기에 동적으로 생성됩니다 -->
            </div>

            <!-- 더 보기 버튼 -->
            <div class="text-center mt-8 mb-8">
                <button id="loadMoreBtn" class="px-6 py-3 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200 btn-mobile touch-target">
                    더 많은 게시글 보기
                </button>
            </div>
        </div>

        <!-- 글쓰기 플로팅 버튼 -->
        <button id="floatingWriteBtn" class="floating-btn w-14 h-14 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-full shadow-lg hover:shadow-xl no-select mobile-tap-highlight">
            <svg class="w-6 h-6 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
            </svg>
        </button>

        <!-- 모바일 하단 탭바 -->
        <nav class="mobile-bottom-nav safe-area-bottom">
            <button id="bottomNavHome" class="mobile-bottom-nav-item active mobile-tap-highlight">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                </svg>
                <span>홈</span>
            </button>
            <button id="bottomNavSearch" class="mobile-bottom-nav-item mobile-tap-highlight">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
                <span>검색</span>
            </button>
            <button id="bottomNavWrite" class="mobile-bottom-nav-item mobile-tap-highlight">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                </svg>
                <span>글쓰기</span>
            </button>
            <button id="bottomNavBookmark" class="mobile-bottom-nav-item mobile-tap-highlight">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
                </svg>
                <span>북마크</span>
            </button>
            <button id="bottomNavProfile" class="mobile-bottom-nav-item mobile-tap-highlight">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                </svg>
                <span>프로필</span>
            </button>
        </nav>
    </div>

    <script>
        // 전역 변수
        let currentUser = null;
        let selectedSports = [];
        let currentPosts = [];
        let currentSort = 'latest';
        let currentSportFilter = 'all';
        let searchHistory = [];
        let currentSearchFilters = {
            scope: 'all',
            sport: 'all',
            date: 'all',
            sort: 'relevance'
        };
        let notifications = [];
        let notificationSettings = {
            comment: true,
            like: true,
            mention: true,
            followPost: true,
            newFollower: true,
            hotIssue: true,
            matchResult: false,
            doNotDisturb: false
        };
        let followingUsers = [];
        let followers = [];
        let bookmarkedPosts = [];
        let userProfiles = {};
        
        // 배너 관련 변수
        let bannerSettings = {
            enabled: true,
            style: 'gradient-purple',
            title: '🏆 스포츠 커뮤니티 런칭 기념 이벤트!',
            description: '첫 게시글 작성하고 스타벅스 기프티콘 받아가세요! 선착순 100명 한정',
            period: '~12/31까지',
            reward: '스타벅스 아메리카노',
            icon: '🎁',
            link: '',
            backgroundImage: null,
            dismissed: false
        };
        let isAdmin = false; // 관리자 권한 (데모용)

        // 샘플 알림 데이터
        const sampleNotifications = [
            {
                id: 1,
                type: 'like',
                title: '좋아요 알림',
                message: '축구매니아님이 회원님의 게시글을 좋아합니다.',
                time: '2분 전',
                read: false,
                postId: 1,
                userId: 'user1'
            },
            {
                id: 2,
                type: 'comment',
                title: '댓글 알림',
                message: '농구왕님이 회원님의 게시글에 댓글을 남겼습니다: "정말 좋은 정보네요!"',
                time: '5분 전',
                read: false,
                postId: 2,
                userId: 'user2'
            },
            {
                id: 3,
                type: 'follow_post',
                title: '새 게시글',
                message: '야구덕후님이 새 게시글을 올렸습니다: "오늘 직관 후기"',
                time: '10분 전',
                read: false,
                postId: 3,
                userId: 'user3'
            },
            {
                id: 4,
                type: 'hot_issue',
                title: '축구 핫이슈',
                message: '프리미어리그 관련 게시글이 인기를 끌고 있습니다!',
                time: '30분 전',
                read: true,
                postId: 1,
                sport: '축구'
            },
            {
                id: 5,
                type: 'mention',
                title: '멘션 알림',
                message: '테니스프로님이 회원님을 언급했습니다.',
                time: '1시간 전',
                read: true,
                postId: 5,
                userId: 'user5'
            },
            {
                id: 6,
                type: 'new_follower',
                title: '새 팔로워',
                message: '런닝메이트님이 회원님을 팔로우하기 시작했습니다.',
                time: '2시간 전',
                read: true,
                userId: 'user6'
            }
        ];

        // 샘플 유저 프로필 데이터
        const sampleUserProfiles = {
            "축구매니아": {
                nickname: "축구매니아",
                bio: "프리미어리그 전문가 | 맨유 팬 | 축구 분석 좋아해요",
                followers: 1250,
                following: 340,
                posts: 89,
                interests: ["축구", "프리미어리그", "맨유"],
                joinDate: "2023년 3월"
            },
            "농구왕": {
                nickname: "농구왕",
                bio: "NBA 매니아 | 레이커스 팬 | 농구 용품 리뷰어",
                followers: 890,
                following: 210,
                posts: 156,
                interests: ["농구", "NBA", "용품리뷰"],
                joinDate: "2023년 1월"
            },
            "야구덕후": {
                nickname: "야구덕후",
                bio: "KBO 직관러 | 두산 베어스 팬 | 야구장 맛집 탐방",
                followers: 567,
                following: 123,
                posts: 234,
                interests: ["야구", "KBO", "직관"],
                joinDate: "2022년 8월"
            },
            "배구러버": {
                nickname: "배구러버",
                bio: "배구 동호회 운영 | 초보자 환영 | 매주 토요일 활동",
                followers: 234,
                following: 89,
                posts: 67,
                interests: ["배구", "동호회", "초보환영"],
                joinDate: "2023년 5월"
            },
            "테니스프로": {
                nickname: "테니스프로",
                bio: "테니스 코치 | 레슨 문의 환영 | 백핸드 전문가",
                followers: 1890,
                following: 456,
                posts: 203,
                interests: ["테니스", "레슨", "코칭"],
                joinDate: "2022년 12월"
            },
            "런닝메이트": {
                nickname: "런닝메이트",
                bio: "마라톤 완주 10회 | 한강 러닝 크루 | 건강한 라이프스타일",
                followers: 678,
                following: 234,
                posts: 134,
                interests: ["러닝", "마라톤", "한강"],
                joinDate: "2023년 2월"
            }
        };

        // 샘플 데이터
        const samplePosts = [
            {
                id: 1,
                author: "축구매니아",
                time: "2분 전",
                sport: "축구",
                content: "오늘 경기 정말 대박이었네요! 마지막 골 장면은 소름돋았어요!",
                image: null,
                tags: ["프리미어리그", "맨유", "경기리뷰"],
                likes: 24,
                comments: 8,
                liked: false,
                bookmarked: false
            },
            {
                id: 2,
                author: "농구왕",
                time: "15분 전",
                sport: "농구",
                content: "새로운 농구화 샀는데 정말 좋네요! 점프력이 확실히 달라진 것 같아요. 추천합니다!",
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='200' viewBox='0 0 400 200'%3E%3Crect width='400' height='200' fill='%23f3f4f6'/%3E%3Ctext x='200' y='100' text-anchor='middle' dy='.3em' font-family='Arial' font-size='16' fill='%236b7280'%3E농구화 이미지%3C/text%3E%3C/svg%3E",
                tags: ["농구화", "리뷰", "추천"],
                likes: 156,
                comments: 23,
                liked: true,
                bookmarked: false
            },
            {
                id: 3,
                author: "야구덕후",
                time: "1시간 전",
                sport: "야구",
                content: "오늘 직관 다녀왔는데 분위기가 정말 최고였어요! 9회말 역전승... 아직도 심장이 두근거려요!",
                image: null,
                tags: ["직관", "KBO", "역전승"],
                likes: 89,
                comments: 15,
                liked: false,
                bookmarked: true
            },
            {
                id: 4,
                author: "배구러버",
                time: "2시간 전",
                sport: "배구",
                content: "배구 동호회 모집합니다! 초보자도 환영해요. 매주 토요일 오후 2시에 모여서 재미있게 운동해요!",
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='200' viewBox='0 0 400 200'%3E%3Crect width='400' height='200' fill='%23fef3c7'/%3E%3Ctext x='200' y='100' text-anchor='middle' dy='.3em' font-family='Arial' font-size='16' fill='%23d97706'%3E배구장 사진%3C/text%3E%3C/svg%3E",
                tags: ["동호회", "모집", "초보환영"],
                likes: 67,
                comments: 31,
                liked: false,
                bookmarked: false
            },
            {
                id: 5,
                author: "테니스프로",
                time: "3시간 전",
                sport: "테니스",
                content: "백핸드 연습 팁 공유해요! 처음에는 어려웠는데 이 방법으로 연습하니까 확실히 늘더라구요!",
                image: null,
                tags: ["백핸드", "연습팁", "테니스레슨"],
                likes: 203,
                comments: 45,
                liked: true,
                bookmarked: true
            },
            {
                id: 6,
                author: "런닝메이트",
                time: "4시간 전",
                sport: "러닝",
                content: "한강 러닝 코스 추천드려요! 야경도 예쁘고 바람도 시원해서 정말 좋았어요!",
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='200' viewBox='0 0 400 200'%3E%3Crect width='400' height='200' fill='%23dbeafe'/%3E%3Ctext x='200' y='100' text-anchor='middle' dy='.3em' font-family='Arial' font-size='16' fill='%232563eb'%3E한강 야경 사진%3C/text%3E%3C/svg%3E",
                tags: ["한강러닝", "야경", "코스추천"],
                likes: 134,
                comments: 19,
                liked: false,
                bookmarked: false
            }
        ];

        // 모달 표시/숨김 함수
        function showModal() {
            document.getElementById('authModal').classList.remove('hidden');
        }
        
        function hideModal() {
            document.getElementById('authModal').classList.add('hidden');
        }

        // 탭 전환 기능
        const loginTab = document.getElementById('loginTab');
        const signupTab = document.getElementById('signupTab');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');

        loginTab.addEventListener('click', () => {
            loginTab.classList.add('bg-white', 'text-gray-900', 'shadow-sm');
            loginTab.classList.remove('text-gray-600');
            signupTab.classList.remove('bg-white', 'text-gray-900', 'shadow-sm');
            signupTab.classList.add('text-gray-600');
            
            loginForm.classList.remove('hidden');
            signupForm.classList.add('hidden');
        });

        signupTab.addEventListener('click', () => {
            signupTab.classList.add('bg-white', 'text-gray-900', 'shadow-sm');
            signupTab.classList.remove('text-gray-600');
            loginTab.classList.remove('bg-white', 'text-gray-900', 'shadow-sm');
            loginTab.classList.add('text-gray-600');
            
            signupForm.classList.remove('hidden');
            loginForm.classList.add('hidden');
        });

        // 스포츠 선택 기능 (최대 3개)
        function toggleSport(button) {
            const isSelected = button.classList.contains('selected');
            
            if (isSelected) {
                // 선택 해제
                button.classList.remove('selected');
                selectedSports = selectedSports.filter(sport => sport !== button.textContent);
            } else {
                // 선택 (최대 3개까지)
                if (selectedSports.length < 3) {
                    button.classList.add('selected');
                    selectedSports.push(button.textContent);
                } else {
                    alert('최대 3개까지 선택할 수 있습니다.');
                }
            }
        }

        // 로그인 처리
        document.getElementById('loginBtn').addEventListener('click', function(e) {
            e.preventDefault();
            const phone = document.getElementById('loginPhone').value;
            const password = document.getElementById('loginPassword').value;

            if (!phone || !password) {
                alert('전화번호와 비밀번호를 입력해주세요.');
                return;
            }

            // 간단한 로그인 처리 (실제로는 서버 인증 필요)
            currentUser = {
                phone: phone,
                nickname: phone.substring(0, 3) + "****" + phone.substring(7)
            };

            // UI 상태 변경
            document.getElementById('userGreeting').textContent = `${currentUser.nickname}님 환영합니다!`;
            document.getElementById('userGreeting').classList.remove('hidden');
            document.getElementById('logoutBtn').classList.remove('hidden');
            document.getElementById('loginNavBtn').classList.add('hidden');
            document.getElementById('signupNavBtn').classList.add('hidden');
            
            hideModal();
            initializeFeed();
        });

        // 회원가입 처리
        document.getElementById('signupBtn').addEventListener('click', function(e) {
            e.preventDefault();
            
            const phone = document.getElementById('signupPhone').value;
            const password = document.getElementById('signupPassword').value;
            const passwordConfirm = document.getElementById('signupPasswordConfirm').value;
            const requiredCheckboxes = signupForm.querySelectorAll('input[type="checkbox"][required]');

            // 유효성 검사
            if (!phone || !password || !passwordConfirm) {
                alert('모든 필수 항목을 입력해주세요.');
                return;
            }

            if (password !== passwordConfirm) {
                alert('비밀번호가 일치하지 않습니다.');
                return;
            }

            let allChecked = true;
            requiredCheckboxes.forEach(checkbox => {
                if (!checkbox.checked) {
                    allChecked = false;
                }
            });

            if (!allChecked) {
                alert('필수 약관에 동의해주세요.');
                return;
            }

            // 회원가입 성공
            currentUser = {
                phone: phone,
                nickname: phone.substring(0, 3) + "****" + phone.substring(7),
                interests: [...selectedSports]
            };

            alert(`회원가입이 완료되었습니다! 선택한 스포츠: ${selectedSports.join(', ')}`);
            
            // UI 상태 변경
            document.getElementById('userGreeting').textContent = `${currentUser.nickname}님 환영합니다!`;
            document.getElementById('userGreeting').classList.remove('hidden');
            document.getElementById('logoutBtn').classList.remove('hidden');
            document.getElementById('loginNavBtn').classList.add('hidden');
            document.getElementById('signupNavBtn').classList.add('hidden');
            
            hideModal();
            initializeFeed();
        });

        // 네비게이션 로그인 버튼
        document.getElementById('loginNavBtn').addEventListener('click', function() {
            showModal();
            // 로그인 탭으로 설정
            loginTab.click();
        });

        // 네비게이션 회원가입 버튼
        document.getElementById('signupNavBtn').addEventListener('click', function() {
            showModal();
            // 회원가입 탭으로 설정
            signupTab.click();
        });

        // 모달 닫기 버튼
        document.getElementById('closeModal').addEventListener('click', function() {
            hideModal();
        });

        // 모달 배경 클릭시 닫기
        document.getElementById('authModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideModal();
            }
        });

        // 로그아웃 처리
        document.getElementById('logoutBtn').addEventListener('click', function() {
            currentUser = null;
            selectedSports = [];
            
            // UI 상태 변경
            document.getElementById('userGreeting').classList.add('hidden');
            document.getElementById('logoutBtn').classList.add('hidden');
            document.getElementById('loginNavBtn').classList.remove('hidden');
            document.getElementById('signupNavBtn').classList.remove('hidden');
            
            // 폼 초기화
            document.getElementById('loginPhone').value = '';
            document.getElementById('loginPassword').value = '';
            document.getElementById('signupPhone').value = '';
            document.getElementById('signupPassword').value = '';
            document.getElementById('signupPasswordConfirm').value = '';
            
            // 스포츠 선택 초기화
            document.querySelectorAll('.sport-tag').forEach(tag => {
                tag.classList.remove('selected');
            });
        });

        // 피드 초기화
        function initializeFeed() {
            currentPosts = [...samplePosts];
            renderPosts();
        }

        // 게시글 렌더링
        function renderPosts() {
            const container = document.getElementById('feedContainer');
            container.innerHTML = '';

            currentPosts.forEach(post => {
                const postElement = createPostElement(post);
                container.appendChild(postElement);
            });
        }

        // 게시글 요소 생성
        function createPostElement(post) {
            const postDiv = document.createElement('div');
            postDiv.className = 'post-card mobile-card bg-white rounded-xl shadow-sm border border-gray-200 p-6 mobile-tap-highlight';
            
            postDiv.innerHTML = `
                <div class="flex items-start space-x-3 mb-4">
                    <div class="w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center">
                        <span class="text-white text-sm font-medium">${post.author[0]}</span>
                    </div>
                    <div class="flex-1">
                        <div class="flex items-center space-x-2">
                            <h3 class="font-medium text-gray-900">${post.author}</h3>
                            <span class="text-sm text-gray-500">•</span>
                            <span class="text-sm text-gray-500">${post.time}</span>
                        </div>
                        <div class="flex items-center space-x-2 mt-1">
                            <span class="text-xs px-2 py-1 bg-indigo-100 text-indigo-700 rounded-full">${post.sport}</span>
                        </div>
                    </div>
                </div>

                <div class="mb-4">
                    <p class="text-gray-800 leading-relaxed">${post.content}</p>
                </div>

                ${post.image ? `
                    <div class="mb-4">
                        <img src="${post.image}" alt="게시글 이미지" class="w-full h-48 object-cover post-image">
                    </div>
                ` : ''}

                <div class="flex flex-wrap gap-2 mb-4">
                    ${post.tags.map(tag => `<span class="tag">#${tag}</span>`).join('')}
                </div>

                <div class="flex items-center justify-between pt-4 border-t border-gray-100">
                    <div class="flex items-center space-x-6">
                        <button class="like-btn flex items-center space-x-2 text-gray-600 hover:text-red-500 ${post.liked ? 'liked' : ''}" onclick="toggleLike(${post.id})">
                            <svg class="w-5 h-5" fill="${post.liked ? 'currentColor' : 'none'}" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                            </svg>
                            <span class="like-count">${post.likes}</span>
                        </button>
                        <button class="flex items-center space-x-2 text-gray-600 hover:text-blue-500" onclick="showPostDetail(${post.id})">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                            </svg>
                            <span>${post.comments}</span>
                        </button>
                        <button class="bookmark-btn flex items-center space-x-2 text-gray-600 hover:text-yellow-500 ${post.bookmarked ? 'bookmarked' : ''}" onclick="toggleBookmark(${post.id})">
                            <svg class="w-5 h-5" fill="${post.bookmarked ? 'currentColor' : 'none'}" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="flex items-center space-x-2">
                        ${currentUser && post.author !== currentUser.nickname ? `
                            <button class="follow-btn px-3 py-1 text-sm border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 transition-all duration-200 ${followingUsers.includes(post.author) ? 'following' : ''}" onclick="toggleFollow('${post.author}')">
                                ${followingUsers.includes(post.author) ? '팔로잉' : '팔로우'}
                            </button>
                        ` : ''}
                        <button class="text-gray-400 hover:text-gray-600" onclick="showUserProfile('${post.author}')">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            `;

            return postDiv;
        }

        // 좋아요 토글
        function toggleLike(postId) {
            const post = currentPosts.find(p => p.id === postId);
            if (post) {
                post.liked = !post.liked;
                post.likes += post.liked ? 1 : -1;
                renderPosts();
            }
        }

        // 댓글 보기
        function showComments(postId) {
            alert(`게시글 ${postId}의 댓글을 보는 기능입니다. 실제로는 댓글 모달이나 페이지로 이동합니다.`);
        }

        // 정렬 설정
        function setSort(sortType) {
            currentSort = sortType;
            
            // 버튼 활성화 상태 업데이트
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // 정렬 적용
            if (sortType === 'latest') {
                currentPosts.sort((a, b) => a.id - b.id);
            } else if (sortType === 'popular') {
                currentPosts.sort((a, b) => b.likes - a.likes);
            } else if (sortType === 'following') {
                // 팔로잉한 사용자의 게시글만 표시 (데모용으로 좋아요한 게시글)
                currentPosts = samplePosts.filter(post => post.liked);
            }

            renderPosts();
        }

        // 스포츠 필터 설정
        function setSportFilter(sport) {
            currentSportFilter = sport;
            
            // 버튼 활성화 상태 업데이트
            document.querySelectorAll('.sport-filter').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // 필터 적용
            if (sport === 'all') {
                currentPosts = [...samplePosts];
            } else {
                currentPosts = samplePosts.filter(post => post.sport === sport);
            }

            // 현재 정렬 다시 적용
            setSort(currentSort);
        }

        // 더 보기 버튼
        document.getElementById('loadMoreBtn').addEventListener('click', function() {
            alert('더 많은 게시글을 불러오는 기능입니다. 실제로는 서버에서 추가 데이터를 가져옵니다.');
        });

        // 전역 변수 추가
        let selectedBoard = '';
        let currentPostId = null;
        let postComments = {};

        // 샘플 댓글 데이터
        const sampleComments = {
            1: [
                {
                    id: 1,
                    author: "축구팬123",
                    content: "정말 대박이었죠! 저도 봤는데 마지막 골은 정말 예술이었어요",
                    time: "1분 전",
                    likes: 5,
                    liked: false,
                    replies: [
                        {
                            id: 11,
                            author: "축구매니아",
                            content: "맞아요! 그 순간 소름돋았어요!",
                            time: "방금 전",
                            likes: 2,
                            liked: true
                        }
                    ]
                },
                {
                    id: 2,
                    author: "스포츠러버",
                    content: "다음 경기도 기대되네요!",
                    time: "5분 전",
                    likes: 3,
                    liked: true,
                    replies: []
                }
            ],
            2: [
                {
                    id: 3,
                    author: "농구초보",
                    content: "어떤 브랜드 신발인가요? 저도 사고 싶어요!",
                    time: "10분 전",
                    likes: 8,
                    liked: false,
                    replies: []
                }
            ]
        };

        // 페이지 전환 함수 수정
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }

        // 글쓰기 버튼
        document.querySelector('.floating-btn').addEventListener('click', function() {
            if (!currentUser) {
                alert('로그인이 필요합니다.');
                showModal();
                return;
            }
            showPage('writePage');
        });

        // 뒤로가기 버튼들
        document.getElementById('backToFeed').addEventListener('click', function() {
            showPage('feedPage');
        });

        document.getElementById('backToFeedFromDetail').addEventListener('click', function() {
            showPage('feedPage');
        });

        document.getElementById('backToFeedFromSearch').addEventListener('click', function() {
            showPage('feedPage');
        });

        // 검색 버튼
        document.getElementById('searchBtn').addEventListener('click', function() {
            showPage('searchPage');
            loadSearchHistory();
        });

        // 검색 입력 이벤트
        const searchInput = document.getElementById('searchInput');
        const clearSearchBtn = document.getElementById('clearSearch');

        searchInput.addEventListener('input', function() {
            const value = this.value.trim();
            if (value) {
                clearSearchBtn.classList.remove('hidden');
                performSearch(value);
            } else {
                clearSearchBtn.classList.add('hidden');
                hideSearchResults();
            }
        });

        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const value = this.value.trim();
                if (value) {
                    addToSearchHistory(value);
                    performSearch(value);
                }
            }
        });

        clearSearchBtn.addEventListener('click', function() {
            searchInput.value = '';
            this.classList.add('hidden');
            hideSearchResults();
        });

        // 검색 필터 버튼들
        document.querySelectorAll('.search-scope-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                setSearchFilter('scope', this.dataset.scope, '.search-scope-btn');
            });
        });

        document.querySelectorAll('.search-sport-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                setSearchFilter('sport', this.dataset.sport, '.search-sport-btn');
            });
        });

        document.querySelectorAll('.search-date-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                setSearchFilter('date', this.dataset.date, '.search-date-btn');
            });
        });

        document.querySelectorAll('.search-sort-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                setSearchFilter('sort', this.dataset.sort, '.search-sort-btn');
            });
        });

        // 검색 기록 삭제
        document.getElementById('clearHistory').addEventListener('click', function() {
            if (confirm('모든 검색 기록을 삭제하시겠습니까?')) {
                searchHistory = [];
                localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
                loadSearchHistory();
            }
        });

        // 검색 필터 설정
        function setSearchFilter(type, value, selector) {
            currentSearchFilters[type] = value;
            
            // 버튼 활성화 상태 업데이트
            document.querySelectorAll(selector).forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // 현재 검색어가 있으면 다시 검색
            const currentQuery = searchInput.value.trim();
            if (currentQuery) {
                performSearch(currentQuery);
            }
        }

        // 검색 수행
        function performSearch(query) {
            const results = searchContent(query);
            displaySearchResults(results, query);
        }

        // 검색 로직
        function searchContent(query) {
            const lowerQuery = query.toLowerCase();
            let results = [];

            // 게시글 검색
            if (currentSearchFilters.scope === 'all' || currentSearchFilters.scope === 'posts') {
                samplePosts.forEach(post => {
                    let score = 0;
                    let matchedFields = [];

                    // 제목 검색
                    if (post.title && post.title.toLowerCase().includes(lowerQuery)) {
                        score += 10;
                        matchedFields.push('title');
                    }

                    // 내용 검색
                    if (post.content.toLowerCase().includes(lowerQuery)) {
                        score += 5;
                        matchedFields.push('content');
                    }

                    // 작성자 검색
                    if (post.author.toLowerCase().includes(lowerQuery)) {
                        score += 8;
                        matchedFields.push('author');
                    }

                    // 태그 검색
                    post.tags.forEach(tag => {
                        if (tag.toLowerCase().includes(lowerQuery)) {
                            score += 7;
                            matchedFields.push('tags');
                        }
                    });

                    // 종목 필터 적용
                    if (currentSearchFilters.sport !== 'all' && post.sport !== currentSearchFilters.sport) {
                        score = 0;
                    }

                    if (score > 0) {
                        results.push({
                            type: 'post',
                            data: post,
                            score: score,
                            matchedFields: matchedFields
                        });
                    }
                });
            }

            // 댓글 검색
            if (currentSearchFilters.scope === 'all' || currentSearchFilters.scope === 'comments') {
                Object.keys(sampleComments).forEach(postId => {
                    const comments = sampleComments[postId];
                    comments.forEach(comment => {
                        let score = 0;
                        let matchedFields = [];

                        if (comment.content.toLowerCase().includes(lowerQuery)) {
                            score += 3;
                            matchedFields.push('content');
                        }

                        if (comment.author.toLowerCase().includes(lowerQuery)) {
                            score += 5;
                            matchedFields.push('author');
                        }

                        // 답글도 검색
                        comment.replies.forEach(reply => {
                            if (reply.content.toLowerCase().includes(lowerQuery)) {
                                score += 2;
                                matchedFields.push('reply');
                            }
                        });

                        if (score > 0) {
                            const relatedPost = samplePosts.find(p => p.id == postId);
                            results.push({
                                type: 'comment',
                                data: comment,
                                relatedPost: relatedPost,
                                score: score,
                                matchedFields: matchedFields
                            });
                        }
                    });
                });
            }

            // 유저 검색
            if (currentSearchFilters.scope === 'all' || currentSearchFilters.scope === 'users') {
                const uniqueUsers = [...new Set(samplePosts.map(p => p.author))];
                uniqueUsers.forEach(user => {
                    if (user.toLowerCase().includes(lowerQuery)) {
                        const userPosts = samplePosts.filter(p => p.author === user);
                        results.push({
                            type: 'user',
                            data: {
                                name: user,
                                postCount: userPosts.length,
                                totalLikes: userPosts.reduce((sum, p) => sum + p.likes, 0)
                            },
                            score: 6,
                            matchedFields: ['name']
                        });
                    }
                });
            }

            // 태그 검색
            if (currentSearchFilters.scope === 'all' || currentSearchFilters.scope === 'tags') {
                const allTags = [...new Set(samplePosts.flatMap(p => p.tags))];
                allTags.forEach(tag => {
                    if (tag.toLowerCase().includes(lowerQuery)) {
                        const tagPosts = samplePosts.filter(p => p.tags.includes(tag));
                        results.push({
                            type: 'tag',
                            data: {
                                name: tag,
                                postCount: tagPosts.length
                            },
                            score: 4,
                            matchedFields: ['name']
                        });
                    }
                });
            }

            // 정렬 적용
            if (currentSearchFilters.sort === 'relevance') {
                results.sort((a, b) => b.score - a.score);
            } else if (currentSearchFilters.sort === 'latest') {
                results.sort((a, b) => {
                    if (a.type === 'post' && b.type === 'post') {
                        return b.data.id - a.data.id;
                    }
                    return b.score - a.score;
                });
            } else if (currentSearchFilters.sort === 'popular') {
                results.sort((a, b) => {
                    if (a.type === 'post' && b.type === 'post') {
                        return b.data.likes - a.data.likes;
                    }
                    return b.score - a.score;
                });
            }

            return results;
        }

        // 검색 결과 표시
        function displaySearchResults(results, query) {
            const resultsContainer = document.getElementById('searchResultsContainer');
            const resultsSection = document.getElementById('searchResults');
            const resultCount = document.getElementById('searchResultCount');
            const popularSearches = document.getElementById('popularSearches');
            const searchHistory = document.getElementById('searchHistory');

            // 인기 검색어와 검색 기록 숨기기
            popularSearches.classList.add('hidden');
            searchHistory.classList.add('hidden');

            // 검색 결과 표시
            resultsSection.classList.remove('hidden');
            resultCount.textContent = `${results.length}개 결과`;

            if (results.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="text-center py-12">
                        <svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.5-.9-6.1-2.4"></path>
                        </svg>
                        <h3 class="text-lg font-medium text-gray-900 mb-2">검색 결과가 없습니다</h3>
                        <p class="text-gray-500">다른 키워드로 검색해보세요</p>
                    </div>
                `;
                return;
            }

            resultsContainer.innerHTML = results.map(result => {
                switch (result.type) {
                    case 'post':
                        return createPostSearchResult(result.data, query);
                    case 'comment':
                        return createCommentSearchResult(result.data, result.relatedPost, query);
                    case 'user':
                        return createUserSearchResult(result.data, query);
                    case 'tag':
                        return createTagSearchResult(result.data, query);
                    default:
                        return '';
                }
            }).join('');
        }

        // 게시글 검색 결과 생성
        function createPostSearchResult(post, query) {
            const highlightedContent = highlightText(post.content, query);
            const highlightedTitle = post.title ? highlightText(post.title, query) : '';
            
            return `
                <div class="search-result-item bg-white rounded-lg border border-gray-200 p-4 cursor-pointer" onclick="showPostDetail(${post.id})">
                    <div class="flex items-start space-x-3">
                        <div class="w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center">
                            <span class="text-white text-sm font-medium">${post.author[0]}</span>
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-1">
                                <span class="font-medium text-gray-900">${highlightText(post.author, query)}</span>
                                <span class="text-sm text-gray-500">•</span>
                                <span class="text-sm text-gray-500">${post.time}</span>
                                <span class="text-xs px-2 py-1 bg-indigo-100 text-indigo-700 rounded-full">${post.sport}</span>
                            </div>
                            ${highlightedTitle ? `<h4 class="font-semibold text-gray-900 mb-2">${highlightedTitle}</h4>` : ''}
                            <p class="text-gray-700 mb-2 line-clamp-2">${highlightedContent}</p>
                            <div class="flex items-center space-x-4 text-sm text-gray-500">
                                <span>좋아요 ${post.likes}</span>
                                <span>댓글 ${post.comments}</span>
                                <span class="text-xs bg-gray-100 px-2 py-1 rounded">게시글</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // 댓글 검색 결과 생성
        function createCommentSearchResult(comment, relatedPost, query) {
            const highlightedContent = highlightText(comment.content, query);
            
            return `
                <div class="search-result-item bg-white rounded-lg border border-gray-200 p-4 cursor-pointer" onclick="showPostDetail(${relatedPost.id})">
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center">
                            <span class="text-white text-sm">${comment.author[0]}</span>
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-1">
                                <span class="font-medium text-gray-900">${highlightText(comment.author, query)}</span>
                                <span class="text-sm text-gray-500">•</span>
                                <span class="text-sm text-gray-500">${comment.time}</span>
                                <span class="text-xs bg-green-100 px-2 py-1 rounded">댓글</span>
                            </div>
                            <p class="text-gray-700 mb-2">${highlightedContent}</p>
                            <div class="text-sm text-gray-500">
                                <span class="font-medium">${relatedPost.author}</span>의 게시글에서
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // 유저 검색 결과 생성
        function createUserSearchResult(user, query) {
            return `
                <div class="search-result-item bg-white rounded-lg border border-gray-200 p-4">
                    <div class="flex items-center space-x-3">
                        <div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center">
                            <span class="text-white font-medium">${user.name[0]}</span>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-gray-900">${highlightText(user.name, query)}</h4>
                            <div class="flex items-center space-x-4 text-sm text-gray-500 mt-1">
                                <span>게시글 ${user.postCount}개</span>
                                <span>총 좋아요 ${user.totalLikes}개</span>
                                <span class="text-xs bg-purple-100 px-2 py-1 rounded">유저</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // 태그 검색 결과 생성
        function createTagSearchResult(tag, query) {
            return `
                <div class="search-result-item bg-white rounded-lg border border-gray-200 p-4 cursor-pointer" onclick="searchKeyword('${tag.name}')">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full flex items-center justify-center">
                            <span class="text-white font-bold">#</span>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-gray-900">#${highlightText(tag.name, query)}</h4>
                            <div class="flex items-center space-x-4 text-sm text-gray-500 mt-1">
                                <span>게시글 ${tag.postCount}개</span>
                                <span class="text-xs bg-yellow-100 px-2 py-1 rounded">태그</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // 텍스트 하이라이트
        function highlightText(text, query) {
            if (!query) return text;
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<span class="search-highlight">$1</span>');
        }

        // 검색 결과 숨기기
        function hideSearchResults() {
            document.getElementById('searchResults').classList.add('hidden');
            document.getElementById('popularSearches').classList.remove('hidden');
            document.getElementById('searchHistory').classList.remove('hidden');
        }

        // 인기 검색어 클릭
        function searchKeyword(keyword) {
            searchInput.value = keyword;
            clearSearchBtn.classList.remove('hidden');
            addToSearchHistory(keyword);
            performSearch(keyword);
        }

        // 검색 기록 추가
        function addToSearchHistory(query) {
            // 중복 제거
            searchHistory = searchHistory.filter(item => item !== query);
            // 맨 앞에 추가
            searchHistory.unshift(query);
            // 최대 10개까지만 저장
            if (searchHistory.length > 10) {
                searchHistory = searchHistory.slice(0, 10);
            }
            // 로컬 스토리지에 저장
            localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
            loadSearchHistory();
        }

        // 검색 기록 로드
        function loadSearchHistory() {
            const saved = localStorage.getItem('searchHistory');
            if (saved) {
                searchHistory = JSON.parse(saved);
            }

            const container = document.getElementById('searchHistoryContainer');
            if (searchHistory.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-4">검색 기록이 없습니다</p>';
                return;
            }

            container.innerHTML = searchHistory.map(query => `
                <div class="history-item flex items-center justify-between p-3 rounded-lg border border-gray-200">
                    <button class="flex-1 text-left text-gray-700 hover:text-indigo-600" onclick="searchKeyword('${query}')">${query}</button>
                    <button class="text-gray-400 hover:text-red-500 ml-2" onclick="removeFromHistory('${query}')">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            `).join('');
        }

        // 검색 기록에서 제거
        function removeFromHistory(query) {
            searchHistory = searchHistory.filter(item => item !== query);
            localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
            loadSearchHistory();
        }

        // 게시판 선택 기능
        document.querySelectorAll('.board-select').forEach(button => {
            button.addEventListener('click', function() {
                // 이전 선택 해제
                document.querySelectorAll('.board-select').forEach(btn => {
                    btn.classList.remove('selected');
                });
                
                // 현재 선택
                this.classList.add('selected');
                selectedBoard = this.dataset.board;
            });
        });

        // 이미지 업로드 기능
        document.getElementById('imageUpload').addEventListener('click', function() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    if (file.size > 10 * 1024 * 1024) {
                        alert('파일 크기는 10MB 이하여야 합니다.');
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('previewImg').src = e.target.result;
                        document.getElementById('imagePreview').classList.remove('hidden');
                    };
                    reader.readAsDataURL(file);
                }
            };
            input.click();
        });

        // 이미지 제거 기능
        document.getElementById('removeImage').addEventListener('click', function() {
            document.getElementById('imagePreview').classList.add('hidden');
            document.getElementById('previewImg').src = '';
        });

        // 게시글 발행 기능
        document.getElementById('publishBtn').addEventListener('click', function() {
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            const tags = document.getElementById('postTags').value;
            const imagePreview = document.getElementById('imagePreview');
            const hasImage = !imagePreview.classList.contains('hidden');

            if (!selectedBoard) {
                alert('게시판을 선택해주세요.');
                return;
            }

            if (!title.trim()) {
                alert('제목을 입력해주세요.');
                return;
            }

            if (!content.trim()) {
                alert('내용을 입력해주세요.');
                return;
            }

            // 새 게시글 생성
            const newPost = {
                id: samplePosts.length + 1,
                author: currentUser.nickname,
                time: "방금 전",
                sport: selectedBoard,
                title: title,
                content: content,
                image: hasImage ? document.getElementById('previewImg').src : null,
                tags: tags ? tags.split(',').map(tag => tag.trim()) : [],
                likes: 0,
                comments: 0,
                liked: false
            };

            // 게시글 목록에 추가
            samplePosts.unshift(newPost);
            currentPosts = [...samplePosts];

            // 폼 초기화
            document.getElementById('postTitle').value = '';
            document.getElementById('postContent').value = '';
            document.getElementById('postTags').value = '';
            document.getElementById('imagePreview').classList.add('hidden');
            document.querySelectorAll('.board-select').forEach(btn => {
                btn.classList.remove('selected');
            });
            selectedBoard = '';

            alert('게시글이 성공적으로 발행되었습니다!');
            showPage('feedPage');
            renderPosts();
        });

        // 게시글 상세보기
        function showPostDetail(postId) {
            const post = samplePosts.find(p => p.id === postId);
            if (!post) return;

            currentPostId = postId;
            
            // 게시글 내용 렌더링
            const detailContent = document.getElementById('postDetailContent');
            detailContent.innerHTML = `
                <div class="flex items-start space-x-3 mb-4">
                    <div class="w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center">
                        <span class="text-white font-medium">${post.author[0]}</span>
                    </div>
                    <div class="flex-1">
                        <div class="flex items-center space-x-2">
                            <h3 class="font-medium text-gray-900">${post.author}</h3>
                            <span class="text-sm text-gray-500">•</span>
                            <span class="text-sm text-gray-500">${post.time}</span>
                        </div>
                        <div class="flex items-center space-x-2 mt-1">
                            <span class="text-xs px-2 py-1 bg-indigo-100 text-indigo-700 rounded-full">${post.sport}</span>
                        </div>
                    </div>
                </div>

                ${post.title ? `<h1 class="text-2xl font-bold text-gray-900 mb-4">${post.title}</h1>` : ''}

                <div class="mb-4">
                    <p class="text-gray-800 leading-relaxed whitespace-pre-wrap">${post.content}</p>
                </div>

                ${post.image ? `
                    <div class="mb-4">
                        <img src="${post.image}" alt="게시글 이미지" class="w-full rounded-lg">
                    </div>
                ` : ''}

                <div class="flex flex-wrap gap-2 mb-4">
                    ${post.tags.map(tag => `<span class="tag">#${tag}</span>`).join('')}
                </div>

                <div class="flex items-center justify-between pt-4 border-t border-gray-100">
                    <div class="flex items-center space-x-6">
                        <button class="like-btn flex items-center space-x-2 text-gray-600 hover:text-red-500 ${post.liked ? 'liked' : ''}" onclick="toggleLike(${post.id})">
                            <svg class="w-5 h-5" fill="${post.liked ? 'currentColor' : 'none'}" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                            </svg>
                            <span class="like-count">${post.likes}</span>
                        </button>
                        <div class="flex items-center space-x-2 text-gray-600">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                            </svg>
                            <span>${post.comments}</span>
                        </div>
                    </div>
                    <button class="text-gray-400 hover:text-gray-600" onclick="reportPost(${post.id})">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                        </svg>
                    </button>
                </div>
            `;

            // 댓글 렌더링
            renderComments(postId);
            
            showPage('postDetailPage');
        }

        // 댓글 렌더링
        function renderComments(postId) {
            const comments = sampleComments[postId] || [];
            const commentsList = document.getElementById('commentsList');
            const commentCount = document.getElementById('commentCount');
            
            // 댓글 수 계산 (대댓글 포함)
            let totalComments = 0;
            comments.forEach(comment => {
                totalComments += 1 + comment.replies.length;
            });
            
            commentCount.textContent = totalComments;

            if (comments.length === 0) {
                commentsList.innerHTML = '<p class="text-gray-500 text-center py-8">첫 번째 댓글을 작성해보세요!</p>';
                return;
            }

            commentsList.innerHTML = comments.map(comment => `
                <div class="comment-item p-4 rounded-lg">
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center">
                            <span class="text-white text-sm">${comment.author[0]}</span>
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-1">
                                <span class="font-medium text-gray-900">${comment.author}</span>
                                <span class="text-sm text-gray-500">${comment.time}</span>
                            </div>
                            <p class="text-gray-800 mb-2">${comment.content}</p>
                            <div class="flex items-center space-x-4 text-sm">
                                <button class="comment-like-btn text-gray-500 hover:text-red-500 ${comment.liked ? 'liked' : ''}" onclick="toggleCommentLike(${comment.id})">
                                    <span class="inline-flex items-center space-x-1">
                                        <svg class="w-4 h-4" fill="${comment.liked ? 'currentColor' : 'none'}" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                        </svg>
                                        <span>${comment.likes || 0}</span>
                                    </span>
                                </button>
                                <button class="text-gray-500 hover:text-indigo-600" onclick="replyToComment(${comment.id})">답글</button>
                                <button class="text-gray-500 hover:text-red-600" onclick="reportComment(${comment.id})">신고</button>
                            </div>
                        </div>
                    </div>
                    
                    ${comment.replies.length > 0 ? `
                        <div class="ml-11 mt-4 space-y-3">
                            ${comment.replies.map(reply => `
                                <div class="reply-item p-3 rounded-lg">
                                    <div class="flex items-start space-x-3">
                                        <div class="w-6 h-6 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full flex items-center justify-center">
                                            <span class="text-white text-xs">${reply.author[0]}</span>
                                        </div>
                                        <div class="flex-1">
                                            <div class="flex items-center space-x-2 mb-1">
                                                <span class="font-medium text-gray-900 text-sm">${reply.author}</span>
                                                <span class="text-xs text-gray-500">${reply.time}</span>
                                            </div>
                                            <p class="text-gray-800 text-sm">${reply.content}</p>
                                            <div class="flex items-center space-x-3 text-xs mt-1">
                                                <button class="comment-like-btn text-gray-500 hover:text-red-500 ${reply.liked ? 'liked' : ''}" onclick="toggleCommentLike(${reply.id})">
                                                    <span class="inline-flex items-center space-x-1">
                                                        <svg class="w-3 h-3" fill="${reply.liked ? 'currentColor' : 'none'}" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                                        </svg>
                                                        <span>${reply.likes || 0}</span>
                                                    </span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        // 댓글 작성
        document.getElementById('submitComment').addEventListener('click', function() {
            if (!currentUser) {
                alert('로그인이 필요합니다.');
                return;
            }

            const commentInput = document.getElementById('commentInput');
            const content = commentInput.value.trim();

            if (!content) {
                alert('댓글 내용을 입력해주세요.');
                return;
            }

            // 댓글 데이터 초기화
            if (!sampleComments[currentPostId]) {
                sampleComments[currentPostId] = [];
            }

            // 새 댓글 추가
            const newComment = {
                id: Date.now(),
                author: currentUser.nickname,
                content: content,
                time: "방금 전",
                replies: []
            };

            sampleComments[currentPostId].unshift(newComment);

            // 게시글의 댓글 수 증가
            const post = samplePosts.find(p => p.id === currentPostId);
            if (post) {
                post.comments++;
            }

            // 댓글 입력창 초기화
            commentInput.value = '';

            // 댓글 목록 다시 렌더링
            renderComments(currentPostId);
            
            // 피드의 게시글도 업데이트
            renderPosts();
        });

        // 답글 기능
        function replyToComment(commentId) {
            if (!currentUser) {
                alert('로그인이 필요합니다.');
                return;
            }
            
            const replyContent = prompt('답글을 입력하세요:');
            if (!replyContent || !replyContent.trim()) return;

            const comment = sampleComments[currentPostId].find(c => c.id === commentId);
            if (comment) {
                const newReply = {
                    id: Date.now(),
                    author: currentUser.nickname,
                    content: replyContent.trim(),
                    time: "방금 전"
                };

                comment.replies.push(newReply);

                // 게시글의 댓글 수 증가
                const post = samplePosts.find(p => p.id === currentPostId);
                if (post) {
                    post.comments++;
                }

                renderComments(currentPostId);
                renderPosts();
            }
        }

        // 댓글 좋아요 토글
        function toggleCommentLike(commentId) {
            if (!currentUser) {
                alert('로그인이 필요합니다.');
                showModal();
                return;
            }

            // 현재 게시글의 댓글에서 찾기
            const comments = sampleComments[currentPostId];
            if (!comments) return;

            let comment = comments.find(c => c.id === commentId);
            if (!comment) {
                // 답글에서 찾기
                for (let c of comments) {
                    const reply = c.replies.find(r => r.id === commentId);
                    if (reply) {
                        comment = reply;
                        break;
                    }
                }
            }

            if (comment) {
                comment.liked = !comment.liked;
                comment.likes = (comment.likes || 0) + (comment.liked ? 1 : -1);
                
                // 댓글 목록 다시 렌더링
                renderComments(currentPostId);
            }
        }

        // 신고 기능
        function reportPost(postId) {
            if (confirm('이 게시글을 신고하시겠습니까?')) {
                alert('신고가 접수되었습니다. 검토 후 조치하겠습니다.');
            }
        }

        function reportComment(commentId) {
            if (confirm('이 댓글을 신고하시겠습니까?')) {
                alert('신고가 접수되었습니다. 검토 후 조치하겠습니다.');
            }
        }

        // 댓글 보기 함수 제거 (showPostDetail로 대체)
        function showComments(postId) {
            showPostDetail(postId);
        }

        // 알림 시스템 함수들
        function initializeNotifications() {
            notifications = [...sampleNotifications];
            updateNotificationBadge();
            loadNotificationSettings();
        }

        function updateNotificationBadge() {
            const badge = document.getElementById('notificationBadge');
            const unreadCount = notifications.filter(n => !n.read).length;
            
            if (unreadCount > 0) {
                badge.textContent = unreadCount > 99 ? '99+' : unreadCount;
                badge.classList.remove('hidden');
                badge.classList.add('notification-badge-pulse');
            } else {
                badge.classList.add('hidden');
                badge.classList.remove('notification-badge-pulse');
            }
        }

        function renderNotifications() {
            const notificationList = document.getElementById('notificationList');
            
            if (notifications.length === 0) {
                notificationList.innerHTML = `
                    <div class="p-8 text-center">
                        <svg class="w-12 h-12 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                        </svg>
                        <p class="text-gray-500">알림이 없습니다</p>
                    </div>
                `;
                return;
            }

            notificationList.innerHTML = notifications.map(notification => {
                const iconMap = {
                    like: '❤️',
                    comment: '💬',
                    follow_post: '📝',
                    hot_issue: '🔥',
                    mention: '👤',
                    new_follower: '👥'
                };

                const colorMap = {
                    like: 'text-red-500',
                    comment: 'text-blue-500',
                    follow_post: 'text-green-500',
                    hot_issue: 'text-orange-500',
                    mention: 'text-purple-500',
                    new_follower: 'text-indigo-500'
                };

                return `
                    <div class="notification-item p-4 cursor-pointer ${!notification.read ? 'unread' : ''}" onclick="handleNotificationClick(${notification.id})">
                        <div class="flex items-start space-x-3">
                            <div class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center">
                                <span class="text-lg">${iconMap[notification.type] || '📢'}</span>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between">
                                    <p class="text-sm font-medium text-gray-900 truncate">${notification.title}</p>
                                    <span class="text-xs text-gray-500">${notification.time}</span>
                                </div>
                                <p class="text-sm text-gray-600 mt-1 line-clamp-2">${notification.message}</p>
                                ${!notification.read ? '<div class="w-2 h-2 bg-indigo-600 rounded-full mt-2"></div>' : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function handleNotificationClick(notificationId) {
            const notification = notifications.find(n => n.id === notificationId);
            if (!notification) return;

            // 읽음 처리
            notification.read = true;
            updateNotificationBadge();
            renderNotifications();

            // 알림 드롭다운 닫기
            document.getElementById('notificationDropdown').classList.add('hidden');

            // 관련 페이지로 이동
            if (notification.postId) {
                showPostDetail(notification.postId);
            } else if (notification.type === 'new_follower') {
                // 팔로워 페이지로 이동 (구현되면)
                alert('팔로워 페이지로 이동합니다.');
            }
        }

        function markAllNotificationsRead() {
            notifications.forEach(n => n.read = true);
            updateNotificationBadge();
            renderNotifications();
        }

        function addNotification(type, message, postId = null, userId = null) {
            // 알림 설정 확인
            const settingKey = type.replace('_', '');
            if (!notificationSettings[settingKey]) return;

            // 방해 금지 모드 확인
            if (notificationSettings.doNotDisturb) {
                const now = new Date();
                const hour = now.getHours();
                if (hour >= 22 || hour < 8) return;
            }

            const newNotification = {
                id: Date.now(),
                type: type,
                title: getNotificationTitle(type),
                message: message,
                time: '방금 전',
                read: false,
                postId: postId,
                userId: userId
            };

            notifications.unshift(newNotification);
            updateNotificationBadge();
            
            // 토스트 알림 표시
            showNotificationToast(newNotification);
        }

        function getNotificationTitle(type) {
            const titleMap = {
                like: '좋아요 알림',
                comment: '댓글 알림',
                follow_post: '새 게시글',
                hot_issue: '핫이슈 알림',
                mention: '멘션 알림',
                new_follower: '새 팔로워'
            };
            return titleMap[type] || '알림';
        }

        function showNotificationToast(notification) {
            // 토스트 알림 생성
            const toast = document.createElement('div');
            toast.className = 'notification-toast bg-white rounded-lg shadow-lg border border-gray-200 p-4 max-w-sm';
            toast.innerHTML = `
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center">
                        <svg class="w-4 h-4 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                        </svg>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-medium text-gray-900">${notification.title}</p>
                        <p class="text-sm text-gray-600 mt-1">${notification.message}</p>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            `;

            document.body.appendChild(toast);
            
            // 애니메이션으로 표시
            setTimeout(() => toast.classList.add('show'), 100);
            
            // 5초 후 자동 제거
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 5000);
        }

        function loadNotificationSettings() {
            const saved = localStorage.getItem('notificationSettings');
            if (saved) {
                notificationSettings = { ...notificationSettings, ...JSON.parse(saved) };
            }
            
            // UI에 설정 반영
            document.getElementById('commentNotification').checked = notificationSettings.comment;
            document.getElementById('likeNotification').checked = notificationSettings.like;
            document.getElementById('mentionNotification').checked = notificationSettings.mention;
            document.getElementById('followPostNotification').checked = notificationSettings.followPost;
            document.getElementById('newFollowerNotification').checked = notificationSettings.newFollower;
            document.getElementById('hotIssueNotification').checked = notificationSettings.hotIssue;
            document.getElementById('matchResultNotification').checked = notificationSettings.matchResult;
            document.getElementById('doNotDisturbMode').checked = notificationSettings.doNotDisturb;
        }

        function saveNotificationSettings() {
            notificationSettings = {
                comment: document.getElementById('commentNotification').checked,
                like: document.getElementById('likeNotification').checked,
                mention: document.getElementById('mentionNotification').checked,
                followPost: document.getElementById('followPostNotification').checked,
                newFollower: document.getElementById('newFollowerNotification').checked,
                hotIssue: document.getElementById('hotIssueNotification').checked,
                matchResult: document.getElementById('matchResultNotification').checked,
                doNotDisturb: document.getElementById('doNotDisturbMode').checked
            };
            
            localStorage.setItem('notificationSettings', JSON.stringify(notificationSettings));
            document.getElementById('notificationSettingsModal').classList.add('hidden');
            alert('알림 설정이 저장되었습니다.');
        }

        // 알림 관련 이벤트 리스너
        document.getElementById('notificationBtn').addEventListener('click', function() {
            const dropdown = document.getElementById('notificationDropdown');
            dropdown.classList.toggle('hidden');
            if (!dropdown.classList.contains('hidden')) {
                renderNotifications();
            }
        });

        document.getElementById('markAllRead').addEventListener('click', function() {
            markAllNotificationsRead();
        });

        document.getElementById('notificationSettings').addEventListener('click', function() {
            document.getElementById('notificationDropdown').classList.add('hidden');
            document.getElementById('notificationSettingsModal').classList.remove('hidden');
        });

        document.getElementById('closeNotificationSettings').addEventListener('click', function() {
            document.getElementById('notificationSettingsModal').classList.add('hidden');
        });

        document.getElementById('cancelNotificationSettings').addEventListener('click', function() {
            document.getElementById('notificationSettingsModal').classList.add('hidden');
            loadNotificationSettings(); // 원래 설정으로 되돌리기
        });

        document.getElementById('saveNotificationSettings').addEventListener('click', function() {
            saveNotificationSettings();
        });

        // 알림 드롭다운 외부 클릭시 닫기
        document.addEventListener('click', function(e) {
            const dropdown = document.getElementById('notificationDropdown');
            const button = document.getElementById('notificationBtn');
            
            if (!dropdown.contains(e.target) && !button.contains(e.target)) {
                dropdown.classList.add('hidden');
            }
        });

        // 좋아요 토글 함수 수정 (알림 추가)
        function toggleLike(postId) {
            const post = currentPosts.find(p => p.id === postId);
            if (post) {
                const wasLiked = post.liked;
                post.liked = !post.liked;
                post.likes += post.liked ? 1 : -1;
                
                // 좋아요 알림 추가 (다른 사용자의 게시글에 좋아요를 눌렀을 때)
                if (post.liked && currentUser && post.author !== currentUser.nickname) {
                    addNotification('like', `${currentUser.nickname}님이 회원님의 게시글을 좋아합니다.`, postId);
                }
                
                renderPosts();
            }
        }

        // 댓글 작성 함수 수정 (알림 추가)
        document.getElementById('submitComment').addEventListener('click', function() {
            if (!currentUser) {
                alert('로그인이 필요합니다.');
                return;
            }

            const commentInput = document.getElementById('commentInput');
            const content = commentInput.value.trim();

            if (!content) {
                alert('댓글 내용을 입력해주세요.');
                return;
            }

            // 댓글 데이터 초기화
            if (!sampleComments[currentPostId]) {
                sampleComments[currentPostId] = [];
            }

            // 새 댓글 추가
            const newComment = {
                id: Date.now(),
                author: currentUser.nickname,
                content: content,
                time: "방금 전",
                replies: []
            };

            sampleComments[currentPostId].unshift(newComment);

            // 게시글의 댓글 수 증가
            const post = samplePosts.find(p => p.id === currentPostId);
            if (post) {
                post.comments++;
                
                // 댓글 알림 추가 (다른 사용자의 게시글에 댓글을 달았을 때)
                if (post.author !== currentUser.nickname) {
                    addNotification('comment', `${currentUser.nickname}님이 회원님의 게시글에 댓글을 남겼습니다: "${content.substring(0, 30)}${content.length > 30 ? '...' : ''}"`, currentPostId);
                }
            }

            // 댓글 입력창 초기화
            commentInput.value = '';

            // 댓글 목록 다시 렌더링
            renderComments(currentPostId);
            
            // 피드의 게시글도 업데이트
            renderPosts();
        });

        // 게시글 발행 함수 수정 (팔로우 알림 추가)
        document.getElementById('publishBtn').addEventListener('click', function() {
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            const tags = document.getElementById('postTags').value;
            const imagePreview = document.getElementById('imagePreview');
            const hasImage = !imagePreview.classList.contains('hidden');

            if (!selectedBoard) {
                alert('게시판을 선택해주세요.');
                return;
            }

            if (!title.trim()) {
                alert('제목을 입력해주세요.');
                return;
            }

            if (!content.trim()) {
                alert('내용을 입력해주세요.');
                return;
            }

            // 새 게시글 생성
            const newPost = {
                id: samplePosts.length + 1,
                author: currentUser.nickname,
                time: "방금 전",
                sport: selectedBoard,
                title: title,
                content: content,
                image: hasImage ? document.getElementById('previewImg').src : null,
                tags: tags ? tags.split(',').map(tag => tag.trim()) : [],
                likes: 0,
                comments: 0,
                liked: false
            };

            // 게시글 목록에 추가
            samplePosts.unshift(newPost);
            currentPosts = [...samplePosts];

            // 팔로우 알림 추가 (팔로워들에게)
            addNotification('follow_post', `${currentUser.nickname}님이 새 게시글을 올렸습니다: "${title}"`, newPost.id);

            // 관심 종목 핫이슈 알림 (좋아요가 많이 받으면)
            setTimeout(() => {
                if (newPost.likes > 50) {
                    addNotification('hot_issue', `${selectedBoard} 관련 게시글이 인기를 끌고 있습니다!`, newPost.id);
                }
            }, 30000); // 30초 후 체크

            // 폼 초기화
            document.getElementById('postTitle').value = '';
            document.getElementById('postContent').value = '';
            document.getElementById('postTags').value = '';
            document.getElementById('imagePreview').classList.add('hidden');
            document.querySelectorAll('.board-select').forEach(btn => {
                btn.classList.remove('selected');
            });
            selectedBoard = '';

            alert('게시글이 성공적으로 발행되었습니다!');
            showPage('feedPage');
            renderPosts();
        });

        // 북마크 토글 함수
        function toggleBookmark(postId) {
            if (!currentUser) {
                alert('로그인이 필요합니다.');
                showModal();
                return;
            }

            const post = currentPosts.find(p => p.id === postId);
            if (post) {
                post.bookmarked = !post.bookmarked;
                
                if (post.bookmarked) {
                    bookmarkedPosts.push(postId);
                    showNotificationToast({
                        title: '북마크 추가',
                        message: '게시글이 보관함에 저장되었습니다.'
                    });
                } else {
                    bookmarkedPosts = bookmarkedPosts.filter(id => id !== postId);
                    showNotificationToast({
                        title: '북마크 제거',
                        message: '게시글이 보관함에서 제거되었습니다.'
                    });
                }
                
                localStorage.setItem('bookmarkedPosts', JSON.stringify(bookmarkedPosts));
                renderPosts();
            }
        }

        // 팔로우 토글 함수
        function toggleFollow(username) {
            if (!currentUser) {
                alert('로그인이 필요합니다.');
                showModal();
                return;
            }

            const isFollowing = followingUsers.includes(username);
            
            if (isFollowing) {
                followingUsers = followingUsers.filter(user => user !== username);
                showNotificationToast({
                    title: '팔로우 취소',
                    message: `${username}님 팔로우를 취소했습니다.`
                });
            } else {
                followingUsers.push(username);
                showNotificationToast({
                    title: '팔로우 시작',
                    message: `${username}님을 팔로우하기 시작했습니다.`
                });
                
                // 새 팔로워 알림 추가
                addNotification('new_follower', `${currentUser.nickname}님이 회원님을 팔로우하기 시작했습니다.`, null, currentUser.nickname);
            }
            
            localStorage.setItem('followingUsers', JSON.stringify(followingUsers));
            renderPosts();
        }

        // 유저 프로필 보기
        function showUserProfile(username) {
            const profile = sampleUserProfiles[username];
            if (!profile) {
                alert('사용자 정보를 찾을 수 없습니다.');
                return;
            }

            const isFollowing = followingUsers.includes(username);
            const userPosts = samplePosts.filter(post => post.author === username);
            
            const profileContent = document.getElementById('profileContent');
            profileContent.innerHTML = `
                <!-- 프로필 헤더 -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6">
                    <div class="flex items-start space-x-4">
                        <div class="w-20 h-20 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center">
                            <span class="text-white text-2xl font-bold">${username[0]}</span>
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-2">
                                <h1 class="text-2xl font-bold text-gray-900">${profile.nickname}</h1>
                                ${currentUser && username !== currentUser.nickname ? `
                                    <button class="follow-btn px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 transition-all duration-200 ${isFollowing ? 'following' : ''}" onclick="toggleFollow('${username}')">
                                        ${isFollowing ? '팔로잉' : '팔로우'}
                                    </button>
                                ` : ''}
                            </div>
                            <p class="text-gray-600 mb-4">${profile.bio}</p>
                            <div class="flex items-center space-x-6 text-sm">
                                <div class="text-center">
                                    <div class="font-bold text-gray-900">${profile.posts}</div>
                                    <div class="text-gray-500">게시글</div>
                                </div>
                                <div class="text-center">
                                    <div class="font-bold text-gray-900">${profile.followers.toLocaleString()}</div>
                                    <div class="text-gray-500">팔로워</div>
                                </div>
                                <div class="text-center">
                                    <div class="font-bold text-gray-900">${profile.following}</div>
                                    <div class="text-gray-500">팔로잉</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 관심사 태그 -->
                    <div class="mt-4 pt-4 border-t border-gray-100">
                        <h3 class="text-sm font-medium text-gray-700 mb-2">관심사</h3>
                        <div class="flex flex-wrap gap-2">
                            ${profile.interests.map(interest => `
                                <span class="px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm">${interest}</span>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="mt-4 text-sm text-gray-500">
                        ${profile.joinDate} 가입
                    </div>
                </div>

                <!-- 사용자 게시글 -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4">${username}님의 게시글 (${userPosts.length}개)</h2>
                    
                    ${userPosts.length === 0 ? `
                        <div class="text-center py-8">
                            <svg class="w-12 h-12 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.5-.9-6.1-2.4"></path>
                            </svg>
                            <p class="text-gray-500">아직 작성한 게시글이 없습니다</p>
                        </div>
                    ` : `
                        <div class="space-y-4">
                            ${userPosts.map(post => `
                                <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer transition-colors" onclick="showPostDetail(${post.id})">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <span class="text-xs px-2 py-1 bg-indigo-100 text-indigo-700 rounded-full">${post.sport}</span>
                                        <span class="text-sm text-gray-500">${post.time}</span>
                                    </div>
                                    <h3 class="font-medium text-gray-900 mb-2">${post.title || post.content.substring(0, 50) + '...'}</h3>
                                    <div class="flex items-center space-x-4 text-sm text-gray-500">
                                        <span>❤️ ${post.likes}</span>
                                        <span>💬 ${post.comments}</span>
                                        ${post.tags.length > 0 ? `<span>#${post.tags[0]}</span>` : ''}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `}
                </div>
            `;
            
            showPage('profilePage');
        }

        // 북마크 페이지 렌더링
        function renderBookmarks(filter = 'all') {
            const bookmarkedPostsData = samplePosts.filter(post => bookmarkedPosts.includes(post.id));
            let filteredPosts = bookmarkedPostsData;
            
            if (filter !== 'all') {
                filteredPosts = bookmarkedPostsData.filter(post => post.sport === filter);
            }
            
            const container = document.getElementById('bookmarkContainer');
            const emptyState = document.getElementById('emptyBookmarks');
            const countElement = document.getElementById('bookmarkCount');
            
            countElement.textContent = `${bookmarkedPostsData.length}개 저장됨`;
            
            if (filteredPosts.length === 0) {
                container.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            container.innerHTML = filteredPosts.map(post => createPostElement(post)).map(element => element.outerHTML).join('');
        }

        // 북마크 필터 설정
        function setBookmarkFilter(filter) {
            // 버튼 활성화 상태 업데이트
            document.querySelectorAll('.bookmark-filter').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            renderBookmarks(filter);
        }

        // 뒤로가기 버튼들 추가
        document.getElementById('backToFeedFromBookmark').addEventListener('click', function() {
            showPage('feedPage');
        });

        document.getElementById('backToFeedFromProfile').addEventListener('click', function() {
            showPage('feedPage');
        });

        // 북마크 버튼 이벤트
        document.getElementById('bookmarkBtn').addEventListener('click', function() {
            if (!currentUser) {
                alert('로그인이 필요합니다.');
                showModal();
                return;
            }
            showPage('bookmarkPage');
            renderBookmarks();
        });

        // 로컬 스토리지에서 데이터 로드
        function loadUserData() {
            const savedBookmarks = localStorage.getItem('bookmarkedPosts');
            if (savedBookmarks) {
                bookmarkedPosts = JSON.parse(savedBookmarks);
                // 게시글 북마크 상태 업데이트
                samplePosts.forEach(post => {
                    post.bookmarked = bookmarkedPosts.includes(post.id);
                });
            }
            
            const savedFollowing = localStorage.getItem('followingUsers');
            if (savedFollowing) {
                followingUsers = JSON.parse(savedFollowing);
            }
        }

        // 모바일 네비게이션 이벤트 리스너
        function initializeMobileNavigation() {
            // 모바일 메뉴 버튼
            document.getElementById('mobileMenuBtn').addEventListener('click', function() {
                document.getElementById('mobileSideMenu').classList.add('open');
                document.getElementById('mobileMenuOverlay').classList.add('show');
            });

            // 모바일 메뉴 닫기
            document.getElementById('closeMobileMenu').addEventListener('click', function() {
                document.getElementById('mobileSideMenu').classList.remove('open');
                document.getElementById('mobileMenuOverlay').classList.remove('show');
            });

            // 오버레이 클릭시 메뉴 닫기
            document.getElementById('mobileMenuOverlay').addEventListener('click', function() {
                document.getElementById('mobileSideMenu').classList.remove('open');
                this.classList.remove('show');
            });

            // 모바일 사이드 메뉴 네비게이션
            document.getElementById('mobileHomeBtn').addEventListener('click', function() {
                showPage('feedPage');
                closeMobileMenu();
                setActiveBottomNav('home');
            });

            document.getElementById('mobileSearchBtn').addEventListener('click', function() {
                showPage('searchPage');
                loadSearchHistory();
                closeMobileMenu();
                setActiveBottomNav('search');
            });

            document.getElementById('mobileBookmarkBtn').addEventListener('click', function() {
                if (!currentUser) {
                    alert('로그인이 필요합니다.');
                    showModal();
                    return;
                }
                showPage('bookmarkPage');
                renderBookmarks();
                closeMobileMenu();
                setActiveBottomNav('bookmark');
            });

            document.getElementById('mobileWriteBtn').addEventListener('click', function() {
                if (!currentUser) {
                    alert('로그인이 필요합니다.');
                    showModal();
                    return;
                }
                showPage('writePage');
                closeMobileMenu();
                setActiveBottomNav('write');
            });

            // 모바일 로그인/회원가입 버튼
            document.getElementById('mobileLoginBtn').addEventListener('click', function() {
                showModal();
                loginTab.click();
            });

            document.getElementById('mobileLoginFullBtn').addEventListener('click', function() {
                showModal();
                loginTab.click();
                closeMobileMenu();
            });

            document.getElementById('mobileSignupBtn').addEventListener('click', function() {
                showModal();
                signupTab.click();
                closeMobileMenu();
            });

            document.getElementById('mobileLogoutBtn').addEventListener('click', function() {
                currentUser = null;
                selectedSports = [];
                updateMobileUserUI();
                closeMobileMenu();
            });

            // 모바일 알림 버튼
            document.getElementById('mobileNotificationBtn').addEventListener('click', function() {
                document.getElementById('notificationBtn').click();
            });

            // 하단 탭바 네비게이션
            document.getElementById('bottomNavHome').addEventListener('click', function() {
                showPage('feedPage');
                setActiveBottomNav('home');
            });

            document.getElementById('bottomNavSearch').addEventListener('click', function() {
                showPage('searchPage');
                loadSearchHistory();
                setActiveBottomNav('search');
            });

            document.getElementById('bottomNavWrite').addEventListener('click', function() {
                if (!currentUser) {
                    alert('로그인이 필요합니다.');
                    showModal();
                    return;
                }
                showPage('writePage');
                setActiveBottomNav('write');
            });

            document.getElementById('bottomNavBookmark').addEventListener('click', function() {
                if (!currentUser) {
                    alert('로그인이 필요합니다.');
                    showModal();
                    return;
                }
                showPage('bookmarkPage');
                renderBookmarks();
                setActiveBottomNav('bookmark');
            });

            document.getElementById('bottomNavProfile').addEventListener('click', function() {
                if (!currentUser) {
                    alert('로그인이 필요합니다.');
                    showModal();
                    return;
                }
                // 현재 사용자 프로필 보기
                showUserProfile(currentUser.nickname);
                setActiveBottomNav('profile');
            });

            // 플로팅 버튼
            document.getElementById('floatingWriteBtn').addEventListener('click', function() {
                if (!currentUser) {
                    alert('로그인이 필요합니다.');
                    showModal();
                    return;
                }
                showPage('writePage');
                setActiveBottomNav('write');
            });

            // 모바일 빠른 검색
            document.getElementById('mobileQuickSearch').addEventListener('focus', function() {
                showPage('searchPage');
                loadSearchHistory();
                setActiveBottomNav('search');
                // 검색 페이지의 검색 입력창에 포커스
                setTimeout(() => {
                    document.getElementById('searchInput').focus();
                }, 100);
            });

            // 키보드 대응
            let initialViewportHeight = window.innerHeight;
            window.addEventListener('resize', function() {
                // 모바일에서 키보드가 올라왔을 때 처리
                if (window.innerHeight < initialViewportHeight * 0.75) {
                    document.body.classList.add('keyboard-adjust');
                } else {
                    document.body.classList.remove('keyboard-adjust');
                }
            });

            // 터치 이벤트 최적화
            let touchStartY = 0;
            let touchEndY = 0;

            document.addEventListener('touchstart', function(e) {
                touchStartY = e.changedTouches[0].screenY;
            });

            document.addEventListener('touchend', function(e) {
                touchEndY = e.changedTouches[0].screenY;
                handleSwipeGesture();
            });

            function handleSwipeGesture() {
                const swipeThreshold = 50;
                const diff = touchStartY - touchEndY;

                // 위로 스와이프 (새로고침)
                if (diff > swipeThreshold && window.scrollY === 0) {
                    // 새로고침 로직 (필요시 구현)
                }
            }
        }

        // 모바일 메뉴 닫기 헬퍼 함수
        function closeMobileMenu() {
            document.getElementById('mobileSideMenu').classList.remove('open');
            document.getElementById('mobileMenuOverlay').classList.remove('show');
        }

        // 하단 탭바 활성화 상태 설정
        function setActiveBottomNav(activeTab) {
            document.querySelectorAll('.mobile-bottom-nav-item').forEach(item => {
                item.classList.remove('active');
            });

            const tabMap = {
                'home': 'bottomNavHome',
                'search': 'bottomNavSearch',
                'write': 'bottomNavWrite',
                'bookmark': 'bottomNavBookmark',
                'profile': 'bottomNavProfile'
            };

            if (tabMap[activeTab]) {
                document.getElementById(tabMap[activeTab]).classList.add('active');
            }
        }

        // 모바일 사용자 UI 업데이트
        function updateMobileUserUI() {
            const mobileUserGreeting = document.getElementById('mobileUserGreeting');
            const mobileAuthSection = document.getElementById('mobileAuthSection');
            const mobileUserSection = document.getElementById('mobileUserSection');
            const mobileLoginBtn = document.getElementById('mobileLoginBtn');
            const mobileNotificationBadge = document.getElementById('mobileNotificationBadge');

            if (currentUser) {
                mobileUserGreeting.textContent = `${currentUser.nickname}님 환영합니다!`;
                mobileAuthSection.classList.add('hidden');
                mobileUserSection.classList.remove('hidden');
                mobileLoginBtn.classList.add('hidden');
                
                // 알림 배지 동기화
                const desktopBadge = document.getElementById('notificationBadge');
                if (!desktopBadge.classList.contains('hidden')) {
                    mobileNotificationBadge.textContent = desktopBadge.textContent;
                    mobileNotificationBadge.classList.remove('hidden');
                } else {
                    mobileNotificationBadge.classList.add('hidden');
                }
            } else {
                mobileUserGreeting.textContent = '로그인이 필요합니다';
                mobileAuthSection.classList.remove('hidden');
                mobileUserSection.classList.add('hidden');
                mobileLoginBtn.classList.remove('hidden');
                mobileNotificationBadge.classList.add('hidden');
            }
        }

        // 반응형 이미지 로딩
        function optimizeImagesForMobile() {
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                img.classList.add('responsive-image', 'no-drag');
                
                // 지연 로딩
                if ('loading' in HTMLImageElement.prototype) {
                    img.loading = 'lazy';
                }
            });
        }

        // 뷰포트 메타 태그 동적 설정
        function setViewportMeta() {
            let viewport = document.querySelector('meta[name=viewport]');
            if (!viewport) {
                viewport = document.createElement('meta');
                viewport.name = 'viewport';
                document.head.appendChild(viewport);
            }
            viewport.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover';
        }

        // 로그인 처리 함수 수정 (모바일 UI 업데이트 포함)
        const originalLoginHandler = document.getElementById('loginBtn').onclick;
        document.getElementById('loginBtn').addEventListener('click', function(e) {
            e.preventDefault();
            const phone = document.getElementById('loginPhone').value;
            const password = document.getElementById('loginPassword').value;

            if (!phone || !password) {
                alert('전화번호와 비밀번호를 입력해주세요.');
                return;
            }

            // 간단한 로그인 처리 (실제로는 서버 인증 필요)
            currentUser = {
                phone: phone,
                nickname: phone.substring(0, 3) + "****" + phone.substring(7)
            };

            // UI 상태 변경
            document.getElementById('userGreeting').textContent = `${currentUser.nickname}님 환영합니다!`;
            document.getElementById('userGreeting').classList.remove('hidden');
            document.getElementById('logoutBtn').classList.remove('hidden');
            document.getElementById('loginNavBtn').classList.add('hidden');
            document.getElementById('signupNavBtn').classList.add('hidden');
            
            // 모바일 UI 업데이트
            updateMobileUserUI();
            
            hideModal();
            initializeFeed();
        });

        // 회원가입 처리 함수 수정 (모바일 UI 업데이트 포함)
        document.getElementById('signupBtn').addEventListener('click', function(e) {
            e.preventDefault();
            
            const phone = document.getElementById('signupPhone').value;
            const password = document.getElementById('signupPassword').value;
            const passwordConfirm = document.getElementById('signupPasswordConfirm').value;
            const requiredCheckboxes = signupForm.querySelectorAll('input[type="checkbox"][required]');

            // 유효성 검사
            if (!phone || !password || !passwordConfirm) {
                alert('모든 필수 항목을 입력해주세요.');
                return;
            }

            if (password !== passwordConfirm) {
                alert('비밀번호가 일치하지 않습니다.');
                return;
            }

            let allChecked = true;
            requiredCheckboxes.forEach(checkbox => {
                if (!checkbox.checked) {
                    allChecked = false;
                }
            });

            if (!allChecked) {
                alert('필수 약관에 동의해주세요.');
                return;
            }

            // 회원가입 성공
            currentUser = {
                phone: phone,
                nickname: phone.substring(0, 3) + "****" + phone.substring(7),
                interests: [...selectedSports]
            };

            alert(`회원가입이 완료되었습니다! 선택한 스포츠: ${selectedSports.join(', ')}`);
            
            // UI 상태 변경
            document.getElementById('userGreeting').textContent = `${currentUser.nickname}님 환영합니다!`;
            document.getElementById('userGreeting').classList.remove('hidden');
            document.getElementById('logoutBtn').classList.remove('hidden');
            document.getElementById('loginNavBtn').classList.add('hidden');
            document.getElementById('signupNavBtn').classList.add('hidden');
            
            // 모바일 UI 업데이트
            updateMobileUserUI();
            
            hideModal();
            initializeFeed();
        });

        // 로그아웃 처리 함수 수정 (모바일 UI 업데이트 포함)
        document.getElementById('logoutBtn').addEventListener('click', function() {
            currentUser = null;
            selectedSports = [];
            
            // UI 상태 변경
            document.getElementById('userGreeting').classList.add('hidden');
            document.getElementById('logoutBtn').classList.add('hidden');
            document.getElementById('loginNavBtn').classList.remove('hidden');
            document.getElementById('signupNavBtn').classList.remove('hidden');
            
            // 모바일 UI 업데이트
            updateMobileUserUI();
            
            // 폼 초기화
            document.getElementById('loginPhone').value = '';
            document.getElementById('loginPassword').value = '';
            document.getElementById('signupPhone').value = '';
            document.getElementById('signupPassword').value = '';
            document.getElementById('signupPasswordConfirm').value = '';
            
            // 스포츠 선택 초기화
            document.querySelectorAll('.sport-tag').forEach(tag => {
                tag.classList.remove('selected');
            });
        });

        // 페이지 로드시 초기화
        document.addEventListener('DOMContentLoaded', function() {
            setViewportMeta();
            initializeMobileNavigation();
            updateMobileUserUI();
            optimizeImagesForMobile();
        });

        // 배너 관리 함수들
        function initializeBanner() {
            loadBannerSettings();
            updateBannerDisplay();
            setupBannerEventListeners();
        }

        function loadBannerSettings() {
            const saved = localStorage.getItem('bannerSettings');
            if (saved) {
                bannerSettings = { ...bannerSettings, ...JSON.parse(saved) };
            }
        }

        function saveBannerSettings() {
            localStorage.setItem('bannerSettings', JSON.stringify(bannerSettings));
        }

        function updateBannerDisplay() {
            const banner = document.getElementById('eventBanner');
            const editBtn = document.getElementById('editBannerBtn');
            
            // 배너 표시/숨김
            if (!bannerSettings.enabled || bannerSettings.dismissed) {
                banner.style.display = 'none';
                return;
            }
            
            banner.style.display = 'block';
            
            // 관리자 편집 버튼 표시
            if (isAdmin) {
                editBtn.classList.remove('hidden');
            }
            
            // 배너 내용 업데이트
            updateBannerContent();
        }

        function updateBannerContent() {
            const bannerContent = document.getElementById('bannerContent');
            const styleClasses = {
                'gradient-purple': 'bg-gradient-to-r from-purple-600 via-pink-600 to-red-600',
                'gradient-blue': 'bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600',
                'gradient-green': 'bg-gradient-to-r from-green-600 via-teal-600 to-blue-600',
                'gradient-orange': 'bg-gradient-to-r from-orange-600 via-red-600 to-pink-600',
                'solid-dark': 'bg-gray-900'
            };

            let backgroundStyle = '';
            if (bannerSettings.backgroundImage) {
                backgroundStyle = `background-image: url('${bannerSettings.backgroundImage}'); background-size: cover; background-position: center;`;
            }

            bannerContent.innerHTML = `
                <div class="${styleClasses[bannerSettings.style] || styleClasses['gradient-purple']} p-6 text-white" style="${backgroundStyle}">
                    <div class="flex items-center justify-between">
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="bg-white bg-opacity-20 px-2 py-1 rounded-full text-xs font-medium">🎉 특별 이벤트</span>
                                <span class="bg-yellow-400 text-yellow-900 px-2 py-1 rounded-full text-xs font-bold">HOT</span>
                            </div>
                            <h2 class="text-xl font-bold mb-2">${bannerSettings.title}</h2>
                            <p class="text-sm opacity-90 mb-3">${bannerSettings.description}</p>
                            <div class="flex items-center space-x-4 text-sm">
                                <span>📅 ${bannerSettings.period}</span>
                                <span>🎁 ${bannerSettings.reward}</span>
                            </div>
                        </div>
                        <div class="ml-4">
                            <div class="w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                <span class="text-2xl">${bannerSettings.icon}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function showBannerEditor() {
            if (!isAdmin) {
                alert('관리자만 배너를 편집할 수 있습니다.');
                return;
            }
            
            // 현재 설정을 폼에 로드
            document.getElementById('bannerEnabled').checked = bannerSettings.enabled;
            document.getElementById('bannerTitleInput').value = bannerSettings.title;
            document.getElementById('bannerDescriptionInput').value = bannerSettings.description;
            document.getElementById('bannerPeriodInput').value = bannerSettings.period;
            document.getElementById('bannerRewardInput').value = bannerSettings.reward;
            document.getElementById('bannerIconInput').value = bannerSettings.icon;
            document.getElementById('bannerLinkInput').value = bannerSettings.link;
            
            // 스타일 선택 업데이트
            updateStyleSelection(bannerSettings.style);
            
            // 미리보기 업데이트
            updateBannerPreview();
            
            document.getElementById('bannerEditorModal').classList.remove('hidden');
        }

        function updateStyleSelection(selectedStyle) {
            document.querySelectorAll('.banner-style-option').forEach(option => {
                option.classList.remove('border-indigo-500');
                option.classList.add('border-gray-300');
            });
            
            const selectedOption = document.querySelector(`[data-style="${selectedStyle}"]`);
            if (selectedOption) {
                selectedOption.classList.remove('border-gray-300');
                selectedOption.classList.add('border-indigo-500');
            }
            
            // 이미지 업로드 섹션 표시/숨김
            const imageSection = document.getElementById('imageUploadSection');
            if (selectedStyle === 'image-upload') {
                imageSection.classList.remove('hidden');
            } else {
                imageSection.classList.add('hidden');
            }
        }

        function updateBannerPreview() {
            const preview = document.getElementById('bannerPreview');
            const title = document.getElementById('bannerTitleInput').value;
            const description = document.getElementById('bannerDescriptionInput').value;
            const period = document.getElementById('bannerPeriodInput').value;
            const reward = document.getElementById('bannerRewardInput').value;
            const icon = document.getElementById('bannerIconInput').value;
            
            const selectedStyle = document.querySelector('.banner-style-option.border-indigo-500')?.dataset.style || 'gradient-purple';
            
            const styleClasses = {
                'gradient-purple': 'bg-gradient-to-r from-purple-600 via-pink-600 to-red-600',
                'gradient-blue': 'bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600',
                'gradient-green': 'bg-gradient-to-r from-green-600 via-teal-600 to-blue-600',
                'gradient-orange': 'bg-gradient-to-r from-orange-600 via-red-600 to-pink-600',
                'solid-dark': 'bg-gray-900'
            };

            let backgroundStyle = '';
            if (selectedStyle === 'image-upload' && bannerSettings.backgroundImage) {
                backgroundStyle = `background-image: url('${bannerSettings.backgroundImage}'); background-size: cover; background-position: center;`;
            }

            preview.innerHTML = `
                <div class="${styleClasses[selectedStyle] || styleClasses['gradient-purple']} p-6 text-white" style="${backgroundStyle}">
                    <div class="flex items-center justify-between">
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="bg-white bg-opacity-20 px-2 py-1 rounded-full text-xs font-medium">🎉 특별 이벤트</span>
                                <span class="bg-yellow-400 text-yellow-900 px-2 py-1 rounded-full text-xs font-bold">HOT</span>
                            </div>
                            <h2 class="text-xl font-bold mb-2">${title || '제목을 입력하세요'}</h2>
                            <p class="text-sm opacity-90 mb-3">${description || '설명을 입력하세요'}</p>
                            <div class="flex items-center space-x-4 text-sm">
                                <span>📅 ${period || '기간'}</span>
                                <span>🎁 ${reward || '혜택'}</span>
                            </div>
                        </div>
                        <div class="ml-4">
                            <div class="w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                <span class="text-2xl">${icon || '🎁'}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function saveBannerChanges() {
            bannerSettings.enabled = document.getElementById('bannerEnabled').checked;
            bannerSettings.title = document.getElementById('bannerTitleInput').value;
            bannerSettings.description = document.getElementById('bannerDescriptionInput').value;
            bannerSettings.period = document.getElementById('bannerPeriodInput').value;
            bannerSettings.reward = document.getElementById('bannerRewardInput').value;
            bannerSettings.icon = document.getElementById('bannerIconInput').value;
            bannerSettings.link = document.getElementById('bannerLinkInput').value;
            
            const selectedStyle = document.querySelector('.banner-style-option.border-indigo-500')?.dataset.style;
            if (selectedStyle) {
                bannerSettings.style = selectedStyle;
            }
            
            saveBannerSettings();
            updateBannerDisplay();
            document.getElementById('bannerEditorModal').classList.add('hidden');
            
            showNotificationToast({
                title: '배너 저장 완료',
                message: '배너 설정이 성공적으로 저장되었습니다.'
            });
        }

        function closeBanner() {
            bannerSettings.dismissed = true;
            saveBannerSettings();
            document.getElementById('eventBanner').style.display = 'none';
        }

        function showBannerDetail() {
            const detailContent = document.getElementById('bannerDetailContent');
            detailContent.innerHTML = `
                <div class="text-center mb-6">
                    <div class="w-20 h-20 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-3xl">${bannerSettings.icon}</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2">${bannerSettings.title}</h3>
                    <p class="text-gray-600">${bannerSettings.description}</p>
                </div>
                
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <span class="text-2xl">📅</span>
                            <div>
                                <p class="font-medium text-gray-900">이벤트 기간</p>
                                <p class="text-sm text-gray-600">${bannerSettings.period}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <span class="text-2xl">🎁</span>
                            <div>
                                <p class="font-medium text-gray-900">혜택</p>
                                <p class="text-sm text-gray-600">${bannerSettings.reward}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-4 bg-indigo-50 rounded-lg">
                        <h4 class="font-medium text-indigo-900 mb-2">참여 방법</h4>
                        <ol class="text-sm text-indigo-800 space-y-1">
                            <li>1. 회원가입 또는 로그인</li>
                            <li>2. 첫 게시글 작성하기</li>
                            <li>3. 자동으로 이벤트 참여 완료!</li>
                        </ol>
                    </div>
                </div>
            `;
            
            document.getElementById('bannerDetailModal').classList.remove('hidden');
        }

        function participateInEvent() {
            if (!currentUser) {
                alert('로그인이 필요합니다.');
                showModal();
                return;
            }
            
            // 글쓰기 페이지로 이동
            document.getElementById('bannerDetailModal').classList.add('hidden');
            showPage('writePage');
            
            showNotificationToast({
                title: '이벤트 참여',
                message: '게시글을 작성하여 이벤트에 참여해보세요!'
            });
        }

        function setIcon(icon) {
            document.getElementById('bannerIconInput').value = icon;
            updateBannerPreview();
        }

        function setupBannerEventListeners() {
            // 배너 편집 모달 이벤트
            document.getElementById('closeBannerEditor').addEventListener('click', function() {
                document.getElementById('bannerEditorModal').classList.add('hidden');
            });

            document.getElementById('cancelBannerEdit').addEventListener('click', function() {
                document.getElementById('bannerEditorModal').classList.add('hidden');
            });

            document.getElementById('saveBannerChanges').addEventListener('click', function() {
                saveBannerChanges();
            });

            document.getElementById('previewBannerChanges').addEventListener('click', function() {
                updateBannerPreview();
            });

            // 배너 상세 모달 이벤트
            document.getElementById('closeBannerDetail').addEventListener('click', function() {
                document.getElementById('bannerDetailModal').classList.add('hidden');
            });

            document.getElementById('closeBannerDetailBtn').addEventListener('click', function() {
                document.getElementById('bannerDetailModal').classList.add('hidden');
            });

            document.getElementById('participateEvent').addEventListener('click', function() {
                participateInEvent();
            });

            // 스타일 선택 이벤트
            document.querySelectorAll('.banner-style-option').forEach(option => {
                option.addEventListener('click', function() {
                    const style = this.dataset.style;
                    updateStyleSelection(style);
                    updateBannerPreview();
                });
            });

            // 입력 필드 변경 시 미리보기 업데이트
            const inputs = ['bannerTitleInput', 'bannerDescriptionInput', 'bannerPeriodInput', 'bannerRewardInput', 'bannerIconInput'];
            inputs.forEach(inputId => {
                document.getElementById(inputId).addEventListener('input', function() {
                    updateBannerPreview();
                });
            });

            // 배너 이미지 업로드
            document.getElementById('bannerImageUpload').addEventListener('click', function() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.onchange = function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        if (file.size > 5 * 1024 * 1024) {
                            alert('파일 크기는 5MB 이하여야 합니다.');
                            return;
                        }
                        
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            bannerSettings.backgroundImage = e.target.result;
                            document.getElementById('bannerPreviewImg').src = e.target.result;
                            document.getElementById('bannerImagePreview').classList.remove('hidden');
                            updateBannerPreview();
                        };
                        reader.readAsDataURL(file);
                    }
                };
                input.click();
            });

            // 배너 이미지 제거
            document.getElementById('removeBannerImage').addEventListener('click', function() {
                bannerSettings.backgroundImage = null;
                document.getElementById('bannerImagePreview').classList.add('hidden');
                document.getElementById('bannerPreviewImg').src = '';
                updateBannerPreview();
            });

            // 관리자 권한 토글 (데모용 - 실제로는 서버에서 관리)
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.shiftKey && e.key === 'A') {
                    isAdmin = !isAdmin;
                    updateBannerDisplay();
                    alert(`관리자 모드: ${isAdmin ? 'ON' : 'OFF'}`);
                }
            });
        }

        // 전역 함수로 노출
        window.showBannerEditor = showBannerEditor;
        window.showBannerDetail = showBannerDetail;
        window.closeBanner = closeBanner;
        window.setIcon = setIcon;

        // 페이지 로드시 피드 및 알림 초기화
        loadUserData();
        initializeFeed();
        initializeNotifications();
        initializeBanner();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97435ef2a6d5aa53',t:'MTc1NjA0Mzk3NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
