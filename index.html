   <!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VoteSpace - ÏùµÎ™Ö Ïª§ÎÆ§ÎãàÌã∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700&display=swap');
        
        body { 
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif; 
            background: #f8f9fa;
        }
        
        .header-gradient {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
        }
        
        .nav-item {
            transition: all 0.2s ease;
        }
        
        .nav-item:hover {
            background: rgba(37, 99, 235, 0.1);
        }
        
        .nav-item.active {
            background: #2563eb;
            color: white;
        }
        
        .card {
            background: white;
            border: 1px solid #e5e7eb;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .post-row {
            transition: background-color 0.15s ease;
        }
        
        .post-row:hover {
            background: #f9fafb;
        }
        
        .gallery-item {
            transition: all 0.2s ease;
        }
        
        .gallery-item:hover {
            background: #f3f4f6;
            transform: translateY(-1px);
        }
        
        .vote-option {
            transition: all 0.2s ease;
            border: 2px solid #e5e7eb;
        }
        
        .vote-option:hover:not(:disabled) {
            border-color: #2563eb;
            background: #eff6ff;
        }
        
        .vote-option:disabled {
            opacity: 0.7;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #2563eb 0%, #1d4ed8 100%);
        }
        
        .btn-primary {
            background: #2563eb;
            color: white;
            transition: all 0.2s ease;
        }
        
        .btn-primary:hover {
            background: #1d4ed8;
        }
        
        .btn-secondary {
            background: #6b7280;
            color: white;
            transition: all 0.2s ease;
        }
        
        .btn-secondary:hover {
            background: #4b5563;
        }
        
        .search-filter.active {
            background: #2563eb;
            color: white;
        }
        
        .tag {
            background: #eff6ff;
            color: #2563eb;
            border: 1px solid #bfdbfe;
        }
    </style>
</head>
<body>
    <div class="min-h-screen">
        <!-- Ìó§Îçî -->
        <header class="header-gradient shadow-sm">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center gap-3">
                        <h1 class="text-2xl font-bold text-white">VoteSpace</h1>
                        <span class="text-blue-100 text-sm">ÏùµÎ™Ö Ïª§ÎÆ§ÎãàÌã∞</span>
                    </div>
                    <div class="text-blue-100 text-sm">
                        Ïã§ÏãúÍ∞Ñ Ìà¨Ìëú & ÌÜ†Î°†
                    </div>
                </div>
            </div>
        </header>

        <!-- ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
        <nav class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex space-x-1">
                    <button onclick="showSection('home')" id="homeBtn" class="nav-item px-4 py-3 text-sm font-medium rounded-none active">
                        Ìôà
                    </button>
                    <button onclick="showSection('galleries')" id="galleriesBtn" class="nav-item px-4 py-3 text-sm font-medium text-gray-600 hover:text-gray-900">
                        Í∞§Îü¨Î¶¨
                    </button>
                    <button onclick="showSection('popular-posts')" id="popularPostsBtn" class="nav-item px-4 py-3 text-sm font-medium text-gray-600 hover:text-gray-900">
                        Î≤†Ïä§Ìä∏
                    </button>
                    <button onclick="showSection('search')" id="searchBtn" class="nav-item px-4 py-3 text-sm font-medium text-gray-600 hover:text-gray-900">
                        Í≤ÄÏÉâ
                    </button>
                    <button onclick="showSection('votes')" id="votesBtn" class="nav-item px-4 py-3 text-sm font-medium text-gray-600 hover:text-gray-900">
                        Ìà¨Ìëú
                    </button>
                </div>
            </div>
        </nav>

        <!-- Ïª§Ïä§ÌÖÄ Î∞∞ÎÑà ÏòÅÏó≠ -->
        <div id="customBanner" class="bg-gradient-to-r from-purple-600 to-blue-600 text-white">
            <div class="max-w-7xl mx-auto px-4 py-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold mb-2">üéâ VoteSpaceÏóê Ïò§Ïã† Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§!</h2>
                    <p class="text-lg opacity-90 mb-4">ÏûêÏú†Î°≠Í≤å ÏùòÍ≤¨ÏùÑ ÎÇòÎàÑÍ≥† Ìà¨ÌëúÏóê Ï∞∏Ïó¨Ìï¥Î≥¥ÏÑ∏Ïöî</p>
                    <div class="flex justify-center gap-4">
                        <button onclick="showSection('votes')" class="bg-white text-purple-600 px-6 py-2 rounded-full font-medium hover:bg-gray-100 transition-colors">
                            üó≥Ô∏è Ìà¨Ìëú Ï∞∏Ïó¨ÌïòÍ∏∞
                        </button>
                        <button onclick="showSection('galleries')" class="bg-purple-500 bg-opacity-50 px-6 py-2 rounded-full font-medium hover:bg-opacity-70 transition-colors">
                            üìù Í∏Ä ÏûëÏÑ±ÌïòÍ∏∞
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="max-w-7xl mx-auto px-4 py-6">
            <!-- Ìôà ÏÑπÏÖò -->
            <div id="homeSection" class="section">
                <div class="grid lg:grid-cols-3 gap-6">
                    <!-- Î©îÏù∏ Ïª®ÌÖêÏ∏† -->
                    <div class="lg:col-span-2 space-y-6">
                        <!-- Î≤†Ïä§Ìä∏ Í∏Ä -->
                        <div class="card rounded-lg">
                            <div class="px-6 py-4 border-b border-gray-200">
                                <div class="flex items-center justify-between">
                                    <h2 class="text-lg font-semibold text-gray-900">üî• Ïã§ÏãúÍ∞Ñ Î≤†Ïä§Ìä∏</h2>
                                    <button onclick="showSection('popular-posts')" class="text-sm text-blue-600 hover:text-blue-800">
                                        ÎçîÎ≥¥Í∏∞
                                    </button>
                                </div>
                            </div>
                            <div id="homeBestPosts" class="divide-y divide-gray-100">
                                <!-- Î≤†Ïä§Ìä∏ Í∏Ä Î™©Î°ù -->
                            </div>
                        </div>

                        <!-- ÏµúÏã† Í∏Ä -->
                        <div class="card rounded-lg">
                            <div class="px-6 py-4 border-b border-gray-200">
                                <h2 class="text-lg font-semibold text-gray-900">üìù ÏµúÏã† Í∏Ä</h2>
                            </div>
                            <div id="homePosts" class="divide-y divide-gray-100">
                                <!-- ÏµúÏã† Í∏Ä Î™©Î°ù -->
                            </div>
                        </div>
                    </div>

                    <!-- ÏÇ¨Ïù¥ÎìúÎ∞î -->
                    <div class="space-y-6">
                        <!-- Í∞§Îü¨Î¶¨ Î™©Î°ù -->
                        <div class="card rounded-lg">
                            <div class="px-6 py-4 border-b border-gray-200">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-semibold text-gray-900">Í∞§Îü¨Î¶¨</h3>
                                    <button onclick="showSection('galleries')" class="text-sm text-blue-600 hover:text-blue-800">
                                        Ï†ÑÏ≤¥
                                    </button>
                                </div>
                            </div>
                            <div id="homeGalleries" class="p-4 space-y-2">
                                <!-- Í∞§Îü¨Î¶¨ Î™©Î°ù -->
                            </div>
                        </div>

                        <!-- Ïã§ÏãúÍ∞Ñ Ìà¨Ìëú -->
                        <div class="card rounded-lg">
                            <div class="px-6 py-4 border-b border-gray-200">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-semibold text-gray-900">Ïã§ÏãúÍ∞Ñ Ìà¨Ìëú</h3>
                                    <button onclick="showSection('votes')" class="text-sm text-blue-600 hover:text-blue-800">
                                        ÎçîÎ≥¥Í∏∞
                                    </button>
                                </div>
                            </div>
                            <div id="homePolls" class="p-4 space-y-3">
                                <!-- Ìà¨Ìëú Î™©Î°ù -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Í∞§Îü¨Î¶¨ ÏÑπÏÖò -->
            <div id="galleriesSection" class="section hidden">
                <div class="card rounded-lg">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h2 class="text-xl font-bold text-gray-900">Í∞§Îü¨Î¶¨ Î™©Î°ù</h2>
                    </div>
                    <div id="galleriesList" class="p-6">
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <!-- Í∞§Îü¨Î¶¨ Î™©Î°ù -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Î≤†Ïä§Ìä∏ Í∏Ä ÏÑπÏÖò -->
            <div id="popularPostsSection" class="section hidden">
                <div class="card rounded-lg">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h2 class="text-xl font-bold text-gray-900">Î≤†Ïä§Ìä∏ Í∏Ä TOP 20</h2>
                    </div>
                    <div id="popularPostsList" class="divide-y divide-gray-100">
                        <!-- Î≤†Ïä§Ìä∏ Í∏Ä Î™©Î°ù -->
                    </div>
                </div>
            </div>

            <!-- Í≤ÄÏÉâ ÏÑπÏÖò -->
            <div id="searchSection" class="section hidden">
                <div class="card rounded-lg">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h2 class="text-xl font-bold text-gray-900">ÌÜµÌï© Í≤ÄÏÉâ</h2>
                    </div>
                    <div class="p-6">
                        <!-- Í≤ÄÏÉâ ÏûÖÎ†• -->
                        <div class="mb-6">
                            <div class="flex gap-3">
                                <input type="text" id="searchInput" placeholder="Í≤ÄÏÉâÏñ¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" class="flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" onkeypress="if(event.key==='Enter') performSearch()">
                                <button onclick="performSearch()" class="btn-primary px-6 py-2 rounded-md font-medium">
                                    Í≤ÄÏÉâ
                                </button>
                            </div>
                        </div>

                        <!-- Í≤ÄÏÉâ ÌïÑÌÑ∞ -->
                        <div class="mb-6 flex gap-2">
                            <button onclick="setSearchFilter('all')" id="filterAll" class="search-filter px-4 py-2 text-sm rounded-md border active">
                                Ï†ÑÏ≤¥
                            </button>
                            <button onclick="setSearchFilter('posts')" id="filterPosts" class="search-filter px-4 py-2 text-sm rounded-md border text-gray-600 hover:bg-gray-50">
                                Í∏ÄÎßå
                            </button>
                            <button onclick="setSearchFilter('polls')" id="filterPolls" class="search-filter px-4 py-2 text-sm rounded-md border text-gray-600 hover:bg-gray-50">
                                Ìà¨ÌëúÎßå
                            </button>
                        </div>

                        <!-- Í≤ÄÏÉâ Í≤∞Í≥º -->
                        <div id="searchResults">
                            <div class="text-center py-12 text-gray-500">
                                <div class="text-4xl mb-4">üîç</div>
                                <p>Í≤ÄÏÉâÏñ¥Î•º ÏûÖÎ†•ÌïòÏó¨ Í∏ÄÍ≥º Ìà¨ÌëúÎ•º Ï∞æÏïÑÎ≥¥ÏÑ∏Ïöî</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ìà¨Ìëú ÏÑπÏÖò -->
            <div id="votesSection" class="section hidden">
                <!-- Ìà¨Ìëú ÏÉùÏÑ± Î≤ÑÌäº -->
                <div class="mb-6">
                    <button onclick="toggleCreateForm()" class="btn-primary px-6 py-3 rounded-md font-medium">
                        + ÏÉà Ìà¨Ìëú ÎßåÎì§Í∏∞
                    </button>
                </div>

                <!-- Ìà¨Ìëú ÏÉùÏÑ± Ìèº -->
                <div id="createForm" class="hidden mb-6">
                    <div class="card rounded-lg p-6">
                        <h3 class="text-lg font-semibold mb-4">ÏÉà Ìà¨Ìëú ÏÉùÏÑ±</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Ìà¨Ìëú Ï†úÎ™©</label>
                                <input type="text" id="pollTitle" placeholder="Ìà¨Ìëú Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ÏÑ†ÌÉùÏßÄ 1</label>
                                    <input type="text" id="option1" placeholder="Ï≤´ Î≤àÏß∏ ÏÑ†ÌÉùÏßÄ" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ÏÑ†ÌÉùÏßÄ 2</label>
                                    <input type="text" id="option2" placeholder="Îëê Î≤àÏß∏ ÏÑ†ÌÉùÏßÄ" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                            </div>
                            <div class="flex gap-3">
                                <button onclick="createPoll()" class="btn-primary px-6 py-2 rounded-md font-medium">
                                    ÏÉùÏÑ±
                                </button>
                                <button onclick="toggleCreateForm()" class="btn-secondary px-6 py-2 rounded-md font-medium">
                                    Ï∑®ÏÜå
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="pollsList" class="space-y-6">
                    <!-- Ìà¨Ìëú Î™©Î°ù -->
                </div>
            </div>

            <!-- Í∞§Îü¨Î¶¨ ÏÉÅÏÑ∏ ÏÑπÏÖò -->
            <div id="galleryDetailSection" class="section hidden">
                <div class="mb-4">
                    <button onclick="showSection('galleries')" class="btn-secondary px-4 py-2 rounded-md text-sm">
                        ‚Üê Í∞§Îü¨Î¶¨ Î™©Î°ù
                    </button>
                </div>
                
                <div class="card rounded-lg">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <h2 id="galleryTitle" class="text-xl font-bold text-gray-900"></h2>
                                <p id="galleryDescription" class="text-sm text-gray-600 mt-1"></p>
                            </div>
                            <button onclick="toggleWriteForm()" class="btn-primary px-4 py-2 rounded-md text-sm">
                                Í∏ÄÏì∞Í∏∞
                            </button>
                        </div>
                    </div>

                    <!-- Í∏ÄÏì∞Í∏∞ Ìèº -->
                    <div id="writeForm" class="hidden border-b border-gray-200 p-6 bg-gray-50">
                        <h3 class="font-semibold mb-4">ÏÉà Í∏Ä ÏûëÏÑ±</h3>
                        <div class="space-y-4">
                            <input type="text" id="postTitle" placeholder="Ï†úÎ™©" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <textarea id="postContent" placeholder="ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" rows="6" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"></textarea>
                            <div class="flex gap-3">
                                <button onclick="createPost()" class="btn-primary px-6 py-2 rounded-md font-medium">
                                    ÏûëÏÑ±
                                </button>
                                <button onclick="toggleWriteForm()" class="btn-secondary px-6 py-2 rounded-md font-medium">
                                    Ï∑®ÏÜå
                                </button>
                            </div>
                        </div>
                    </div>

                    <div id="galleryPosts" class="divide-y divide-gray-100">
                        <!-- Í∞§Îü¨Î¶¨ Í∏Ä Î™©Î°ù -->
                    </div>
                </div>
            </div>

            <!-- Í∏Ä ÏÉÅÏÑ∏ ÏÑπÏÖò -->
            <div id="postDetailSection" class="section hidden">
                <div class="mb-4">
                    <button onclick="goBackToGallery()" class="btn-secondary px-4 py-2 rounded-md text-sm">
                        ‚Üê Í∞§Îü¨Î¶¨Î°ú ÎèåÏïÑÍ∞ÄÍ∏∞
                    </button>
                </div>
                
                <div class="card rounded-lg p-6">
                    <div id="postDetail">
                        <!-- Í∏Ä ÏÉÅÏÑ∏ ÎÇ¥Ïö© -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•ÏÜå
        let galleries = [
            { id: 1, name: "ÏùåÏãù Í∞§Îü¨Î¶¨", description: "ÎßõÏûàÎäî ÏùåÏãùÏóê ÎåÄÌïú Î™®Îì† Ïù¥ÏïºÍ∏∞", icon: "üçï", posts: 0, todayPosts: 0 },
            { id: 2, name: "Í≤åÏûÑ Í∞§Îü¨Î¶¨", description: "Í≤åÏûÑ Î¶¨Î∑∞, Í≥µÎûµ, ÌÜ†Î°†", icon: "üéÆ", posts: 0, todayPosts: 0 },
            { id: 3, name: "ÏòÅÌôî Í∞§Îü¨Î¶¨", description: "ÏòÅÌôî Î¶¨Î∑∞ÏôÄ Ï∂îÏ≤ú", icon: "üé¨", posts: 0, todayPosts: 0 },
            { id: 4, name: "Ïä§Ìè¨Ï∏† Í∞§Îü¨Î¶¨", description: "Ïä§Ìè¨Ï∏† ÏÜåÏãùÍ≥º ÌÜ†Î°†", icon: "‚öΩ", posts: 0, todayPosts: 0 },
            { id: 5, name: "ÏùåÏïÖ Í∞§Îü¨Î¶¨", description: "ÏùåÏïÖ Ï∂îÏ≤úÍ≥º Î¶¨Î∑∞", icon: "üéµ", posts: 0, todayPosts: 0 },
            { id: 6, name: "Ïó¨Ìñâ Í∞§Îü¨Î¶¨", description: "Ïó¨Ìñâ ÌõÑÍ∏∞ÏôÄ Ï†ïÎ≥¥", icon: "‚úàÔ∏è", posts: 0, todayPosts: 0 },
            { id: 7, name: "Ìå®ÏÖò Í∞§Îü¨Î¶¨", description: "Ìå®ÏÖòÍ≥º Î∑∞Ìã∞ Ï†ïÎ≥¥", icon: "üëó", posts: 0, todayPosts: 0 },
            { id: 8, name: "IT Í∞§Îü¨Î¶¨", description: "Í∏∞Ïà†Í≥º IT ÏÜåÏãù", icon: "üíª", posts: 0, todayPosts: 0 }
        ];

        let posts = [
            { id: 1, galleryId: 1, title: "ÏßúÏû•Î©¥ vs Ïß¨ÎΩï Ïñ¥Îñ§Í≤å Îçî ÎßõÏûàÏùÑÍπåÏöî?", content: "Ïò§Îäò Ï†êÏã¨ Î©îÎâ¥Î°ú Í≥†ÎØºÏ§ëÏù∏Îç∞ Ïó¨Îü¨Î∂Ñ ÏùòÍ≤¨Ïù¥ Í∂ÅÍ∏àÌï¥Ïöî!", author: "ÏùµÎ™ÖÏùò ÎØ∏ÏãùÍ∞Ä", timestamp: Date.now() - 1800000, likes: 15, dislikes: 2, comments: [] },
            { id: 2, galleryId: 2, title: "ÏöîÏ¶ò Ìï´Ìïú Í≤åÏûÑ Ï∂îÏ≤úÌï¥Ï£ºÏÑ∏Ïöî", content: "ÏÉàÎ°úÏö¥ Í≤åÏûÑÏùÑ Ï∞æÍ≥† ÏûàÎäîÎç∞ Ïû¨ÎØ∏ÏûàÎäî Í≤åÏûÑ ÏûàÎÇòÏöî?", author: "Í≤åÏûÑÎü¨Î≤Ñ", timestamp: Date.now() - 3600000, likes: 23, dislikes: 1, comments: [] },
            { id: 3, galleryId: 3, title: "Ïù¥Î≤à Ï£ºÎßêÏóê Î≥ºÎßåÌïú ÏòÅÌôî", content: "Í∑πÏû•ÏóêÏÑú Î≥ºÎßåÌïú ÏòÅÌôî Ï∂îÏ≤ú Î∂ÄÌÉÅÎìúÎ†§Ïöî!", author: "ÏòÅÌôîÍ¥ë", timestamp: Date.now() - 7200000, likes: 18, dislikes: 0, comments: [] },
            { id: 4, galleryId: 1, title: "ÏßëÏóêÏÑú ÎßåÎì§Í∏∞ Ïâ¨Ïö¥ ÏöîÎ¶¨", content: "ÏöîÎ¶¨ Ï¥àÎ≥¥ÎèÑ ÏâΩÍ≤å ÎßåÎì§ Ïàò ÏûàÎäî Î†àÏãúÌîº Í≥µÏú†Ìï¥Ïöî", author: "ÏöîÎ¶¨Ï¥àÎ≥¥", timestamp: Date.now() - 10800000, likes: 31, dislikes: 3, comments: [] }
        ];

        let polls = [
            {
                id: 1, title: "ÏßúÏû•Î©¥ vs Ïß¨ÎΩï", options: ["ÏßúÏû•Î©¥", "Ïß¨ÎΩï"], votes: [45, 38],
                tags: ["ÏùåÏãù", "Ï§ëÏãù"], timestamp: Date.now() - 3600000, comments: []
            },
            {
                id: 2, title: "ÏπòÌÇ® vs ÌîºÏûê", options: ["ÏπòÌÇ®", "ÌîºÏûê"], votes: [62, 41],
                tags: ["ÏùåÏãù", "Î∞∞Îã¨"], timestamp: Date.now() - 7200000, comments: []
            }
        ];

        let currentSection = 'home';
        let currentGallery = null;
        let currentPost = null;
        let votedPolls = new Set();
        let likedPosts = new Set();
        let dislikedPosts = new Set();
        let postIdCounter = 5;
        let commentIdCounter = 1;
        let searchFilter = 'all';

        // Í∞§Îü¨Î¶¨Î≥Ñ Í∏Ä Í∞úÏàò ÏóÖÎç∞Ïù¥Ìä∏
        function updateGalleryStats() {
            galleries.forEach(gallery => {
                gallery.posts = posts.filter(post => post.galleryId === gallery.id).length;
                gallery.todayPosts = posts.filter(post => 
                    post.galleryId === gallery.id && 
                    Date.now() - post.timestamp < 86400000
                ).length;
            });
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        window.onload = function() {
            updateGalleryStats();
            showSection('home');
        };

        // ÏÑπÏÖò Ï†ÑÌôò
        function showSection(section) {
            // Î™®Îì† ÏÑπÏÖò Ïà®Í∏∞Í∏∞
            document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
            
            // ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Î≤ÑÌäº Ïä§ÌÉÄÏùº Ï¥àÍ∏∞Ìôî
            document.querySelectorAll('.nav-item').forEach(btn => {
                btn.className = 'nav-item px-4 py-3 text-sm font-medium text-gray-600 hover:text-gray-900';
            });

            // ÏÑ†ÌÉùÎêú ÏÑπÏÖò ÌëúÏãú
            document.getElementById(section + 'Section').classList.remove('hidden');
            document.getElementById(section + 'Btn').className = 'nav-item px-4 py-3 text-sm font-medium rounded-none active';
            
            currentSection = section;

            // ÏÑπÏÖòÎ≥Ñ Îç∞Ïù¥ÌÑ∞ Î°úÎìú
            switch(section) {
                case 'home':
                    displayHome();
                    break;
                case 'galleries':
                    displayGalleries();
                    break;
                case 'popular-posts':
                    displayPopularPosts();
                    break;
                case 'search':
                    displaySearch();
                    break;
                case 'votes':
                    displayPolls();
                    break;
            }
        }

        // Ìôà ÌôîÎ©¥ ÌëúÏãú
        function displayHome() {
            // ÏÇ¨Ïù¥ÎìúÎ∞î Í∞§Îü¨Î¶¨ Î™©Î°ù
            const popularGalleries = [...galleries]
                .sort((a, b) => b.posts - a.posts)
                .slice(0, 8);
            
            document.getElementById('homeGalleries').innerHTML = popularGalleries.map(gallery => `
                <div class="gallery-item flex items-center justify-between p-2 rounded cursor-pointer" onclick="showGalleryDetail(${gallery.id})">
                    <div class="flex items-center gap-2">
                        <span class="text-sm">${gallery.icon}</span>
                        <span class="text-sm font-medium text-gray-800">${gallery.name}</span>
                    </div>
                    <div class="text-xs text-gray-500">
                        ${gallery.posts}
                        ${gallery.todayPosts > 0 ? `<span class="text-red-500">+${gallery.todayPosts}</span>` : ''}
                    </div>
                </div>
            `).join('');

            // Î≤†Ïä§Ìä∏ Í∏Ä
            const bestPosts = [...posts]
                .sort((a, b) => (b.likes - b.dislikes) - (a.likes - a.dislikes))
                .slice(0, 5);
            
            document.getElementById('homeBestPosts').innerHTML = bestPosts.map(post => {
                const gallery = galleries.find(g => g.id === post.galleryId);
                return `
                    <div class="post-row flex items-center justify-between px-6 py-4 cursor-pointer" onclick="showPostDetail(${post.id})">
                        <div class="flex items-center gap-3 flex-1">
                            <span class="text-sm">${gallery.icon}</span>
                            <div class="flex-1">
                                <div class="font-medium text-gray-900 truncate">${post.title}</div>
                                <div class="text-sm text-gray-500">${gallery.name} ‚Ä¢ ${post.author}</div>
                            </div>
                        </div>
                        <div class="text-right text-sm">
                            <div class="text-red-500 font-medium">üëç ${post.likes}</div>
                            <div class="text-gray-400">${getTimeAgo(post.timestamp)}</div>
                        </div>
                    </div>
                `;
            }).join('');

            // ÏÇ¨Ïù¥ÎìúÎ∞î Ìà¨Ìëú Î™©Î°ù
            const recentPolls = polls.slice(0, 3);
            document.getElementById('homePolls').innerHTML = recentPolls.map(poll => {
                const totalVotes = poll.votes.reduce((a, b) => a + b, 0);
                return `
                    <div class="p-3 bg-gray-50 rounded cursor-pointer hover:bg-gray-100 transition-colors" onclick="showSection('votes')">
                        <div class="font-medium text-gray-800 text-sm mb-1 truncate">${poll.title}</div>
                        <div class="text-xs text-gray-500">${totalVotes}Ìëú ‚Ä¢ ${getTimeAgo(poll.timestamp)}</div>
                    </div>
                `;
            }).join('');

            // ÏµúÏã† Í∏Ä
            const recentPosts = [...posts]
                .sort((a, b) => b.timestamp - a.timestamp)
                .slice(0, 10);
            
            document.getElementById('homePosts').innerHTML = recentPosts.map(post => {
                const gallery = galleries.find(g => g.id === post.galleryId);
                return `
                    <div class="post-row flex items-center justify-between px-6 py-4 cursor-pointer" onclick="showPostDetail(${post.id})">
                        <div class="flex items-center gap-3 flex-1">
                            <span class="text-sm">${gallery.icon}</span>
                            <div class="flex-1">
                                <div class="font-medium text-gray-900 truncate">${post.title}</div>
                                <div class="text-sm text-gray-500">${gallery.name} ‚Ä¢ ${post.author}</div>
                            </div>
                        </div>
                        <div class="text-right text-sm">
                            <div class="text-gray-600">üëç ${post.likes}</div>
                            <div class="text-gray-400">${getTimeAgo(post.timestamp)}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Í∞§Îü¨Î¶¨ Î™©Î°ù ÌëúÏãú
        function displayGalleries() {
            updateGalleryStats();
            document.getElementById('galleriesList').innerHTML = galleries.map(gallery => `
                <div class="gallery-item border border-gray-200 rounded-lg p-4 cursor-pointer hover:shadow-sm" onclick="showGalleryDetail(${gallery.id})">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="text-2xl">${gallery.icon}</span>
                        <div>
                            <h3 class="font-semibold text-gray-900">${gallery.name}</h3>
                            <p class="text-sm text-gray-600">${gallery.description}</p>
                        </div>
                    </div>
                    <div class="flex justify-between text-sm text-gray-500">
                        <span>Ï¥ù ${gallery.posts}Í∞ú</span>
                        <span class="text-blue-600">Ïò§Îäò ${gallery.todayPosts}Í∞ú</span>
                    </div>
                </div>
            `).join('');
        }

        // Ïù∏Í∏∞ Í∏Ä ÌëúÏãú
        function displayPopularPosts() {
            const popularPosts = [...posts]
                .sort((a, b) => (b.likes - b.dislikes) - (a.likes - a.dislikes))
                .slice(0, 20);

            document.getElementById('popularPostsList').innerHTML = popularPosts.map((post, index) => {
                const gallery = galleries.find(g => g.id === post.galleryId);
                return `
                    <div class="post-row flex items-center gap-4 px-6 py-4 cursor-pointer" onclick="showPostDetail(${post.id})">
                        <div class="flex-shrink-0 w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white text-sm font-bold">
                            ${index + 1}
                        </div>
                        <span class="text-lg">${gallery.icon}</span>
                        <div class="flex-1">
                            <h4 class="font-medium text-gray-900">${post.title}</h4>
                            <div class="flex items-center gap-4 text-sm text-gray-500">
                                <span>${gallery.name}</span>
                                <span>${post.author}</span>
                                <span>${getTimeAgo(post.timestamp)}</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-lg font-bold text-blue-600">üëç ${post.likes}</div>
                            <div class="text-sm text-gray-500">üëé ${post.dislikes}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Í∞§Îü¨Î¶¨ ÏÉÅÏÑ∏ ÌëúÏãú
        function showGalleryDetail(galleryId) {
            currentGallery = galleries.find(g => g.id === galleryId);
            if (!currentGallery) return;

            document.getElementById('galleryTitle').textContent = currentGallery.name;
            document.getElementById('galleryDescription').textContent = currentGallery.description;

            const galleryPosts = posts.filter(post => post.galleryId === galleryId)
                .sort((a, b) => b.timestamp - a.timestamp);

            document.getElementById('galleryPosts').innerHTML = galleryPosts.length > 0 ? galleryPosts.map(post => `
                <div class="post-row flex items-center justify-between px-6 py-4 cursor-pointer" onclick="showPostDetail(${post.id})">
                    <div class="flex-1">
                        <h4 class="font-medium text-gray-900 mb-1">${post.title}</h4>
                        <div class="flex items-center gap-4 text-sm text-gray-500">
                            <span>${post.author}</span>
                            <span>${getTimeAgo(post.timestamp)}</span>
                            <span>üí¨ ${post.comments.length}</span>
                        </div>
                    </div>
                    <div class="text-right text-sm">
                        <div class="text-blue-600 font-medium">üëç ${post.likes}</div>
                        <div class="text-gray-500">üëé ${post.dislikes}</div>
                    </div>
                </div>
            `).join('') : '<div class="text-center py-12 text-gray-500">ÏïÑÏßÅ ÏûëÏÑ±Îêú Í∏ÄÏù¥ ÏóÜÏäµÎãàÎã§.<br>Ï≤´ Î≤àÏß∏ Í∏ÄÏùÑ ÏûëÏÑ±Ìï¥Î≥¥ÏÑ∏Ïöî!</div>';

            // Î™®Îì† ÏÑπÏÖò Ïà®Í∏∞Í≥† Í∞§Îü¨Î¶¨ ÏÉÅÏÑ∏ ÌëúÏãú
            document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
            document.getElementById('galleryDetailSection').classList.remove('hidden');
        }

        // Í∏Ä ÏÉÅÏÑ∏ ÌëúÏãú
        function showPostDetail(postId) {
            currentPost = posts.find(p => p.id === postId);
            if (!currentPost) return;

            const gallery = galleries.find(g => g.id === currentPost.galleryId);
            
            document.getElementById('postDetail').innerHTML = `
                <div class="mb-6">
                    <div class="flex items-center gap-2 text-sm text-gray-500 mb-3">
                        <span>${gallery.icon} ${gallery.name}</span>
                        <span>‚Ä¢</span>
                        <span>${getTimeAgo(currentPost.timestamp)}</span>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-900 mb-4">${currentPost.title}</h1>
                    <div class="flex items-center gap-4 text-sm text-gray-600 mb-6">
                        <span class="font-medium">${currentPost.author}</span>
                        <div class="flex items-center gap-4">
                            <button onclick="likePost(${currentPost.id})" class="flex items-center gap-1 ${likedPosts.has(currentPost.id) ? 'text-blue-600' : 'text-gray-500'} hover:text-blue-600 transition-colors">
                                üëç <span>${currentPost.likes}</span>
                            </button>
                            <button onclick="dislikePost(${currentPost.id})" class="flex items-center gap-1 ${dislikedPosts.has(currentPost.id) ? 'text-red-600' : 'text-gray-500'} hover:text-red-600 transition-colors">
                                üëé <span>${currentPost.dislikes}</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="prose max-w-none mb-8">
                    <p class="text-gray-800 leading-relaxed">${currentPost.content}</p>
                </div>

                <div class="border-t pt-6">
                    <h3 class="text-lg font-semibold mb-4">ÎåìÍ∏Ä ${currentPost.comments.length}Í∞ú</h3>
                    
                    <div class="mb-6">
                        <div class="flex gap-3">
                            <input type="text" id="commentInput" placeholder="ÎåìÍ∏ÄÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" class="flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" onkeypress="if(event.key==='Enter') addPostComment()">
                            <button onclick="addPostComment()" class="btn-primary px-6 py-2 rounded-md font-medium">
                                ÏûëÏÑ±
                            </button>
                        </div>
                    </div>

                    <div class="space-y-4">
                        ${currentPost.comments.map(comment => `
                            <div class="bg-gray-50 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <span class="font-medium text-blue-600">${comment.author}</span>
                                    <span class="text-xs text-gray-500">${getTimeAgo(comment.timestamp)}</span>
                                </div>
                                <p class="text-gray-800">${comment.content}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            // Î™®Îì† ÏÑπÏÖò Ïà®Í∏∞Í≥† Í∏Ä ÏÉÅÏÑ∏ ÌëúÏãú
            document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
            document.getElementById('postDetailSection').classList.remove('hidden');
        }

        // Ìà¨Ìëú Î™©Î°ù ÌëúÏãú
        function displayPolls() {
            document.getElementById('pollsList').innerHTML = polls.map(poll => {
                const totalVotes = poll.votes.reduce((a, b) => a + b, 0);
                const hasVoted = votedPolls.has(poll.id);
                
                return `
                    <div class="card rounded-lg p-6">
                        <div class="flex justify-between items-start mb-6">
                            <h3 class="text-lg font-semibold text-gray-900 flex-1 pr-4">${poll.title}</h3>
                            <div class="text-right text-sm text-gray-500">
                                <div>${getTimeAgo(poll.timestamp)}</div>
                                <div>Ï¥ù ${totalVotes}Ìëú</div>
                            </div>
                        </div>
                        
                        <div class="space-y-3 mb-4">
                            ${poll.options.map((option, index) => {
                                const percentage = totalVotes > 0 ? Math.round((poll.votes[index] / totalVotes) * 100) : 0;
                                return `
                                    <button onclick="vote(${poll.id}, ${index})" class="vote-option w-full text-left p-4 rounded-lg transition-all duration-300 ${hasVoted ? 'cursor-not-allowed' : ''}" ${hasVoted ? 'disabled' : ''}>
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="font-medium text-gray-800">${option}</span>
                                            <div class="text-right">
                                                <div class="font-bold text-blue-600">${percentage}%</div>
                                                <div class="text-sm text-gray-500">${poll.votes[index]}Ìëú</div>
                                            </div>
                                        </div>
                                        <div class="bg-gray-200 rounded-full h-2 overflow-hidden">
                                            <div class="progress-bar h-2 rounded-full transition-all duration-1000 ease-out" style="width: ${percentage}%"></div>
                                        </div>
                                    </button>
                                `;
                            }).join('')}
                        </div>
                        
                        ${hasVoted ? '<div class="flex items-center text-green-600 font-medium text-sm"><span class="mr-2">‚úÖ</span>Ìà¨Ìëú ÏôÑÎ£å</div>' : ''}
                    </div>
                `;
            }).join('');
        }

        // Í≤ÄÏÉâ Í¥ÄÎ†® Ìï®ÏàòÎì§
        function displaySearch() {
            // Í≤ÄÏÉâ ÌéòÏù¥ÏßÄ Ï¥àÍ∏∞Ìôî
        }

        function setSearchFilter(filter) {
            searchFilter = filter;
            
            // Î™®Îì† ÌïÑÌÑ∞ Î≤ÑÌäº Ï¥àÍ∏∞Ìôî
            document.querySelectorAll('.search-filter').forEach(btn => {
                btn.className = 'search-filter px-4 py-2 text-sm rounded-md border text-gray-600 hover:bg-gray-50';
            });
            
            // ÏÑ†ÌÉùÎêú ÌïÑÌÑ∞ Î≤ÑÌäº ÌôúÏÑ±Ìôî
            document.getElementById('filter' + filter.charAt(0).toUpperCase() + filter.slice(1)).className = 'search-filter px-4 py-2 text-sm rounded-md border active';
            
            // Í≤ÄÏÉâÏñ¥Í∞Ä ÏûàÏúºÎ©¥ Îã§Ïãú Í≤ÄÏÉâ
            const searchInput = document.getElementById('searchInput');
            if (searchInput.value.trim()) {
                performSearch();
            }
        }

        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value.trim().toLowerCase();
            
            if (!searchTerm) {
                alert('Í≤ÄÏÉâÏñ¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
                return;
            }

            let results = [];

            // Í∏Ä Í≤ÄÏÉâ
            if (searchFilter === 'all' || searchFilter === 'posts') {
                const matchingPosts = posts.filter(post => 
                    post.title.toLowerCase().includes(searchTerm) ||
                    post.content.toLowerCase().includes(searchTerm) ||
                    post.author.toLowerCase().includes(searchTerm)
                );

                results = results.concat(matchingPosts.map(post => ({
                    type: 'post',
                    data: post
                })));
            }

            // Ìà¨Ìëú Í≤ÄÏÉâ
            if (searchFilter === 'all' || searchFilter === 'polls') {
                const matchingPolls = polls.filter(poll =>
                    poll.title.toLowerCase().includes(searchTerm) ||
                    poll.options.some(option => option.toLowerCase().includes(searchTerm))
                );

                results = results.concat(matchingPolls.map(poll => ({
                    type: 'poll',
                    data: poll
                })));
            }

            // Í≤∞Í≥ºÎ•º ÏãúÍ∞ÑÏàúÏúºÎ°ú Ï†ïÎ†¨
            results.sort((a, b) => b.data.timestamp - a.data.timestamp);

            displaySearchResults(results, searchTerm);
        }

        function displaySearchResults(results, searchTerm) {
            const resultsContainer = document.getElementById('searchResults');
            
            if (results.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <div class="text-4xl mb-4">üòî</div>
                        <p>"${searchTerm}"Ïóê ÎåÄÌïú Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§.</p>
                    </div>
                `;
                return;
            }

            resultsContainer.innerHTML = `
                <div class="mb-4">
                    <h3 class="font-semibold text-gray-900 mb-2">Í≤ÄÏÉâ Í≤∞Í≥º ${results.length}Í∞ú</h3>
                    <p class="text-sm text-gray-600">Í≤ÄÏÉâÏñ¥: "${searchTerm}"</p>
                </div>
                <div class="space-y-4">
                    ${results.map(result => {
                        if (result.type === 'post') {
                            const post = result.data;
                            const gallery = galleries.find(g => g.id === post.galleryId);
                            return `
                                <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer border-l-4 border-l-blue-500" onclick="showPostDetail(${post.id})">
                                    <div class="flex items-start justify-between mb-2">
                                        <div class="flex items-center gap-2">
                                            <span class="tag px-2 py-1 rounded text-xs font-medium">Í∏Ä</span>
                                            <span>${gallery.icon}</span>
                                            <span class="text-sm text-gray-600">${gallery.name}</span>
                                        </div>
                                        <div class="text-sm text-gray-500">${getTimeAgo(post.timestamp)}</div>
                                    </div>
                                    <h4 class="font-medium text-gray-900 mb-2">${highlightSearchTerm(post.title, searchTerm)}</h4>
                                    <p class="text-gray-600 text-sm mb-2 line-clamp-2">${highlightSearchTerm(post.content, searchTerm)}</p>
                                    <div class="flex items-center justify-between text-sm text-gray-500">
                                        <span>ÏûëÏÑ±Ïûê: ${highlightSearchTerm(post.author, searchTerm)}</span>
                                        <div class="flex items-center gap-3">
                                            <span>üëç ${post.likes}</span>
                                            <span>üí¨ ${post.comments.length}</span>
                                        </div>
                                    </div>
                                </div>
                            `;
                        } else if (result.type === 'poll') {
                            const poll = result.data;
                            const totalVotes = poll.votes.reduce((a, b) => a + b, 0);
                            return `
                                <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer border-l-4 border-l-purple-500" onclick="showSection('votes')">
                                    <div class="flex items-start justify-between mb-2">
                                        <span class="tag px-2 py-1 rounded text-xs font-medium bg-purple-50 text-purple-700 border-purple-200">Ìà¨Ìëú</span>
                                        <div class="text-sm text-gray-500">${getTimeAgo(poll.timestamp)}</div>
                                    </div>
                                    <h4 class="font-medium text-gray-900 mb-3">${highlightSearchTerm(poll.title, searchTerm)}</h4>
                                    <div class="space-y-1 mb-2">
                                        ${poll.options.map((option, index) => {
                                            const percentage = totalVotes > 0 ? Math.round((poll.votes[index] / totalVotes) * 100) : 0;
                                            return `
                                                <div class="flex justify-between items-center text-sm">
                                                    <span>${highlightSearchTerm(option, searchTerm)}</span>
                                                    <span class="text-blue-600 font-medium">${percentage}% (${poll.votes[index]}Ìëú)</span>
                                                </div>
                                            `;
                                        }).join('')}
                                    </div>
                                    <div class="text-sm text-gray-500">
                                        Ï¥ù ${totalVotes}Ìëú Ï∞∏Ïó¨
                                    </div>
                                </div>
                            `;
                        }
                    }).join('')}
                </div>
            `;
        }

        function highlightSearchTerm(text, searchTerm) {
            if (!searchTerm) return text;
            const regex = new RegExp(`(${searchTerm})`, 'gi');
            return text.replace(regex, '<mark class="bg-yellow-200 px-1">$1</mark>');
        }

        // Ïú†Ìã∏Î¶¨Ìã∞ Ìï®ÏàòÎì§
        function toggleCreateForm() {
            const form = document.getElementById('createForm');
            form.classList.toggle('hidden');
        }

        function toggleWriteForm() {
            const form = document.getElementById('writeForm');
            form.classList.toggle('hidden');
        }

        function createPoll() {
            const title = document.getElementById('pollTitle').value.trim();
            const option1 = document.getElementById('option1').value.trim();
            const option2 = document.getElementById('option2').value.trim();

            if (!title || !option1 || !option2) {
                alert('Î™®Îì† ÌïÑÎìúÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
                return;
            }

            const newPoll = {
                id: polls.length + 1,
                title: title,
                options: [option1, option2],
                votes: [0, 0],
                tags: [],
                timestamp: Date.now(),
                comments: []
            };

            polls.unshift(newPoll);
            
            document.getElementById('pollTitle').value = '';
            document.getElementById('option1').value = '';
            document.getElementById('option2').value = '';
            
            toggleCreateForm();
            displayPolls();
            alert('Ìà¨ÌëúÍ∞Ä ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!');
        }

        function createPost() {
            const title = document.getElementById('postTitle').value.trim();
            const content = document.getElementById('postContent').value.trim();

            if (!title || !content) {
                alert('Ï†úÎ™©Í≥º ÎÇ¥Ïö©ÏùÑ Î™®Îëê ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
                return;
            }

            const nicknames = ['ÏùµÎ™ÖÏùò ÏûëÏÑ±Ïûê', 'Ïã†ÎπÑÌïú Í∏ÄÏì¥Ïù¥', 'Ïó¥Ï†ïÏ†ÅÏù∏ Ï∞∏Ïó¨Ïûê', 'ÏßÑÏã§Ìïú ÎßàÏùå', 'Îî∞ÎúªÌïú ÏãúÏÑ†'];
            
            const newPost = {
                id: postIdCounter++,
                galleryId: currentGallery.id,
                title: title,
                content: content,
                author: nicknames[Math.floor(Math.random() * nicknames.length)],
                timestamp: Date.now(),
                likes: 0,
                dislikes: 0,
                comments: []
            };

            posts.unshift(newPost);
            
            document.getElementById('postTitle').value = '';
            document.getElementById('postContent').value = '';
            
            toggleWriteForm();
            showGalleryDetail(currentGallery.id);
            alert('Í∏ÄÏù¥ ÏûëÏÑ±ÎêòÏóàÏäµÎãàÎã§!');
        }

        function vote(pollId, optionIndex) {
            if (votedPolls.has(pollId)) {
                alert('Ïù¥ÎØ∏ Ìà¨ÌëúÌïòÏÖ®ÏäµÎãàÎã§!');
                return;
            }

            const poll = polls.find(p => p.id === pollId);
            if (poll) {
                poll.votes[optionIndex]++;
                votedPolls.add(pollId);
                displayPolls();
            }
        }

        function likePost(postId) {
            if (likedPosts.has(postId)) {
                alert('Ïù¥ÎØ∏ Ï¢ãÏïÑÏöîÎ•º ÎàÑÎ•¥ÏÖ®ÏäµÎãàÎã§!');
                return;
            }

            const post = posts.find(p => p.id === postId);
            if (post) {
                if (dislikedPosts.has(postId)) {
                    post.dislikes--;
                    dislikedPosts.delete(postId);
                }
                post.likes++;
                likedPosts.add(postId);
                showPostDetail(postId);
            }
        }

        function dislikePost(postId) {
            if (dislikedPosts.has(postId)) {
                alert('Ïù¥ÎØ∏ Ïã´Ïñ¥ÏöîÎ•º ÎàÑÎ•¥ÏÖ®ÏäµÎãàÎã§!');
                return;
            }

            const post = posts.find(p => p.id === postId);
            if (post) {
                if (likedPosts.has(postId)) {
                    post.likes--;
                    likedPosts.delete(postId);
                }
                post.dislikes++;
                dislikedPosts.add(postId);
                showPostDetail(postId);
            }
        }

        function addPostComment() {
            const commentText = document.getElementById('commentInput').value.trim();
            if (!commentText) {
                alert('ÎåìÍ∏ÄÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
                return;
            }

            const nicknames = ['ÏùµÎ™ÖÏùò ÎåìÍ∏ÄÎü¨', 'Ïã†ÎπÑÌïú Î∞©Î¨∏Ïûê', 'Ïó¥Ï†ïÏ†ÅÏù∏ ÎèÖÏûê', 'ÏßÑÏã§Ìïú ÎßàÏùå', 'Îî∞ÎúªÌïú ÏãúÏÑ†'];
            
            const newComment = {
                id: commentIdCounter++,
                content: commentText,
                author: nicknames[Math.floor(Math.random() * nicknames.length)],
                timestamp: Date.now()
            };

            currentPost.comments.push(newComment);
            document.getElementById('commentInput').value = '';
            showPostDetail(currentPost.id);
        }

        function goBackToGallery() {
            if (currentGallery) {
                showGalleryDetail(currentGallery.id);
            } else {
                showSection('galleries');
            }
        }

        function getTimeAgo(timestamp) {
            const now = Date.now();
            const diff = now - timestamp;
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(diff / 3600000);
            const days = Math.floor(diff / 86400000);

            if (days > 0) return `${days}Ïùº Ï†Ñ`;
            if (hours > 0) return `${hours}ÏãúÍ∞Ñ Ï†Ñ`;
            if (minutes > 0) return `${minutes}Î∂Ñ Ï†Ñ`;
            return 'Î∞©Í∏à Ï†Ñ';
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9709996093a3aa53',t:'MTc1NTQzODE5My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
