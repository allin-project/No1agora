<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VirtSports - Í∞ÄÏÉÅ Ïä§Ìè¨Ï∏† Î≤†ÌåÖ ÌîåÎû´Ìèº</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body { 
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif; 
            background: #0f0f0f;
            color: #e5e5e5;
            line-height: 1.6;
        }
        
        .card {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
        }
        
        .card:hover {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
            transform: translateY(-2px);
        }
        
        .btn {
            background: #007bff;
            border: none;
            border-radius: 6px;
            padding: 10px 20px;
            font-weight: 500;
            font-size: 14px;
            color: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn:hover {
            background: #0056b3;
            transform: translateY(-1px);
        }
        
        .btn-success {
            background: #28a745;
        }
        
        .btn-success:hover {
            background: #1e7e34;
        }
        
        .odds-btn {
            background: #2a2a2a;
            border: 2px solid #444;
            border-radius: 6px;
            padding: 12px;
            font-weight: 600;
            color: #e5e5e5;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .odds-btn:hover {
            background: #333;
            border-color: #007bff;
            color: #007bff;
        }
        
        .odds-btn.selected {
            background: #007bff;
            border-color: #007bff;
            color: white;
        }
        
        .live-indicator {
            color: #dc3545;
        }
        
        .nav-btn {
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 6px;
            padding: 10px 20px;
            font-weight: 500;
            color: #e5e5e5;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .nav-btn:hover {
            background: #333;
            color: #007bff;
        }
        
        .nav-btn.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        .rank-gold { color: #ffd700; }
        .rank-silver { color: #c0c0c0; }
        .rank-bronze { color: #cd7f32; }
        
        .progress-bar {
            background: #007bff;
            height: 4px;
            border-radius: 2px;
            transition: width 0.3s ease;
        }
        
        .stats-card {
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 6px;
            padding: 16px;
            text-align: center;
        }
        
        .form-input {
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 6px;
            padding: 10px 12px;
            color: #e5e5e5;
            font-size: 14px;
            transition: all 0.2s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }
        
        .modal-backdrop {
            background: rgba(0, 0, 0, 0.5);
        }
        
        .sport-icon {
            font-size: 1.5rem;
        }
        
        .table-row {
            border-bottom: 1px solid #444;
            transition: background-color 0.2s ease;
        }
        
        .table-row:hover {
            background: #2a2a2a;
        }
        
        .match-card {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 6px;
            transition: all 0.2s ease;
        }
        
        .match-card:hover {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <!-- Ìó§Îçî -->
    <header class="bg-gray-900 border-b border-gray-700 shadow-sm">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <div class="flex items-center gap-3">
                        <div class="sport-icon">‚öΩ</div>
                        <div>
                            <h1 class="text-2xl font-bold text-white">VirtSports</h1>
                            <p class="text-gray-300 text-sm">Í∞ÄÏÉÅ Ïä§Ìè¨Ï∏† Î≤†ÌåÖ</p>
                        </div>
                    </div>
                </div>
                
                <div class="flex items-center gap-4">
                    <div class="stats-card">
                        <div class="text-blue-600 font-bold text-lg" id="userPoints">10,000</div>
                        <div class="text-gray-300 text-sm">Ìè¨Ïù∏Ìä∏</div>
                    </div>
                    <div class="stats-card">
                        <div class="text-green-400 font-bold text-lg" id="userRank">#1</div>
                        <div class="text-gray-300 text-sm">ÏàúÏúÑ</div>
                    </div>
                    <button onclick="showRankings()" class="btn">
                        Ï†ÑÏ≤¥ Îû≠ÌÇπ
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-4 py-6">
        <!-- ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
        <nav class="mb-6">
            <div class="card p-3">
                <div class="flex gap-2">
                    <button onclick="showSection('live')" id="liveBtn" class="nav-btn active">
                        <span class="live-indicator">‚óè</span> ÎùºÏù¥Î∏å Í≤ΩÍ∏∞
                    </button>
                    <button onclick="showSection('upcoming')" id="upcomingBtn" class="nav-btn">
                        ÏòàÏ†ï Í≤ΩÍ∏∞
                    </button>
                    <button onclick="showSection('history')" id="historyBtn" class="nav-btn">
                        Î≤†ÌåÖ ÎÇ¥Ïó≠
                    </button>
                </div>
            </div>
        </nav>

        <!-- ÎùºÏù¥Î∏å Í≤ΩÍ∏∞ ÏÑπÏÖò -->
        <div id="liveSection" class="section">
            <div class="grid lg:grid-cols-3 gap-8">
                <!-- Í≤ΩÍ∏∞ Î™©Î°ù -->
                <div class="lg:col-span-2">
                    <div class="card p-6 mb-6">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="text-xl font-bold text-white flex items-center gap-2">
                                <span class="live-indicator">‚óè</span> 
                                ÎùºÏù¥Î∏å Í≤ΩÍ∏∞
                            </h2>
                            <div class="text-sm text-gray-400">
                                Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏
                            </div>
                        </div>
                        
                        <div id="liveMatches" class="space-y-6">
                            <!-- ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê® -->
                        </div>
                    </div>
                </div>

                <!-- Î≤†ÌåÖ Ïä¨Î¶Ω & ÏàúÏúÑ -->
                <div class="space-y-8">
                    <!-- Î≤†ÌåÖ Ïä¨Î¶Ω -->
                    <div class="card p-4">
                        <h3 class="text-lg font-bold text-white mb-4">Î≤†ÌåÖ Ïä¨Î¶Ω</h3>
                        <div id="bettingSlip">
                            <div class="text-center text-gray-400 py-8">
                                <div class="text-4xl mb-3">üé≤</div>
                                <p>Í≤ΩÍ∏∞Î•º ÏÑ†ÌÉùÌïòÏó¨<br>Î≤†ÌåÖÏùÑ ÏãúÏûëÌïòÏÑ∏Ïöî!</p>
                            </div>
                        </div>
                    </div>

                    <!-- Ïã§ÏãúÍ∞Ñ ÏàúÏúÑ -->
                    <div class="card p-4">
                        <h3 class="text-lg font-bold text-white mb-4">TOP 5 Îû≠ÌÇπ</h3>
                        <div id="topRankings" class="space-y-3">
                            <!-- ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê® -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÏòàÏ†ï Í≤ΩÍ∏∞ ÏÑπÏÖò -->
        <div id="upcomingSection" class="section hidden">
            <div class="card p-6">
                <h2 class="text-xl font-bold text-white mb-6">ÏòàÏ†ïÎêú Í≤ΩÍ∏∞</h2>
                <div id="upcomingMatches" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê® -->
                </div>
            </div>
        </div>

        <!-- Î≤†ÌåÖ ÎÇ¥Ïó≠ ÏÑπÏÖò -->
        <div id="historySection" class="section hidden">
            <div class="card p-6">
                <h2 class="text-xl font-bold text-white mb-6">ÎÇòÏùò Î≤†ÌåÖ ÎÇ¥Ïó≠</h2>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="bg-gray-50">
                                <th class="px-4 py-3 text-left text-gray-700 font-semibold">Í≤ΩÍ∏∞</th>
                                <th class="px-4 py-3 text-left text-gray-700 font-semibold">Î≤†ÌåÖ</th>
                                <th class="px-4 py-3 text-left text-gray-700 font-semibold">Î∞∞Îãπ</th>
                                <th class="px-4 py-3 text-left text-gray-700 font-semibold">Ìè¨Ïù∏Ìä∏</th>
                                <th class="px-4 py-3 text-left text-gray-700 font-semibold">Í≤∞Í≥º</th>
                            </tr>
                        </thead>
                        <tbody id="bettingHistory">
                            <!-- ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê® -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Îû≠ÌÇπ Î™®Îã¨ -->
    <div id="rankingModal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50">
        <div class="card p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-bold text-gray-900">Ï†ÑÏ≤¥ Îû≠ÌÇπ</h2>
                <button onclick="hideRankings()" class="btn">√ó</button>
            </div>
            <div id="fullRankings" class="space-y-3">
                <!-- ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê® -->
            </div>
        </div>
    </div>

    <!-- Í¥ÄÎ¶¨Ïûê Ìå®ÎÑê Î™®Îã¨ -->
    <div id="adminModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="card rounded-xl p-8 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-white">‚öôÔ∏è Í¥ÄÎ¶¨Ïûê Ìå®ÎÑê</h2>
                <button onclick="hideAdminPanel()" class="text-slate-400 hover:text-white text-2xl">&times;</button>
            </div>
            
            <div class="space-y-6">
                <!-- Ìè¨Ïù∏Ìä∏ Í¥ÄÎ¶¨ -->
                <div class="bg-slate-700 rounded-lg p-6">
                    <h3 class="text-lg font-bold text-white mb-4">üí∞ Ìè¨Ïù∏Ìä∏ Í¥ÄÎ¶¨</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-slate-300 mb-2">Ìè¨Ïù∏Ìä∏ Ï∂îÍ∞Ä/Ï∞®Í∞ê</label>
                            <input type="number" id="pointsToAdd" placeholder="Ìè¨Ïù∏Ìä∏ ÏûÖÎ†•" class="w-full bg-slate-600 border border-slate-500 rounded-lg px-4 py-2 text-white">
                        </div>
                        <div class="flex gap-2">
                            <button onclick="addPoints()" class="flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg font-medium">
                                ‚ûï Ï∂îÍ∞Ä
                            </button>
                            <button onclick="removePoints()" class="flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg font-medium">
                                ‚ûñ Ï∞®Í∞ê
                            </button>
                        </div>
                    </div>
                    <div class="mt-4 flex gap-2">
                        <button onclick="setPoints(50000)" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                            50,000P ÏÑ§Ï†ï
                        </button>
                        <button onclick="setPoints(100000)" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                            100,000P ÏÑ§Ï†ï
                        </button>
                        <button onclick="resetPoints()" class="bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 rounded text-sm">
                            Ï¥àÍ∏∞Ìôî (10,000P)
                        </button>
                    </div>
                </div>

                <!-- Í≤ΩÍ∏∞ Í¥ÄÎ¶¨ -->
                <div class="bg-slate-700 rounded-lg p-6">
                    <h3 class="text-lg font-bold text-white mb-4">‚öΩ Í≤ΩÍ∏∞ Í¥ÄÎ¶¨</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <button onclick="forceCreateMatch()" class="bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-medium">
                            üÜï ÏÉà Í≤ΩÍ∏∞ ÏÉùÏÑ±
                        </button>
                        <button onclick="endAllMatches()" class="bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg font-medium">
                            üõë Î™®Îì† Í≤ΩÍ∏∞ Ï¢ÖÎ£å
                        </button>
                    </div>
                    <div class="mt-4">
                        <button onclick="createSpecialEvent()" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-medium">
                            ‚ú® ÌäπÎ≥Ñ Ïù¥Î≤§Ìä∏ Í≤ΩÍ∏∞ ÏÉùÏÑ±
                        </button>
                    </div>
                </div>

                <!-- ÏãúÏä§ÌÖú Í¥ÄÎ¶¨ -->
                <div class="bg-slate-700 rounded-lg p-6">
                    <h3 class="text-lg font-bold text-white mb-4">üîß ÏãúÏä§ÌÖú Í¥ÄÎ¶¨</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <button onclick="resetAllData()" class="bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg font-medium">
                            üóëÔ∏è Î™®Îì† Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî
                        </button>
                        <button onclick="exportData()" class="bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-medium">
                            üì§ Îç∞Ïù¥ÌÑ∞ ÎÇ¥Î≥¥ÎÇ¥Í∏∞
                        </button>
                    </div>
                </div>

                <!-- ÌòÑÏû¨ ÏÉÅÌÉú -->
                <div class="bg-slate-700 rounded-lg p-6">
                    <h3 class="text-lg font-bold text-white mb-4">üìä ÌòÑÏû¨ ÏÉÅÌÉú</h3>
                    <div class="grid md:grid-cols-3 gap-4 text-center">
                        <div>
                            <div class="text-2xl font-bold text-green-400" id="adminLiveCount">0</div>
                            <div class="text-slate-300 text-sm">ÏßÑÌñâ Ï§ë Í≤ΩÍ∏∞</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-blue-400" id="adminUpcomingCount">0</div>
                            <div class="text-slate-300 text-sm">ÏòàÏ†ï Í≤ΩÍ∏∞</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-yellow-400" id="adminBetCount">0</div>
                            <div class="text-slate-300 text-sm">ÌôúÏÑ± Î≤†ÌåÖ</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Î≤†ÌåÖ ÌôïÏù∏ Î™®Îã¨ -->
    <div id="betModal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50">
        <div class="card p-6 max-w-md w-full mx-4">
            <h3 class="text-lg font-bold text-gray-900 mb-4">Î≤†ÌåÖ ÌôïÏù∏</h3>
            <div id="betDetails" class="space-y-3 mb-6">
                <!-- ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê® -->
            </div>
            <div class="mb-6">
                <label class="block text-gray-700 font-medium mb-2">Î≤†ÌåÖ Ìè¨Ïù∏Ìä∏</label>
                <input type="number" id="betAmount" min="100" max="5000" value="1000" class="w-full form-input">
                <div class="text-sm text-gray-500 mt-1">ÏµúÏÜå 100P ~ ÏµúÎåÄ 5,000P</div>
            </div>
            <div class="flex gap-3">
                <button onclick="confirmBet()" class="flex-1 btn btn-success">
                    Î≤†ÌåÖ ÌôïÏ†ï
                </button>
                <button onclick="cancelBet()" class="flex-1 btn" style="background: #6c757d;">
                    Ï∑®ÏÜå
                </button>
            </div>
        </div>
    </div>

    <script>
        // Í≤åÏûÑ ÏÉÅÌÉú
        let userPoints = 10000;
        let currentBets = [];
        let bettingHistory = [];
        let liveMatches = [];
        let upcomingMatches = [];
        let rankings = [];
        let selectedBet = null;

        // Ïä§Ìè¨Ï∏† Ï¢ÖÎ™©Í≥º ÌåÄ Îç∞Ïù¥ÌÑ∞
        const sports = ['Ï∂ïÍµ¨', 'ÎÜçÍµ¨', 'ÏïºÍµ¨', 'ÌÖåÎãàÏä§', 'Î∞∞Íµ¨', 'ÎßêÍ≤ΩÍ∏∞', 'Í∞úÍ≤ΩÍ∏∞'];
        const teams = {
            'Ï∂ïÍµ¨': ['Î†àÏïå ÎßàÎìúÎ¶¨Îìú', 'Î∞îÎ•¥ÏÖÄÎ°úÎÇò', 'Îß®Ï≤¥Ïä§ÌÑ∞ Ïú†ÎÇòÏù¥Ìã∞Îìú', 'Î¶¨Î≤ÑÌíÄ', 'Î∞îÏù¥ÏóêÎ•∏ ÎÆåÌó®', 'ÌååÎ¶¨ ÏÉùÏ†úÎ•¥Îßπ', 'Ïú†Î≤§Ìà¨Ïä§', 'Ï≤ºÏãú'],
            'ÎÜçÍµ¨': ['Î†àÏù¥Ïª§Ïä§', 'ÏõåÎ¶¨Ïñ¥Ïä§', 'ÏÖÄÌã±Ïä§', 'ÎÑ§Ï∏†', 'ÌûàÌä∏', 'Î≤ÖÏä§', 'ÏÑ†Ï¶à', 'ÎÑàÍ≤üÏ∏†'],
            'ÏïºÍµ¨': ['ÏñëÌÇ§Ïä§', 'Îã§Ï†ÄÏä§', 'Î†àÎìúÏÇ≠Ïä§', 'ÏûêÏù¥Ïñ∏Ï∏†', 'Ïï†Ïä§Ìä∏Î°úÏä§', 'Î∏åÎ†àÏù¥Î∏åÏä§', 'Ìå®ÎìúÎ¶¨Ïä§', 'Î©îÏ∏†'],
            'ÌÖåÎãàÏä§': ['ÎÖ∏Î∞îÌÅ¨ Ï°∞ÏΩîÎπÑÏπò', 'ÎùºÌååÏóò ÎÇòÎã¨', 'Î°úÏ†Ä ÌéòÎçîÎü¨', 'Îã§Îãê Î©îÎìúÎ≤†Îç∞ÌîÑ', 'ÏïåÎ†âÏÇ∞Îçî Ï¶àÎ≤†Î†àÌîÑ', 'Ïä§ÌÖåÌååÎÖ∏Ïä§ ÏπòÏπòÌååÏä§'],
            'Î∞∞Íµ¨': ['ÌïúÍµ≠Ï†ÑÎ†•', 'KBÏÜêÌï¥Î≥¥Ìóò', 'ÌòÑÎåÄÏ∫êÌîºÌÉà', 'Ïö∞Î¶¨Ïπ¥Îìú', 'ÏÇºÏÑ±ÌôîÏû¨', 'OKÍ∏àÏúµÍ∑∏Î£π'],
            'ÎßêÍ≤ΩÍ∏∞': ['Ïç¨ÎçîÎ≥ºÌä∏', 'Í≥®Îì†Ïä§ÌîºÎìú', 'Î°úÏó¥ÌîÑÎ¶∞Ïä§', 'ÌååÏù¥Ïñ¥Ïä§ÌÜ∞', 'ÏúàÎìúÎü¨ÎÑà', 'Î∏îÎûôÎã§Ïù¥ÏïÑÎ™¨Îìú', 'Ïã§Î≤ÑÎ∂àÎ¶ø', 'Î†àÎìúÌîåÎûòÏãú', 'Ïä§ÌÉÄÎùºÏù¥Ìä∏', 'ÎìúÎ¶ºÏ≤¥Ïù¥ÏÑú'],
            'Í∞úÍ≤ΩÍ∏∞': ['Ïä§ÌîºÎìúÌÇπ', 'Îü≠ÌÇ§ÎèÖ', 'ÌîåÎûòÏãú', 'ÌÑ∞Î≥¥', 'Î°úÏºì', 'Î∂àÎ¶ø', 'ÎùºÏù¥Ìä∏Îãù', 'Ïä§ÌÜ∞', 'Î∏îÎ†àÏù¥Ï¶à', 'Ï≤¥Ïù¥ÏÑú']
        };

        // Ï¥àÍ∏∞Ìôî
        function init() {
            console.log('init Ìï®Ïàò ÏãúÏûë');
            loadUserData();
            
            // Í≤ΩÍ∏∞ Í∞ïÏ†ú ÏÉùÏÑ±
            liveMatches = [];
            for (let i = 0; i < 3; i++) {
                const match = createRandomMatch(true);
                liveMatches.push(match);
                console.log('ÏÉùÏÑ±Îêú Í≤ΩÍ∏∞ ' + (i+1) + ':', match);
            }
            
            generateUpcomingMatches();
            generateRankings();
            
            console.log('Ï¥ù ÎùºÏù¥Î∏å Í≤ΩÍ∏∞ Ïàò:', liveMatches.length);
            
            // Ï¶âÏãú UI ÏóÖÎç∞Ïù¥Ìä∏
            updateLiveMatches();
            updateUpcomingMatches();
            updateUI();
        }

        // ÏÇ¨Ïö©Ïûê Îç∞Ïù¥ÌÑ∞ Î°úÎìú
        function loadUserData() {
            const saved = localStorage.getItem('virtSportsData');
            if (saved) {
                const data = JSON.parse(saved);
                userPoints = data.userPoints || 10000;
                bettingHistory = data.bettingHistory || [];
                rankings = data.rankings || [];
            }
            
            // Ï¥àÍ∏∞ Îû≠ÌÇπ ÏÉùÏÑ±
            if (rankings.length === 0) {
                generateInitialRankings();
            }
        }

        // Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
        function saveUserData() {
            const data = {
                userPoints: userPoints,
                bettingHistory: bettingHistory,
                rankings: rankings
            };
            localStorage.setItem('virtSportsData', JSON.stringify(data));
        }

        // ÎùºÏù¥Î∏å Í≤ΩÍ∏∞ ÏÉùÏÑ±
        function generateLiveMatches() {
            console.log('ÎùºÏù¥Î∏å Í≤ΩÍ∏∞ ÏÉùÏÑ± ÏãúÏûë');
            liveMatches = [];
            for (let i = 0; i < 3; i++) {
                const match = createRandomMatch(true);
                console.log('ÏÉùÏÑ±Îêú Í≤ΩÍ∏∞:', match);
                liveMatches.push(match);
            }
            console.log('Ï¥ù ÏÉùÏÑ±Îêú ÎùºÏù¥Î∏å Í≤ΩÍ∏∞ Ïàò:', liveMatches.length);
        }

        // ÏòàÏ†ï Í≤ΩÍ∏∞ ÏÉùÏÑ±
        function generateUpcomingMatches() {
            upcomingMatches = [];
            for (let i = 0; i < 6; i++) {
                const match = createRandomMatch(false);
                match.startTime = Date.now() + (i + 1) * 300000; // 5Î∂Ñ Í∞ÑÍ≤©
                upcomingMatches.push(match);
            }
        }

        // ÎûúÎç§ Í≤ΩÍ∏∞ ÏÉùÏÑ±
        function createRandomMatch(isLive = false) {
            const sport = sports[Math.floor(Math.random() * sports.length)];
            const sportTeams = teams[sport];
            
            // Í≤ΩÎßà/Í∞úÍ≤ΩÍ∏∞Îäî Îã§Ï§ë Ï∞∏Í∞ÄÏûê Î†àÏù¥Ïä§
            if (sport === 'ÎßêÍ≤ΩÍ∏∞' || sport === 'Í∞úÍ≤ΩÍ∏∞') {
                const participants = [];
                const numParticipants = Math.floor(Math.random() * 4) + 6; // 6-9ÎßàÎ¶¨
                
                for (let i = 0; i < numParticipants; i++) {
                    let participant = sportTeams[Math.floor(Math.random() * sportTeams.length)];
                    while (participants.some(p => p.name === participant)) {
                        participant = sportTeams[Math.floor(Math.random() * sportTeams.length)];
                    }
                    
                    participants.push({
                        name: participant,
                        number: i + 1,
                        odds: (Math.random() * 8 + 1.5).toFixed(2), // 1.5Î∞∞ ~ 9.5Î∞∞
                        position: isLive ? Math.floor(Math.random() * 100) : 0
                    });
                }
                
                // Î∞∞ÎãπÎ•† Í∏∞Ï§ÄÏúºÎ°ú Ï†ïÎ†¨ (ÎÇÆÏùÄ Î∞∞ÎãπÎ•†Ïù¥ 1Îì± ÌõÑÎ≥¥)
                participants.sort((a, b) => parseFloat(a.odds) - parseFloat(b.odds));
                
                const match = {
                    id: Date.now() + Math.random(),
                    sport: sport,
                    isRace: true,
                    participants: participants,
                    isLive: isLive,
                    startTime: isLive ? Date.now() : null,
                    duration: 180000, // 3Î∂Ñ
                    raceDistance: sport === 'ÎßêÍ≤ΩÍ∏∞' ? '1200m' : '500m'
                };
                
                return match;
            }
            
            // ÏùºÎ∞ò Ïä§Ìè¨Ï∏† (Í∏∞Ï°¥ Î°úÏßÅ)
            const team1 = sportTeams[Math.floor(Math.random() * sportTeams.length)];
            let team2 = sportTeams[Math.floor(Math.random() * sportTeams.length)];
            while (team2 === team1) {
                team2 = sportTeams[Math.floor(Math.random() * sportTeams.length)];
            }

            const match = {
                id: Date.now() + Math.random(),
                sport: sport,
                team1: team1,
                team2: team2,
                odds1: (Math.random() * 2 + 1.2).toFixed(2),
                odds2: (Math.random() * 2 + 1.2).toFixed(2),
                oddsDraw: sport !== 'ÌÖåÎãàÏä§' ? (Math.random() * 1.5 + 2.5).toFixed(2) : null,
                isLive: isLive,
                startTime: isLive ? Date.now() : null,
                duration: 180000, // 3Î∂Ñ
                score1: isLive ? Math.floor(Math.random() * 3) : 0,
                score2: isLive ? Math.floor(Math.random() * 3) : 0
            };

            return match;
        }

        // ÏÉàÎ°úÏö¥ Í≤ΩÍ∏∞ ÏÉùÏÑ±
        function generateNewMatch() {
            // ÎùºÏù¥Î∏å Í≤ΩÍ∏∞Í∞Ä 3Í∞ú ÎØ∏ÎßåÏù¥Î©¥ Ï∂îÍ∞Ä
            if (liveMatches.length < 3) {
                liveMatches.push(createRandomMatch(true));
            }
            
            // ÏòàÏ†ï Í≤ΩÍ∏∞ Ï∂îÍ∞Ä
            if (upcomingMatches.length < 6) {
                const match = createRandomMatch(false);
                match.startTime = Date.now() + 300000;
                upcomingMatches.push(match);
            }
            
            updateLiveMatches();
            updateUpcomingMatches();
        }

        // Í≤ΩÍ∏∞ Í≤∞Í≥º Ï≤òÎ¶¨
        function processMatchResults() {
            liveMatches.forEach(match => {
                if (Date.now() - match.startTime >= match.duration) {
                    let winner;
                    
                    if (match.isRace) {
                        // Í≤ΩÎßà/Í∞úÍ≤ΩÍ∏∞ Í≤∞Í≥º Ï≤òÎ¶¨
                        // Î∞∞ÎãπÎ•†Ïù¥ ÎÇÆÏùÑÏàòÎ°ù Ïö∞Ïäπ ÌôïÎ•† ÎÜíÏùå
                        const totalWeight = match.participants.reduce((sum, p) => {
                            return sum + (10 / parseFloat(p.odds)); // Î∞∞ÎãπÎ•† Ïó≠ÏàòÎ°ú Í∞ÄÏ§ëÏπò
                        }, 0);
                        
                        let random = Math.random() * totalWeight;
                        for (let participant of match.participants) {
                            random -= (10 / parseFloat(participant.odds));
                            if (random <= 0) {
                                winner = participant.number;
                                break;
                            }
                        }
                    } else {
                        // ÏùºÎ∞ò Ïä§Ìè¨Ï∏† Í≤∞Í≥º Ï≤òÎ¶¨
                        const result = Math.random();
                        if (result < 0.4) winner = 'team1';
                        else if (result < 0.8) winner = 'team2';
                        else winner = 'draw';
                    }
                    
                    // Î≤†ÌåÖ Í≤∞Í≥º Ï≤òÎ¶¨
                    processBettingResults(match.id, winner);
                }
            });
            
            // Ï¢ÖÎ£åÎêú Í≤ΩÍ∏∞ Ï†úÍ±∞
            liveMatches = liveMatches.filter(match => 
                Date.now() - match.startTime < match.duration
            );
            
            updateLiveMatches();
        }

        // Î≤†ÌåÖ Í≤∞Í≥º Ï≤òÎ¶¨
        function processBettingResults(matchId, winner) {
            currentBets.forEach(bet => {
                if (bet.matchId === matchId) {
                    let won = false;
                    
                    if (bet.isRace) {
                        // Í≤ΩÎßà/Í∞úÍ≤ΩÍ∏∞ Î≤†ÌåÖ Í≤∞Í≥º
                        if (bet.participantNumber === winner) {
                            won = true;
                            const winAmount = Math.floor(bet.amount * bet.odds);
                            userPoints += winAmount;
                            
                            // ÏäπÎ¶¨ Ïï†ÎãàÎ©îÏù¥ÏÖò
                            showWinAnimation(winAmount);
                        }
                    } else {
                        // ÏùºÎ∞ò Ïä§Ìè¨Ï∏† Î≤†ÌåÖ Í≤∞Í≥º
                        if ((bet.type === 'team1' && winner === 'team1') ||
                            (bet.type === 'team2' && winner === 'team2') ||
                            (bet.type === 'draw' && winner === 'draw')) {
                            won = true;
                            const winAmount = Math.floor(bet.amount * bet.odds);
                            userPoints += winAmount;
                            
                            // ÏäπÎ¶¨ Ïï†ÎãàÎ©îÏù¥ÏÖò
                            showWinAnimation(winAmount);
                        }
                    }
                    
                    // Î≤†ÌåÖ ÎÇ¥Ïó≠Ïóê Ï∂îÍ∞Ä
                    bettingHistory.unshift({
                        ...bet,
                        result: won ? 'win' : 'lose',
                        timestamp: Date.now(),
                        winner: winner
                    });
                }
            });
            
            // Ï≤òÎ¶¨Îêú Î≤†ÌåÖ Ï†úÍ±∞
            currentBets = currentBets.filter(bet => bet.matchId !== matchId);
            
            updateRankings();
            saveUserData();
            updateUI();
        }

        // ÏäπÎ¶¨ Ïï†ÎãàÎ©îÏù¥ÏÖò
        function showWinAnimation(amount) {
            const pointsElement = document.getElementById('userPoints');
            pointsElement.classList.add('celebration');
            
            // ÌîåÎ°úÌåÖ Ìè¨Ïù∏Ìä∏ ÌëúÏãú
            const floatingPoints = document.createElement('div');
            floatingPoints.className = 'floating-points fixed text-green-400 font-bold text-2xl z-50';
            floatingPoints.textContent = `+${amount}P`;
            floatingPoints.style.left = pointsElement.getBoundingClientRect().left + 'px';
            floatingPoints.style.top = pointsElement.getBoundingClientRect().top + 'px';
            document.body.appendChild(floatingPoints);
            
            setTimeout(() => {
                pointsElement.classList.remove('celebration');
                floatingPoints.remove();
            }, 2000);
        }

        // Î≤†ÌåÖÌïòÍ∏∞
        function placeBet(matchId, type, odds, teamName, participantNumber = null) {
            const match = liveMatches.find(m => m.id === matchId);
            if (!match) return;
            
            selectedBet = {
                matchId: matchId,
                type: type,
                odds: parseFloat(odds),
                teamName: teamName,
                match: match,
                isRace: match.isRace || false,
                participantNumber: participantNumber
            };
            
            // Î≤†ÌåÖ Î™®Îã¨ ÌëúÏãú
            showBetModal();
        }

        // Î≤†ÌåÖ Î™®Îã¨ ÌëúÏãú
        function showBetModal() {
            const modal = document.getElementById('betModal');
            const details = document.getElementById('betDetails');
            
            details.innerHTML = `
                <div class="bg-slate-700 rounded-lg p-4">
                    <div class="text-white font-medium">${selectedBet.match.team1} vs ${selectedBet.match.team2}</div>
                    <div class="text-slate-300 text-sm">${selectedBet.match.sport}</div>
                    <div class="text-blue-400 font-bold mt-2">
                        ${selectedBet.teamName} (${selectedBet.odds}Î∞∞)
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        // Î≤†ÌåÖ ÌôïÏ†ï
        function confirmBet() {
            const amount = parseInt(document.getElementById('betAmount').value);
            
            if (amount < 100 || amount > 5000) {
                alert('Î≤†ÌåÖ Ìè¨Ïù∏Ìä∏Îäî 100P ~ 5,000P ÏÇ¨Ïù¥Ïó¨Ïïº Ìï©ÎãàÎã§.');
                return;
            }
            
            if (amount > userPoints) {
                alert('Ìè¨Ïù∏Ìä∏Í∞Ä Î∂ÄÏ°±Ìï©ÎãàÎã§.');
                return;
            }
            
            // Ìè¨Ïù∏Ìä∏ Ï∞®Í∞ê
            userPoints -= amount;
            
            // Î≤†ÌåÖ Ï∂îÍ∞Ä
            currentBets.push({
                ...selectedBet,
                amount: amount,
                timestamp: Date.now()
            });
            
            cancelBet();
            updateUI();
            updateBettingHistory(); // Î≤†ÌåÖ ÎÇ¥Ïó≠ Ï¶âÏãú ÏóÖÎç∞Ïù¥Ìä∏
            saveUserData();
            
            alert(`‚úÖ Î≤†ÌåÖÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!\n${amount}PÎ•º Î≤†ÌåÖÌñàÏäµÎãàÎã§.`);
        }

        // Î≤†ÌåÖ Ï∑®ÏÜå
        function cancelBet() {
            document.getElementById('betModal').classList.add('hidden');
            document.getElementById('betModal').classList.remove('flex');
            selectedBet = null;
        }

        // ÏÑπÏÖò Ï†ÑÌôò
        function showSection(section) {
            // Î™®Îì† ÏÑπÏÖò Ïà®Í∏∞Í∏∞
            document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
            
            // ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Î≤ÑÌäº Ïä§ÌÉÄÏùº Ï¥àÍ∏∞Ìôî
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // ÏÑ†ÌÉùÎêú ÏÑπÏÖò ÌëúÏãú
            document.getElementById(section + 'Section').classList.remove('hidden');
            document.getElementById(section + 'Btn').classList.add('active');
            
            // ÏÑπÏÖòÎ≥Ñ Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
            if (section === 'history') {
                updateBettingHistory();
            } else if (section === 'live') {
                updateLiveMatches();
            } else if (section === 'upcoming') {
                updateUpcomingMatches();
            }
        }

        // ÎùºÏù¥Î∏å Í≤ΩÍ∏∞ ÏóÖÎç∞Ïù¥Ìä∏
        function updateLiveMatches() {
            console.log('ÎùºÏù¥Î∏å Í≤ΩÍ∏∞ ÏóÖÎç∞Ïù¥Ìä∏ ÏãúÏûë, Í≤ΩÍ∏∞ Ïàò:', liveMatches.length);
            const container = document.getElementById('liveMatches');
            
            if (!container) {
                console.error('liveMatches Ïª®ÌÖåÏù¥ÎÑàÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏùå');
                return;
            }
            
            if (liveMatches.length === 0) {
                console.log('Í≤ΩÍ∏∞Í∞Ä ÏóÜÏñ¥ÏÑú Î©îÏãúÏßÄ ÌëúÏãú');
                container.innerHTML = `
                    <div class="text-center text-slate-400 py-8">
                        <div class="text-4xl mb-4">‚è∞</div>
                        <p>ÌòÑÏû¨ ÏßÑÌñâ Ï§ëÏù∏ Í≤ΩÍ∏∞Í∞Ä ÏóÜÏäµÎãàÎã§</p>
                        <button onclick="generateLiveMatches(); updateLiveMatches();" class="mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">
                            Í≤ΩÍ∏∞ ÏÉùÏÑ±ÌïòÍ∏∞
                        </button>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = liveMatches.map(match => {
                const elapsed = Math.floor((Date.now() - match.startTime) / 1000);
                const remaining = Math.max(0, 180 - elapsed);
                const minutes = Math.floor(remaining / 60);
                const seconds = remaining % 60;
                
                if (match.isRace) {
                    // Í≤ΩÎßà/Í∞úÍ≤ΩÍ∏∞ Î†àÏù¥ÏïÑÏõÉ
                    return `
                        <div class="card p-6 mb-4">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center gap-3">
                                    <span class="sport-icon">${getSportIcon(match.sport)}</span>
                                    <div>
                                        <div class="text-gray-900 font-bold">${match.sport} - ${match.raceDistance}</div>
                                        <div class="text-red-600 text-sm flex items-center gap-1">
                                            <span class="live-indicator">‚óè</span> LIVE Î†àÏù¥Ïä§
                                        </div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-gray-900 font-bold">${match.participants.length}ÎßàÎ¶¨</div>
                                    <div class="text-blue-600 font-medium">${minutes}:${seconds.toString().padStart(2, '0')}</div>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-2 md:grid-cols-3 gap-2 mb-4">
                                ${match.participants.map(participant => `
                                    <button onclick="placeBet(${match.id}, 'race', ${participant.odds}, '${participant.number}Î≤à ${participant.name}', ${participant.number})" 
                                            class="odds-btn text-center">
                                        <div class="text-xs text-gray-600">${participant.number}Î≤à</div>
                                        <div class="text-sm font-medium truncate">${participant.name}</div>
                                        <div class="text-lg font-bold text-blue-600">${participant.odds}Î∞∞</div>
                                    </button>
                                `).join('')}
                            </div>
                            
                            <div class="bg-gray-200 rounded-full h-2 overflow-hidden">
                                <div class="progress-bar h-full" style="width: ${(remaining / 180) * 100}%"></div>
                            </div>
                        </div>
                    `;
                } else {
                    // ÏùºÎ∞ò Ïä§Ìè¨Ï∏† Î†àÏù¥ÏïÑÏõÉ
                    return `
                        <div class="card p-6 mb-4">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center gap-3">
                                    <span class="sport-icon">${getSportIcon(match.sport)}</span>
                                    <div>
                                        <div class="text-gray-900 font-bold">${match.sport}</div>
                                        <div class="text-red-600 text-sm flex items-center gap-1">
                                            <span class="live-indicator">‚óè</span> LIVE
                                        </div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-gray-900 font-bold text-xl">${match.score1} : ${match.score2}</div>
                                    <div class="text-blue-600 font-medium">${minutes}:${seconds.toString().padStart(2, '0')}</div>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-${match.oddsDraw ? '3' : '2'} gap-3 mb-4">
                                <button onclick="placeBet(${match.id}, 'team1', ${match.odds1}, '${match.team1}')" 
                                        class="odds-btn text-center py-4">
                                    <div class="text-sm font-medium">${match.team1}</div>
                                    <div class="text-xl font-bold text-blue-600">${match.odds1}</div>
                                </button>
                                
                                ${match.oddsDraw ? `
                                    <button onclick="placeBet(${match.id}, 'draw', ${match.oddsDraw}, 'Î¨¥ÏäπÎ∂Ä')" 
                                            class="odds-btn text-center py-4">
                                        <div class="text-sm font-medium">Î¨¥ÏäπÎ∂Ä</div>
                                        <div class="text-xl font-bold text-blue-600">${match.oddsDraw}</div>
                                    </button>
                                ` : ''}
                                
                                <button onclick="placeBet(${match.id}, 'team2', ${match.odds2}, '${match.team2}')" 
                                        class="odds-btn text-center py-4">
                                    <div class="text-sm font-medium">${match.team2}</div>
                                    <div class="text-xl font-bold text-blue-600">${match.odds2}</div>
                                </button>
                            </div>
                            
                            <div class="bg-gray-200 rounded-full h-2 overflow-hidden">
                                <div class="progress-bar h-full" style="width: ${(remaining / 180) * 100}%"></div>
                            </div>
                        </div>
                    `;
                }
            }).join('');
        }

        // ÏòàÏ†ï Í≤ΩÍ∏∞ ÏóÖÎç∞Ïù¥Ìä∏
        function updateUpcomingMatches() {
            const container = document.getElementById('upcomingMatches');
            
            container.innerHTML = upcomingMatches.map(match => {
                const timeUntil = Math.max(0, match.startTime - Date.now());
                const minutes = Math.floor(timeUntil / 60000);
                const seconds = Math.floor((timeUntil % 60000) / 1000);
                
                if (match.isRace) {
                    // Í≤ΩÎßà/Í∞úÍ≤ΩÍ∏∞ ÏòàÏ†ï Í≤ΩÍ∏∞
                    return `
                        <div class="match-card rounded-lg p-4">
                            <div class="flex items-center gap-3 mb-3">
                                <span class="text-xl">${getSportIcon(match.sport)}</span>
                                <div>
                                    <div class="text-white font-medium">${match.sport} - ${match.raceDistance}</div>
                                    <div class="text-blue-400 text-sm">${minutes}:${seconds.toString().padStart(2, '0')} ÌõÑ ÏãúÏûë</div>
                                </div>
                            </div>
                            
                            <div class="text-center mb-3">
                                <div class="text-white font-bold">${match.participants.length}ÎßàÎ¶¨ Ï∂úÏ†Ñ</div>
                                <div class="text-slate-400 text-sm">Î†àÏù¥Ïä§ ÏòàÏ†ï</div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-1 text-center text-xs">
                                ${match.participants.slice(0, 4).map(participant => `
                                    <div class="bg-slate-700 py-1 rounded">
                                        <div class="text-slate-300">${participant.number}Î≤à ${participant.name}</div>
                                        <div class="text-green-400 font-bold">${participant.odds}Î∞∞</div>
                                    </div>
                                `).join('')}
                            </div>
                            ${match.participants.length > 4 ? `
                                <div class="text-center text-slate-400 text-xs mt-2">
                                    Ïô∏ ${match.participants.length - 4}ÎßàÎ¶¨ Îçî...
                                </div>
                            ` : ''}
                        </div>
                    `;
                } else {
                    // ÏùºÎ∞ò Ïä§Ìè¨Ï∏† ÏòàÏ†ï Í≤ΩÍ∏∞
                    return `
                        <div class="match-card rounded-lg p-4">
                            <div class="flex items-center gap-3 mb-3">
                                <span class="text-xl">${getSportIcon(match.sport)}</span>
                                <div>
                                    <div class="text-white font-medium">${match.sport}</div>
                                    <div class="text-blue-400 text-sm">${minutes}:${seconds.toString().padStart(2, '0')} ÌõÑ ÏãúÏûë</div>
                                </div>
                            </div>
                            
                            <div class="text-center mb-3">
                                <div class="text-white">${match.team1}</div>
                                <div class="text-slate-400 text-sm">vs</div>
                                <div class="text-white">${match.team2}</div>
                            </div>
                            
                            <div class="grid grid-cols-${match.oddsDraw ? '3' : '2'} gap-2 text-center text-sm">
                                <div class="bg-slate-700 py-2 rounded">
                                    <div class="text-slate-300">${match.team1}</div>
                                    <div class="text-green-400 font-bold">${match.odds1}</div>
                                </div>
                                ${match.oddsDraw ? `
                                    <div class="bg-slate-700 py-2 rounded">
                                        <div class="text-slate-300">Î¨¥ÏäπÎ∂Ä</div>
                                        <div class="text-green-400 font-bold">${match.oddsDraw}</div>
                                    </div>
                                ` : ''}
                                <div class="bg-slate-700 py-2 rounded">
                                    <div class="text-slate-300">${match.team2}</div>
                                    <div class="text-green-400 font-bold">${match.odds2}</div>
                                </div>
                            </div>
                        </div>
                    `;
                }
            }).join('');
        }

        // Î≤†ÌåÖ ÎÇ¥Ïó≠ ÏóÖÎç∞Ïù¥Ìä∏
        function updateBettingHistory() {
            const tbody = document.getElementById('bettingHistory');
            
            // ÌòÑÏû¨ Î≤†ÌåÖÍ≥º ÏôÑÎ£åÎêú Î≤†ÌåÖÏùÑ Î™®Îëê Ìè¨Ìï®
            const allBets = [...bettingHistory, ...currentBets.map(bet => ({
                ...bet,
                result: 'pending',
                timestamp: bet.timestamp
            }))];
            
            if (allBets.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" class="text-center text-slate-400 py-8">
                            <div class="text-4xl mb-2">üìä</div>
                            <p>ÏïÑÏßÅ Î≤†ÌåÖ ÎÇ¥Ïó≠Ïù¥ ÏóÜÏäµÎãàÎã§</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            // ÏãúÍ∞ÑÏàúÏúºÎ°ú Ï†ïÎ†¨ (ÏµúÏã†Ïàú)
            allBets.sort((a, b) => b.timestamp - a.timestamp);
            
            tbody.innerHTML = allBets.slice(0, 20).map(bet => {
                const date = new Date(bet.timestamp).toLocaleDateString();
                const time = new Date(bet.timestamp).toLocaleTimeString();
                
                let resultClass, resultText, points;
                
                if (bet.result === 'pending') {
                    resultClass = 'text-yellow-400';
                    resultText = 'ÏßÑÌñâÏ§ë';
                    points = `${bet.amount}P Î≤†ÌåÖ`;
                } else if (bet.result === 'win') {
                    resultClass = 'text-green-400';
                    resultText = 'ÏäπÎ¶¨';
                    points = `+${Math.floor(bet.amount * bet.odds)}P`;
                } else {
                    resultClass = 'text-red-400';
                    resultText = 'Ìå®Î∞∞';
                    points = `-${bet.amount}P`;
                }
                
                let matchDisplay;
                if (bet.isRace) {
                    matchDisplay = `${bet.match.sport} - ${bet.match.raceDistance || 'Î†àÏù¥Ïä§'}`;
                } else {
                    matchDisplay = `${bet.match.team1} vs ${bet.match.team2}`;
                }
                
                return `
                    <tr class="hover:bg-slate-700">
                        <td class="px-4 py-3 text-white">
                            ${matchDisplay}
                            <div class="text-sm text-slate-400">${date} ${time}</div>
                        </td>
                        <td class="px-4 py-3 text-slate-300">${bet.teamName}</td>
                        <td class="px-4 py-3 text-slate-300">${bet.odds}Î∞∞</td>
                        <td class="px-4 py-3 text-slate-300">${bet.amount}P</td>
                        <td class="px-4 py-3">
                            <span class="${resultClass} font-medium">${resultText}</span>
                            <div class="text-sm ${resultClass}">${points}</div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Îû≠ÌÇπ ÏÉùÏÑ±
        function generateInitialRankings() {
            const names = ['Î≤†ÌåÖÌÇπ', 'Îü≠ÌÇ§ÏÑ∏Î∏ê', 'Í≥®Îì†ÌÑ∞Ïπò', 'Ïä§Ìè¨Ï∏†Îß§ÎãàÏïÑ', 'ÏäπÎ∂ÄÏÇ¨', 'Ìè¨Ïù∏Ìä∏ÌóåÌÑ∞', 'Î≤†ÌåÖÎßàÏä§ÌÑ∞', 'Îü≠ÌÇ§Ïä§ÌÉÄ'];
            
            rankings = names.map((name, index) => ({
                name: name,
                points: 15000 - (index * 1000) + Math.floor(Math.random() * 500),
                wins: Math.floor(Math.random() * 50) + 20,
                totalBets: Math.floor(Math.random() * 100) + 50
            }));
            
            // ÌòÑÏû¨ ÏÇ¨Ïö©Ïûê Ï∂îÍ∞Ä
            rankings.push({
                name: 'ÎÇò',
                points: userPoints,
                wins: bettingHistory.filter(bet => bet.result === 'win').length,
                totalBets: bettingHistory.length,
                isUser: true
            });
            
            updateRankings();
        }

        // Îû≠ÌÇπ ÏóÖÎç∞Ïù¥Ìä∏
        function updateRankings() {
            // ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
            const userRank = rankings.find(r => r.isUser);
            if (userRank) {
                userRank.points = userPoints;
                userRank.wins = bettingHistory.filter(bet => bet.result === 'win').length;
                userRank.totalBets = bettingHistory.length;
            }
            
            // Ìè¨Ïù∏Ìä∏ ÏàúÏúºÎ°ú Ï†ïÎ†¨
            rankings.sort((a, b) => b.points - a.points);
            
            // ÏàúÏúÑ ÏóÖÎç∞Ïù¥Ìä∏
            rankings.forEach((rank, index) => {
                rank.position = index + 1;
            });
            
            updateTopRankings();
            
            // ÏÇ¨Ïö©Ïûê ÏàúÏúÑ ÌëúÏãú
            const userPosition = rankings.find(r => r.isUser)?.position || 1;
            document.getElementById('userRank').textContent = `#${userPosition}`;
        }

        // TOP 5 Îû≠ÌÇπ ÏóÖÎç∞Ïù¥Ìä∏
        function updateTopRankings() {
            const container = document.getElementById('topRankings');
            
            container.innerHTML = rankings.slice(0, 5).map(rank => {
                const medalClass = rank.position === 1 ? 'rank-gold' : 
                                 rank.position === 2 ? 'rank-silver' : 
                                 rank.position === 3 ? 'rank-bronze' : 'text-slate-300';
                
                const medal = rank.position === 1 ? 'ü•á' : 
                             rank.position === 2 ? 'ü•à' : 
                             rank.position === 3 ? 'ü•â' : `#${rank.position}`;
                
                return `
                    <div class="flex items-center justify-between p-3 bg-slate-700 rounded-lg ${rank.isUser ? 'ring-2 ring-blue-500' : ''}">
                        <div class="flex items-center gap-3">
                            <span class="${medalClass} font-bold">${medal}</span>
                            <div>
                                <div class="text-white font-medium">${rank.name}</div>
                                <div class="text-slate-400 text-sm">${rank.wins}Ïäπ / ${rank.totalBets}Ï†Ñ</div>
                            </div>
                        </div>
                        <div class="text-yellow-400 font-bold">${rank.points.toLocaleString()}P</div>
                    </div>
                `;
            }).join('');
        }

        // Ï†ÑÏ≤¥ Îû≠ÌÇπ ÌëúÏãú
        function showRankings() {
            const modal = document.getElementById('rankingModal');
            const container = document.getElementById('fullRankings');
            
            container.innerHTML = rankings.map(rank => {
                const medalClass = rank.position === 1 ? 'rank-gold' : 
                                 rank.position === 2 ? 'rank-silver' : 
                                 rank.position === 3 ? 'rank-bronze' : 'text-slate-300';
                
                const medal = rank.position === 1 ? 'ü•á' : 
                             rank.position === 2 ? 'ü•à' : 
                             rank.position === 3 ? 'ü•â' : `#${rank.position}`;
                
                const winRate = rank.totalBets > 0 ? ((rank.wins / rank.totalBets) * 100).toFixed(1) : '0.0';
                
                return `
                    <div class="flex items-center justify-between p-4 bg-slate-700 rounded-lg ${rank.isUser ? 'ring-2 ring-blue-500' : ''}">
                        <div class="flex items-center gap-4">
                            <span class="${medalClass} font-bold text-lg">${medal}</span>
                            <div>
                                <div class="text-white font-medium">${rank.name}</div>
                                <div class="text-slate-400 text-sm">
                                    ${rank.wins}Ïäπ ${rank.totalBets - rank.wins}Ìå® (ÏäπÎ•† ${winRate}%)
                                </div>
                            </div>
                        </div>
                        <div class="text-yellow-400 font-bold text-lg">${rank.points.toLocaleString()}P</div>
                    </div>
                `;
            }).join('');
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        // Îû≠ÌÇπ Î™®Îã¨ Ïà®Í∏∞Í∏∞
        function hideRankings() {
            document.getElementById('rankingModal').classList.add('hidden');
            document.getElementById('rankingModal').classList.remove('flex');
        }

        // Í¥ÄÎ¶¨Ïûê Ìå®ÎÑê ÌëúÏãú
        function showAdminPanel() {
            updateAdminStats();
            document.getElementById('adminModal').classList.remove('hidden');
            document.getElementById('adminModal').classList.add('flex');
        }

        // Í¥ÄÎ¶¨Ïûê Ìå®ÎÑê Ïà®Í∏∞Í∏∞
        function hideAdminPanel() {
            document.getElementById('adminModal').classList.add('hidden');
            document.getElementById('adminModal').classList.remove('flex');
        }

        // Í¥ÄÎ¶¨Ïûê ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
        function updateAdminStats() {
            document.getElementById('adminLiveCount').textContent = liveMatches.length;
            document.getElementById('adminUpcomingCount').textContent = upcomingMatches.length;
            document.getElementById('adminBetCount').textContent = currentBets.length;
        }

        // Ìè¨Ïù∏Ìä∏ Ï∂îÍ∞Ä
        function addPoints() {
            const amount = parseInt(document.getElementById('pointsToAdd').value);
            if (isNaN(amount) || amount <= 0) {
                alert('Ïò¨Î∞îÎ•∏ Ìè¨Ïù∏Ìä∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }
            
            userPoints += amount;
            updateUI();
            saveUserData();
            
            // ÏÑ±Í≥µ Ïï†ÎãàÎ©îÏù¥ÏÖò
            showWinAnimation(amount);
            
            alert(`‚úÖ ${amount.toLocaleString()}PÍ∞Ä Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§!\nÌòÑÏû¨ Ìè¨Ïù∏Ìä∏: ${userPoints.toLocaleString()}P`);
            document.getElementById('pointsToAdd').value = '';
        }

        // Ìè¨Ïù∏Ìä∏ Ï∞®Í∞ê
        function removePoints() {
            const amount = parseInt(document.getElementById('pointsToAdd').value);
            if (isNaN(amount) || amount <= 0) {
                alert('Ïò¨Î∞îÎ•∏ Ìè¨Ïù∏Ìä∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }
            
            if (amount > userPoints) {
                alert('Ï∞®Í∞êÌï† Ìè¨Ïù∏Ìä∏Í∞Ä ÌòÑÏû¨ Ìè¨Ïù∏Ìä∏Î≥¥Îã§ ÎßéÏäµÎãàÎã§.');
                return;
            }
            
            userPoints -= amount;
            updateUI();
            saveUserData();
            
            alert(`‚úÖ ${amount.toLocaleString()}PÍ∞Ä Ï∞®Í∞êÎêòÏóàÏäµÎãàÎã§!\nÌòÑÏû¨ Ìè¨Ïù∏Ìä∏: ${userPoints.toLocaleString()}P`);
            document.getElementById('pointsToAdd').value = '';
        }

        // Ìè¨Ïù∏Ìä∏ ÏÑ§Ï†ï
        function setPoints(amount) {
            userPoints = amount;
            updateUI();
            saveUserData();
            
            alert(`‚úÖ Ìè¨Ïù∏Ìä∏Í∞Ä ${amount.toLocaleString()}PÎ°ú ÏÑ§Ï†ïÎêòÏóàÏäµÎãàÎã§!`);
        }

        // Ìè¨Ïù∏Ìä∏ Ï¥àÍ∏∞Ìôî
        function resetPoints() {
            if (confirm('Ï†ïÎßêÎ°ú Ìè¨Ïù∏Ìä∏Î•º 10,000PÎ°ú Ï¥àÍ∏∞ÌôîÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                userPoints = 10000;
                updateUI();
                saveUserData();
                alert('‚úÖ Ìè¨Ïù∏Ìä∏Í∞Ä Ï¥àÍ∏∞ÌôîÎêòÏóàÏäµÎãàÎã§!');
            }
        }

        // Í∞ïÏ†ú Í≤ΩÍ∏∞ ÏÉùÏÑ±
        function forceCreateMatch() {
            const newMatch = createRandomMatch(true);
            liveMatches.push(newMatch);
            updateLiveMatches();
            updateAdminStats();
            
            alert(`‚úÖ ÏÉàÎ°úÏö¥ ${newMatch.sport} Í≤ΩÍ∏∞Í∞Ä ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!`);
        }

        // Î™®Îì† Í≤ΩÍ∏∞ Ï¢ÖÎ£å
        function endAllMatches() {
            if (confirm('Ï†ïÎßêÎ°ú Î™®Îì† ÏßÑÌñâ Ï§ëÏù∏ Í≤ΩÍ∏∞Î•º Ï¢ÖÎ£åÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                // Í∞Å Í≤ΩÍ∏∞Ïóê ÎåÄÌï¥ ÎûúÎç§ Í≤∞Í≥º ÏÉùÏÑ±
                liveMatches.forEach(match => {
                    let winner;
                    if (match.isRace) {
                        winner = Math.floor(Math.random() * match.participants.length) + 1;
                    } else {
                        const result = Math.random();
                        if (result < 0.4) winner = 'team1';
                        else if (result < 0.8) winner = 'team2';
                        else winner = 'draw';
                    }
                    processBettingResults(match.id, winner);
                });
                
                liveMatches = [];
                updateLiveMatches();
                updateAdminStats();
                
                alert('‚úÖ Î™®Îì† Í≤ΩÍ∏∞Í∞Ä Ï¢ÖÎ£åÎêòÏóàÏäµÎãàÎã§!');
            }
        }

        // ÌäπÎ≥Ñ Ïù¥Î≤§Ìä∏ Í≤ΩÍ∏∞ ÏÉùÏÑ±
        function createSpecialEvent() {
            const specialMatch = {
                id: Date.now() + Math.random(),
                sport: 'ÌäπÎ≥Ñ Ïù¥Î≤§Ìä∏',
                team1: 'üåü Í≥®Îì†ÌåÄ',
                team2: 'üíé Îã§Ïù¥ÏïÑÎ™¨ÎìúÌåÄ',
                odds1: '5.00',
                odds2: '5.00',
                oddsDraw: '10.00',
                isLive: true,
                startTime: Date.now(),
                duration: 300000, // 5Î∂Ñ
                score1: 0,
                score2: 0,
                isSpecial: true
            };
            
            liveMatches.push(specialMatch);
            updateLiveMatches();
            updateAdminStats();
            
            alert('‚ú® ÌäπÎ≥Ñ Ïù¥Î≤§Ìä∏ Í≤ΩÍ∏∞Í∞Ä ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!\nÎÜíÏùÄ Î∞∞ÎãπÎ•†Î°ú ÌÅ∞ ÏàòÏùµÏùÑ ÎÖ∏Î†§Î≥¥ÏÑ∏Ïöî!');
        }

        // Î™®Îì† Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî
        function resetAllData() {
            if (confirm('‚ö†Ô∏è Ï†ïÎßêÎ°ú Î™®Îì† Îç∞Ïù¥ÌÑ∞Î•º Ï¥àÍ∏∞ÌôîÌïòÏãúÍ≤†ÏäµÎãàÍπå?\nÏù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§.')) {
                if (confirm('ÎßàÏßÄÎßâ ÌôïÏù∏: Î≤†ÌåÖ ÎÇ¥Ïó≠, Ìè¨Ïù∏Ìä∏, Îû≠ÌÇπÏù¥ Î™®Îëê ÏÇ≠Ï†úÎê©ÎãàÎã§.')) {
                    localStorage.removeItem('virtSportsData');
                    userPoints = 10000;
                    bettingHistory = [];
                    currentBets = [];
                    liveMatches = [];
                    upcomingMatches = [];
                    rankings = [];
                    
                    // Îã§Ïãú Ï¥àÍ∏∞Ìôî
                    init();
                    
                    alert('‚úÖ Î™®Îì† Îç∞Ïù¥ÌÑ∞Í∞Ä Ï¥àÍ∏∞ÌôîÎêòÏóàÏäµÎãàÎã§!');
                }
            }
        }

        // Îç∞Ïù¥ÌÑ∞ ÎÇ¥Î≥¥ÎÇ¥Í∏∞
        function exportData() {
            const data = {
                userPoints: userPoints,
                bettingHistory: bettingHistory,
                rankings: rankings,
                currentBets: currentBets,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `virtsports_backup_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            URL.revokeObjectURL(url);
            
            alert('‚úÖ Îç∞Ïù¥ÌÑ∞Í∞Ä Îã§Ïö¥Î°úÎìúÎêòÏóàÏäµÎãàÎã§!');
        }

        // Ïä§Ìè¨Ï∏† ÏïÑÏù¥ÏΩò Í∞ÄÏ†∏Ïò§Í∏∞
        function getSportIcon(sport) {
            const icons = {
                'Ï∂ïÍµ¨': '‚öΩ',
                'ÎÜçÍµ¨': 'üèÄ',
                'ÏïºÍµ¨': '‚öæ',
                'ÌÖåÎãàÏä§': 'üéæ',
                'Î∞∞Íµ¨': 'üèê',
                'ÎßêÍ≤ΩÍ∏∞': 'üêé',
                'Í∞úÍ≤ΩÍ∏∞': 'üêï'
            };
            return icons[sport] || 'üèÜ';
        }

        // ÏòàÏ†ï Í≤ΩÍ∏∞Î•º ÎùºÏù¥Î∏åÎ°ú Ïù¥Îèô
        function moveUpcomingToLive() {
            const now = Date.now();
            const readyMatches = upcomingMatches.filter(match => match.startTime <= now);
            
            readyMatches.forEach(match => {
                match.isLive = true;
                match.startTime = now;
                liveMatches.push(match);
            });
            
            upcomingMatches = upcomingMatches.filter(match => match.startTime > now);
        }

        // ÌÉÄÏù¥Î®∏ ÏóÖÎç∞Ïù¥Ìä∏
        function updateMatchTimers() {
            moveUpcomingToLive();
            updateLiveMatches();
            updateUpcomingMatches();
        }

        // UI ÏóÖÎç∞Ïù¥Ìä∏
        function updateUI() {
            document.getElementById('userPoints').textContent = userPoints.toLocaleString();
            updateTopRankings();
        }

        // Ï¶âÏãú Í≤ΩÍ∏∞ ÏÉùÏÑ± Î∞è ÌëúÏãú
        function initializeMatches() {
            console.log('Í≤ΩÍ∏∞ Ï¥àÍ∏∞Ìôî ÏãúÏûë');
            
            // ÎùºÏù¥Î∏å Í≤ΩÍ∏∞ Í∞ïÏ†ú ÏÉùÏÑ±
            liveMatches = [
                {
                    id: 1001,
                    sport: 'Ï∂ïÍµ¨',
                    team1: 'Î†àÏïå ÎßàÎìúÎ¶¨Îìú',
                    team2: 'Î∞îÎ•¥ÏÖÄÎ°úÎÇò',
                    odds1: '2.10',
                    odds2: '1.85',
                    oddsDraw: '3.20',
                    isLive: true,
                    startTime: Date.now(),
                    duration: 180000,
                    score1: 1,
                    score2: 0
                },
                {
                    id: 1002,
                    sport: 'ÎÜçÍµ¨',
                    team1: 'Î†àÏù¥Ïª§Ïä§',
                    team2: 'ÏõåÎ¶¨Ïñ¥Ïä§',
                    odds1: '1.95',
                    odds2: '1.90',
                    oddsDraw: null,
                    isLive: true,
                    startTime: Date.now(),
                    duration: 180000,
                    score1: 78,
                    score2: 82
                },
                {
                    id: 1003,
                    sport: 'ÎßêÍ≤ΩÍ∏∞',
                    isRace: true,
                    participants: [
                        { name: 'Ïç¨ÎçîÎ≥ºÌä∏', number: 1, odds: '2.50', position: 85 },
                        { name: 'Í≥®Îì†Ïä§ÌîºÎìú', number: 2, odds: '3.20', position: 78 },
                        { name: 'Î°úÏó¥ÌîÑÎ¶∞Ïä§', number: 3, odds: '4.10', position: 72 },
                        { name: 'ÌååÏù¥Ïñ¥Ïä§ÌÜ∞', number: 4, odds: '5.50', position: 68 },
                        { name: 'ÏúàÎìúÎü¨ÎÑà', number: 5, odds: '6.80', position: 65 },
                        { name: 'Î∏îÎûôÎã§Ïù¥ÏïÑÎ™¨Îìú', number: 6, odds: '8.20', position: 60 }
                    ],
                    isLive: true,
                    startTime: Date.now(),
                    duration: 180000,
                    raceDistance: '1200m'
                }
            ];
            
            console.log('ÏÉùÏÑ±Îêú Í≤ΩÍ∏∞ Ïàò:', liveMatches.length);
            
            // Ï¶âÏãú UI ÏóÖÎç∞Ïù¥Ìä∏
            updateLiveMatches();
            generateUpcomingMatches();
            updateUpcomingMatches();
            generateRankings();
            updateUI();
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ÌéòÏù¥ÏßÄ Î°úÎìúÎê®');
            loadUserData();
            showSection('live');
            initializeMatches();
            
            // ÌÉÄÏù¥Î®∏ ÏãúÏûë
            setInterval(processMatchResults, 180000);
            setInterval(generateNewMatch, 30000);
            setInterval(updateMatchTimers, 1000);
        });

        // ÌéòÏù¥ÏßÄÍ∞Ä ÏôÑÏ†ÑÌûà Î°úÎìúÎêòÏßÄ ÏïäÏïòÏùÑ Í≤ΩÏö∞Î•º ÎåÄÎπÑÌïú Î∞±ÏóÖ
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeMatches);
        } else {
            // Ïù¥ÎØ∏ Î°úÎìúÎêú Í≤ΩÏö∞ Ï¶âÏãú Ïã§Ìñâ
            setTimeout(function() {
                loadUserData();
                showSection('live');
                initializeMatches();
            }, 50);
        }

        // ÌéòÏù¥ÏßÄ Ïñ∏Î°úÎìú Ïãú Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
        window.onbeforeunload = function() {
            saveUserData();
        };
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9711d2fc3292aa4a',t:'MTc1NTUyNDQzOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
